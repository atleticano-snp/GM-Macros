{"name":"Manobra: Inspirar","type":"feat","img":"systems/dnd5e/icons/skills/yellow_13.jpg","data":{"description":{"value":"<div>\n\t\t\t\n\t\t\t<div class=\"rd__b  rd__b--3\"><p>On your turn, you can use a bonus action and expend one superiority die to bolster the resolve of one of your companions. When you do so, choose a friendly creature who can see or hear you. That creature gains temporary hit points equal to the superiority die roll + your Charisma modifier.</p><div class=\"rd__spc-inline-post\"></div></div>\n\t\t</div>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":0,"units":""},"target":{"value":0,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"charges","target":"Xua4YBT4XHareySe","amount":1},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Fighter 3 (Battle Master)","recharge":{"value":0,"charged":true},"flags":{"srd5e":{"dataType":"subclassFeature","className":"Fighter","subclassName":"Battle Master"}}},"effects":[{"_id":"RTJT4LwR8vCv422X","changes":[{"key":"data.attributes.hp.temp","mode":2,"value":"1d10+@abilities.cha.mod","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/yellow_13.jpg","label":"Manobra: Inspirar","transfer":false,"flags":{"dae":{"stackable":false,"macroRepeat":"none","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"alignment":"","type":"","aura":"None","radius":null,"save":"","savedc":null,"hostile":false,"onlyOnce":false,"time":"None"}},"tint":null,"selectedKey":"data.attributes.hp.temp"}],"folder":null,"sort":0,"permission":{"default":0,"05k4ub2VgC3VLxAg":3},"flags":{"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"mess":{"templateTexture":""},"midi-qol":{"onUseMacroName":""},"innocenti-openlock":{"enabled":false,"keylock":"","wallCoord":"","disarmTrap":10,"findTrap":10,"skillfindTrap":"prc","passive":10,"forceLock":12,"openLock":10,"toolsBreak":5},"autoanimations":{"killAnim":false,"override":false,"animType":"t1","animName":"","hmAnim":"a1","color":"n1","uaStrikeType":"physical","dtvar":"dt1","explosion":false,"explodeVariant":"ev1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"bards":{"bardAnim":"a1","bardTarget":true,"bardTargetAnim":"a1","bardTargetColor":"a1","bardSelf":true,"marker":true,"markerColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","spellOptions":{"spellLoops":1},"divineSmite":{"dsEnable":false,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"a1"},"allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":25},"item":{"enableAudio":false,"file":"","delay":100,"volume":25}},"teleDist":30,"animLevel":false,"exAnimLevel":false,"impactVar":"a1","templates":{"tempType":"a1","tempAnim":"","tempColor":"","tempLoop":1,"customAnim":false,"customPath":""}},"core":{"sourceId":"Item.9Rqs1Gao9Wfrb6Zi"}},"_id":"0NbGpcuojYzG1tWP"}
{"name":"Manobra: Parry","type":"feat","img":"modules/GMmacros/img/Ability_Warrior_DefensiveStance.png","data":{"description":{"value":"<div>\n\t\t\t\t\n\t\t\t\t<div class=\"rd__b  rd__b--3\"><p>When another creature damages you with a melee attack, you can use your reaction and expend one superiority die to reduce the damage by the number you roll on your superiority die + your Dexterity modifier.</p><div class=\"rd__spc-inline-post\"></div></div>\n\t\t\t</div>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"reaction","cost":1,"condition":""},"duration":{"value":0,"units":""},"target":{"value":0,"width":null,"units":"","type":""},"range":{"value":0,"long":0,"units":""},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"charges","target":"Xua4YBT4XHareySe","amount":1},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"1d10+@abilities.dex.mod","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Fighter 10 (Battle Master)","recharge":{"value":0,"charged":true}},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"05k4ub2VgC3VLxAg":3},"flags":{"srd5e":{"page":"optionalfeatures.html","source":"PHB","hash":"parry_phb"},"core":{"sourceId":"Item.FlTNJhHn7heS0QO6"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"autoanimations":{"killAnim":false,"animLevel":false,"override":false,"animType":"t1","animName":"","bards":{"bardAnim":"a1","bardTarget":true,"bardTargetAnim":"a1","bardTargetColor":"a1","bardSelf":true,"marker":true,"markerColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","hmAnim":"a1","color":"n1","spellOptions":{"spellLoops":1},"uaStrikeType":"physical","dtvar":"dt1","divineSmite":{"dsEnable":false,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"a1"},"explosion":false,"exAnimLevel":false,"explodeVariant":"ev1","impactVar":"a1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":0.25},"item":{"enableAudio":false,"file":"","delay":100,"volume":0.25}},"selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"teleDist":30,"templates":{"tempType":"a1","tempAnim":"","tempColor":"","tempLoop":1,"customAnim":false,"customPath":""}},"midi-qol":{"onUseMacroName":""}},"_id":"3fKynp6CSrvkJ7Fg"}
{"name":"Sneak Attack","type":"feat","img":"systems/dnd5e/icons/skills/violet_27.jpg","data":{"description":{"value":"<p>Beginning at 1st level, you know how to strike subtly and exploit a foe's distraction. Once per turn, you can deal an extra [[/r 1d6]] damage to one creature you hit with an attack if you have advantage on the attack roll. The attack must use a finesse or a ranged weapon.</p>\n<p>You don't need advantage on the attack roll if another enemy of the target is within 5 feet of it, that enemy isn't <a href=\"https://5e.tools/conditionsdiseases.html#incapacitated_phb\">incapacitated</a>, and you don't have disadvantage on the attack roll.</p>\n<p>The amount of the extra damage increases as you gain levels in this class, as shown in the Sneak Attack column of the Rogue table.</p>\n<p> </p>\n<p>V1.0</p>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"special","cost":0,"condition":""},"duration":{"value":24,"units":"hour"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":null,"max":"","per":""},"consume":{"type":"","target":"","amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Rogue 1","recharge":{"value":null,"charged":false},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"properties":{},"attributes":{"spelldc":10}},"effects":[{"_id":"Ns5pHr7gcYPTJ7HU","flags":{"dae":{"stackable":false,"transfer":true,"specialDuration":[],"macroRepeat":"none"},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"aura":"None","radius":null,"alignment":"","type":"","save":"","savedc":null}},"changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro.Sneak Attack","priority":"30"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/violet_27.jpg","label":"Sneak Attack","origin":"Actor.DMTSWfQs8whM5FtE.OwnedItem.Phll73Y1o1t6Park","tint":null,"transfer":true,"selectedKey":"flags.dnd5e.DamageBonusMacro"}],"folder":null,"sort":0,"permission":{"default":0,"QwT9izJ4aW8QVTjo":3},"flags":{"dae":{"activeEquipped":false,"alwaysActive":false},"exportSource":{"world":"storm-kings-thunder","system":"dnd5e","coreVersion":"0.7.9","systemVersion":"1.2.3"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Sneak Attack","type":"script","author":"QwT9izJ4aW8QVTjo","img":"icons/svg/dice-target.svg","scope":"global","command":"// v1.1\nif (![\"mwak\",\"rwak\"].includes(args[0].item.data.actionType)) return {}; // weapon attack\nif (args[0].item.data.actionType === \"mwak\" && !args[0].item.data.properties?.fin) \n  return {}; // ranged or finesse\nif (args[0].hitTargets.length < 1) return {};\ntoken = canvas.tokens.get(args[0].tokenId);\nactor = token.actor;\nif (!actor || !token || args[0].hitTargets.length < 1) return {};\nconst rogueLevels = actor.getRollData().classes.rogue?.levels;\nif (!rogueLevels) {\n  MidiQOL.warn(\"Sneak Attack Damage: Trying to do sneak attack and not a rogue\");\n  return {}; // rogue only\n}\nlet target = canvas.tokens.get(args[0].hitTargets[0]._id);\nif (game.combat) {\n  let combatTime = game.combat.round + game.combat.turn /100;\n  let lastTime = getProperty(token.data.flags, \"midi-qol.sneakAttackTime\");\n  if (combatTime === lastTime) {\n   MidiQOL.warn(\"Sneak Attack Damage: Already done a sneak attack this turn\");\n   return {};\n  }\n}\nlet foundEnemy = true;\nlet isSneak = args[0].advantage;\nif (!isSneak) {\n  foundEnemy = false;\n  let nearbyEnemy = canvas.tokens.placeables.filter(t => {\n    let nearby = (t.actor &&\n         t.actor?.id !== args[0].actor._id && // not me\n         t.id !== target.id && // not the target\n         t.actor?.data.data.attributes?.hp?.value > 0 && // not incapacitated\n         t.data.disposition !== target.data.disposition && // not an ally\n         MidiQOL.getDistance(t, target, false) <= 5 // close to the target\n     );\n    foundEnemy = foundEnemy || (nearby && t.data.disposition === -target.data.disposition)\n    return nearby;\n  });\n  isSneak = nearbyEnemy.length > 0;\n}\nif (!isSneak) {\n  MidiQOL.warn(\"Sneak Attack Damage: No advantage/ally next to target\");\n  return {};\n}\nlet useSneak = getProperty(actor.data, \"flags.dae.autoSneak\");\nif (!useSneak) {\n    let dialog = new Promise((resolve, reject) => {\n      new Dialog({\n      // localize this text\n      title: \"Conditional Damage\",\n      content: `<p>Use Sneak attack?</p>`+(!foundEnemy ? \"<p>Only Nuetral creatures nearby</p>\" : \"\"),\n      buttons: {\n          one: {\n              icon: '<i class=\"fas fa-check\"></i>',\n              label: \"Confirm\",\n              callback: () => resolve(true)\n          },\n          two: {\n              icon: '<i class=\"fas fa-times\"></i>',\n              label: \"Cancel\",\n              callback: () => {resolve(false)}\n          }\n      },\n      default: \"two\"\n      }).render(true);\n    });\n    useSneak = await dialog;\n}\nif (!useSneak) return {}\nconst diceMult = args[0].isCritical ? 2: 1;\nconst baseDice = Math.ceil(rogueLevels/2);\nif (game.combat) {\n  let combatTime = game.combat.round + game.combat.turn /100;\n  let lastTime = getProperty(token.data.flags, \"midi-qol.sneakAttackTime\");\n  if (combatTime !== lastTime) {\n     await token.setFlag(\"midi-qol\", \"sneakAttackTime\", combatTime)\n  }\n}\n\n// How to check that we've already done one this turn?\ngame.macros.getName(\"Sneak_video_macro\").execute()\nreturn {damageRoll: `${baseDice * diceMult}d6`, flavor: \"Sneak Attack\"};","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"betterRolls5e":{"critRange":{"value":null},"critDamage":{"value":""},"quickDesc":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickOther":{"value":true,"altValue":true},"quickFlavor":{"value":true,"altValue":true}},"core":{"sourceId":"Item.bhuz5hzr0YsHJd1N"},"favtab":{"isFavorite":false},"autoanimations":{"killAnim":false,"override":false,"animType":"t1","animName":"","hmAnim":"a1","color":"a1","dtvar":"dt1","explosion":false,"explodeVariant":"ev1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"animLevel":false,"bards":{"bardAnim":"a1","bardTarget":true,"bardTargetAnim":"a1","bardTargetColor":"a1","bardSelf":true,"marker":true,"markerColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","rangedOptions":{"rangeDmgType":""},"spellOptions":{"spellLoops":1},"uaStrikeType":"physical","divineSmite":{"dsEnable":false,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"a1"},"exAnimLevel":false,"impactVar":"a1","allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":0.25},"item":{"enableAudio":false,"file":"","delay":100,"volume":0.25}},"teleDist":30,"templates":{"tempType":"a1","tempAnim":"","tempColor":"","tempLoop":1,"customAnim":false,"customPath":""}},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"clip":"","volume":100}}},"_id":"5Bh2dgPmY6OF4uVM"}
{"name":"Manobra: Contra-atacar","type":"feat","img":"systems/dnd5e/icons/skills/weapon_26.jpg","data":{"description":{"value":"<div>\n\t\t\t\n\t\t\t<div class=\"rd__b  rd__b--3\"><p>When a creature misses you with a melee attack, you can use your reaction and expend one superiority die to make a melee weapon attack against the creature. If you hit, you add the superiority die to the attack's damage roll.</p><div class=\"rd__spc-inline-post\"></div></div>\n\t\t</div>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"reaction","cost":1,"condition":""},"duration":{"value":0,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"charges","target":"Xua4YBT4XHareySe","amount":1},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Fighter 3 (Battle Master)","recharge":{"value":0,"charged":true},"flags":{"srd5e":{"dataType":"subclassFeature","className":"Fighter","subclassName":"Battle Master"}}},"effects":[{"_id":"RzSMNlwNOX0QXFbl","flags":{"dae":{"stackable":false,"macroRepeat":"none","specialDuration":["1Attack"],"transfer":false},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"alignment":"","type":"","aura":"None","radius":null,"save":"","savedc":null,"hostile":false,"onlyOnce":false,"time":"None"}},"changes":[{"key":"data.bonuses.mwak.damage","mode":2,"value":"1d10","priority":"20"}],"disabled":false,"duration":{"startTime":null,"turns":1},"icon":"systems/dnd5e/icons/skills/weapon_26.jpg","label":"Manobra: Contra-atacar","origin":"Actor.2aUyBxoKbmFEnom1.OwnedItem.Xf1GROWEUfxSFwuK","tint":null,"transfer":false,"selectedKey":"data.bonuses.mwak.damage"}],"folder":null,"sort":0,"permission":{"default":0,"05k4ub2VgC3VLxAg":3},"flags":{"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"mess":{"templateTexture":""},"midi-qol":{"onUseMacroName":""},"innocenti-openlock":{"enabled":false,"keylock":"","wallCoord":"","disarmTrap":10,"findTrap":10,"skillfindTrap":"prc","passive":10,"forceLock":12,"openLock":10,"toolsBreak":5},"favtab":{"isFavorite":false},"core":{"sourceId":"Item.Xf1GROWEUfxSFwuK"},"autoanimations":{"killAnim":false,"override":false,"animType":"t1","animName":"","hmAnim":"a1","color":"n1","uaStrikeType":"physical","dtvar":"dt1","explosion":false,"explodeVariant":"ev1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"bards":{"bardAnim":"a1","bardTarget":true,"bardTargetAnim":"a1","bardTargetColor":"a1","bardSelf":true,"marker":true,"markerColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","spellOptions":{"spellLoops":1},"divineSmite":{"dsEnable":false,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"a1"},"allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":25},"item":{"enableAudio":false,"file":"","delay":100,"volume":25}},"teleDist":30,"animLevel":false,"exAnimLevel":false,"impactVar":"a1","templates":{"tempType":"a1","tempAnim":"","tempColor":"","tempLoop":1,"customAnim":false,"customPath":""}}},"_id":"Cpeh5HnTE9nQDQe3"}
{"_id":"FHRLqeAelrKvxWqQ","name":"Defensive Flourish","type":"feat","img":"systems/dnd5e/icons/skills/weapon_16.jpg","data":{"description":{"value":"<div class=\"rd__b  rd__b--1\"><p>You can expend one use of your Bardic Inspiration to cause the weapon to deal extra damage to the target you hit. The damage equals the number you roll on the Bardic Inspiration die. You also add the number rolled to your AC until the start of your next turn.</p></div>","chat":"","unidentified":""},"source":"XGE","activation":{"type":"special","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":"none"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":"20","chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"flat"},"requirements":"Bard 3 (Swords)","recharge":{"value":null,"charged":false}},"effects":[{"_id":"udWHSFElMFDSxSdR","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro.Defensive Flourish","priority":"30"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/weapon_16.jpg","label":"Defensive Flourish","transfer":true,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.dnd5e.DamageBonusMacro"}],"folder":null,"sort":0,"permission":{"default":0,"rbM5nB1AbUwbj4yJ":3},"flags":{"srd5e":{"page":"classfeatures.html","source":"XGE","hash":"defensive%20flourish_bard_xge_swords_xge_3_xge"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"onUseMacroName":"","criticalThreshold":"20"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Item.GBtHJIfJjufFkUzW"},"itemacro":{"macro":{"data":{"_id":null,"name":"Defensive Flourish2","type":"script","author":"rbM5nB1AbUwbj4yJ","img":"icons/svg/dice-target.svg","scope":"global","command":"//Defensive Flourish\n// v1.0. Requires midi-qol and times-up.\n\n//hit?\nif (![\"mwak\",\"rwak\"].includes(args[0].item.data.actionType)) return {}; // weapon attack\nif (args[0].hitTargets.length < 1) return {};\ntoken = canvas.tokens.get(args[0].tokenId);\nactor = token.actor;\nif (!actor || !token || args[0].hitTargets.length < 1) return {};\nlet target = canvas.tokens.get(args[0].hitTargets[0]._id);\nif (game.combat) {\n  let combatTime = game.combat.round + game.combat.turn /100;\n  let lastTime = getProperty(token.data.flags, \"midi-qol.flourishAttackTime\");\n  if (combatTime === lastTime) {\n   MidiQOL.warn(\"Blade Flourish Damage: Already done a Blade Flourish this turn\");\n   return {};\n  }\n}\nlet foundEnemy = true;\nlet useSneak = actor.data.flags.dae?.autoSneak;\nif (!useSneak) {\nlet dialog = new Promise((resolve, reject) => {\n      new Dialog({\n      // localize this text\n      title: \"Conditional Damage\",\n      content: `<p>Use Defensive Flourish?</p>`+(!foundEnemy ? \"<p>Only Nuetral creatures nearby</p>\" : \"\"),\n      buttons: {\n          one: {\n              icon: '<i class=\"fas fa-check\"></i>',\n              label: \"Confirm\",\n              callback: () => resolve(true)\n          },\n          two: {\n              icon: '<i class=\"fas fa-times\"></i>',\n              label: \"Cancel\",\n              callback: () => {resolve(false)}\n          }\n      },\n      default: \"two\"\n      }).render(true);\n    });\n    useSneak = await dialog;\n}\n\n\n//roll\nconst level = actor.items.getName(\"Bard\").data.data.levels;\nlet bardicDice = level < 5 ? 6 : level >= 5 ? 8 : level >= 15 ? 12 : null;\nconst roll = new Roll(`1d${bardicDice}`);\nroll.toMessage({});\n\n\n// create effect\nconst effect = {\nlabel: \"Defensive Flourish\", icon: \"systems/dnd5e/icons/skills/weapon_16.jpg\", \nchanges: [{value: `${roll.terms[0].total}`, mode: CONST.ACTIVE_EFFECT_MODES.ADD, priority: 20, key:\"data.attributes.ac.value\"}],duration: {rounds: 1}, flags:{dae: {specialDuration: [\"turnStart\"]}}\n};\nif(token){\n  let effectPresent = !!token.actor.effects.find(e => e.data.label === effect.label);\n  if(effectPresent) removeEffect({ actor : token.actor, effectLabel : effect.label });\n  else addEffect({ actor : token.actor, effectData : effect });\n}\nasync function removeEffect({ actor, effectLabel }){\n  if(!actor || !effectLabel) return;\n  let effect = actor.effects.find(e => e.data.label === effectLabel);\n  if(!effect) return;\n\n  await actor.deleteEmbeddedEntity(\"ActiveEffect\", [effect.id]);\n}\nasync function addEffect({ actor, effectData }){\n  if(!actor || !effectData) return;\n  await actor.createEmbeddedEntity(\"ActiveEffect\", effectData );\n}\n\nreturn {damageRoll: `${roll.terms[0].total}`, flavor: \"Defensive Flourish\"};","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"clip":"","volume":100}}}}
{"name":"Crusher","type":"feat","img":"modules/GMmacros/img/crusher.png","data":{"description":{"value":"<div>\n\t\t\t\t\n\t\t\t\t<div class=\"rd__b  rd__b--3\"><p>You are practiced in the art of crushing your enemies, granting you the following benefits:</p><div class=\"rd__spc-inline-post\"></div><ul class=\"rd__list\"><li class=\"rd__li \">Increase your Strength or Constitution by 1, to a maximum of 20.</li><li class=\"rd__li \">Once per turn, when you hit a creature with an attack that deals bludgeoning damage, you can move it 5 feet to an unoccupied space, provided the target is no more than one size larger than you.</li><li class=\"rd__li \">When you score a critical hit that deals bludgeoning damage to a creature, attack rolls against that creature are made with advantage until the start of your next turn.</li></ul></div>\n\t\t\t</div>","chat":"","unidentified":""},"source":"TCE","activation":{"type":"","cost":0,"condition":""},"duration":{"value":0,"units":""},"target":{"value":0,"width":null,"units":"","type":""},"range":{"value":0,"long":0,"units":null},"uses":{"value":0,"max":0,"per":""},"consume":{"type":"","target":null,"amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":0,"charged":true}},"effects":[{"_id":"3oY5yGLLMA3ZS2gk","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro.Crusher","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"modules/GMmacros/img/crusher.png","label":"Crusher","transfer":true,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false},"dnd5e-helpers":{"rest-effect":"Ignore"}},"tint":null,"selectedKey":"flags.dnd5e.DamageBonusMacro"}],"folder":null,"sort":0,"permission":{"default":0,"QwT9izJ4aW8QVTjo":3},"flags":{"srd5e":{"page":"feats.html","source":"TCE","hash":"crusher_tce","propDroppable":"feat","isStandardDragDrop":true},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Crusher","type":"script","author":"QwT9izJ4aW8QVTjo","img":"icons/svg/dice-target.svg","scope":"global","command":"if (args[0].hitTargets.length === 0) return {};\nif (![\"bludgeoning\"].includes(args[0].item.data.damage.parts[0][1])) return {};\nif (game.combat) {\n  let combatTime = game.combat.round + game.combat.turn /100;\n  let lastTime = getProperty(token.data.flags, \"midi-qol.crusherAttackTime\");\n  if (combatTime === lastTime) {\n   MidiQOL.warn(\"Crusher: Already done used crusher this turn\");\n   return {};\n  }\n}\nlet target  = Array.from(game.user.targets)[0].actor;\n\nif (args[0].isCritical) {\nconst efffectData = {\nlabel: \"Crusher\", icon: \"modules/GMmacros/img/1%20Desvantagem_defender.png\", \nchanges: [\n{value: 1, mode: CONST.ACTIVE_EFFECT_MODES.OVERRIDE, priority: 20, key:\"flags.midi-qol.grants.advantage.attack.all\"}],\nduration: {rounds: 1}\n}\nawait target.createEmbeddedEntity(\"ActiveEffect\", efffectData);\nif (game.combat) {\n  let combatTime = game.combat.round + game.combat.turn /100;\n  let lastTime = getProperty(token.data.flags, \"midi-qol.crusherAttackTime\");\n  if (combatTime !== lastTime) {\n     await token.setFlag(\"midi-qol\", \"crusherAttackTime\", combatTime)\n  }\n}\n}\nreturn {}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.Zp0iEo3BYVdM8MDj"},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"clip":"","volume":100}}},"_id":"HF68OzFHbBUWEVuh"}
{"name":"Manobra: Trip Attack","type":"feat","img":"modules/GMmacros/img/Ability_Warrior_IntensifyRage.png","data":{"description":{"value":"<div>\n\t\t\t\t\n\t\t\t\t<div class=\"rd__b  rd__b--3\"><p>When you hit a creature with a weapon attack, you can expend one superiority die to attempt to knock the target down. You add the superiority die to the attack's damage roll, and if the target is Large or smaller, it must make a Strength saving throw. On a failed save, you knock the target <a href=\"https://5e.tools/conditionsdiseases.html#prone_phb\" data-plut-hover=\"{&quot;page&quot;:&quot;conditionsdiseases.html&quot;,&quot;source&quot;:&quot;PHB&quot;,&quot;hash&quot;:&quot;prone_phb&quot;}\">prone</a>.</p><div class=\"rd__spc-inline-post\"></div></div>\n\t\t\t</div>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":0,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"SE ACERTAR, FAZER UM DC FORÇA ou PRONE","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"str"},"requirements":"Fighter 10 (Battle Master)","recharge":{"value":0,"charged":true}},"effects":[{"_id":"kM9McvjwBH1BSgg5","changes":[{"key":"data.bonuses.mwak.damage","mode":2,"value":"+1d10","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"modules/GMmacros/img/Ability_Warrior_IntensifyRage.png","label":"Manobra: Trip Attack","transfer":false,"flags":{"dae":{"stackable":false,"macroRepeat":"none","specialDuration":["1Attack"],"transfer":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"data.bonuses.mwak.damage"}],"folder":null,"sort":0,"permission":{"default":0,"05k4ub2VgC3VLxAg":3},"flags":{"srd5e":{"page":"optionalfeatures.html","source":"PHB","hash":"trip%20attack_phb"},"core":{"sourceId":"Item.aOCaNEHqNuZo2e1W"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"autoanimations":{"killAnim":false,"animLevel":false,"override":false,"animType":"t1","animName":"","bards":{"bardAnim":"a1","bardTarget":true,"bardTargetAnim":"a1","bardTargetColor":"a1","bardSelf":true,"marker":true,"markerColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","hmAnim":"a1","color":"n1","spellOptions":{"spellLoops":1},"uaStrikeType":"physical","dtvar":"dt1","divineSmite":{"dsEnable":false,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"a1"},"explosion":false,"exAnimLevel":false,"explodeVariant":"ev1","impactVar":"a1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":0.25},"item":{"enableAudio":false,"file":"","delay":100,"volume":0.25}},"selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"teleDist":30,"templates":{"tempType":"a1","tempAnim":"","tempColor":"","tempLoop":1,"customAnim":false,"customPath":""}},"midi-qol":{"onUseMacroName":""}},"_id":"LfhzCrAI1dI0Ej9y"}
{"_id":"NDD61sD2FDraYs4e","name":"Savage Attacks","type":"feat","img":"systems/dnd5e/icons/skills/weapon_27.jpg","data":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>When you score a critical hit with a melee weapon attack, you can roll one of the weapon's damage dice one additional time and add it to the extra damage of the critical hit.</p><div class=\"rd__spc-inline-post\"></div></div>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":"0","per":null},"consume":{"type":null,"target":null,"amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"flat"},"requirements":"","recharge":{"value":null,"charged":false}},"effects":[{"_id":"6SowZCEDEO8yAs7y","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro.Savage Attacks","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/weapon_27.jpg","label":"Savage Attacks","transfer":true,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.dnd5e.DamageBonusMacro"}],"folder":null,"sort":0,"permission":{"default":0,"rbM5nB1AbUwbj4yJ":3},"flags":{"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"onUseMacroName":""},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Item.P9P4PiQGyS4nGBvf"},"itemacro":{"macro":{"data":{"_id":null,"name":"Savage Attacks","type":"script","author":"rbM5nB1AbUwbj4yJ","img":"icons/svg/dice-target.svg","scope":"global","command":"// tem que mudar o dado do dano no dedo ainda. ta d8 aki\nif (![\"mwak\"].includes(args[0].item.data.actionType)) return {}; // weapon attack\nif (args[0].hitTargets.length < 1) return {};\ntoken = canvas.tokens.get(args[0].tokenId);\nactor = token.actor;\nif (!actor || !token || args[0].hitTargets.length < 1) return {};\nconst diceMult = args[0].isCritical ? 2: 1;\nif (diceMult == 1) return {}\nelse {\nreturn {damageRoll: `1d8[bludgeoning]`, flavor: \"Savage Attack\"}}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"clip":"","volume":100}}}}
{"name":"Piercer","type":"feat","img":"modules/GMmacros/img/Spear_pierc.png","data":{"description":{"value":"<div>\n\t\t\t\t\n\t\t\t\t<div class=\"rd__b  rd__b--3\"><p>You have achieved a penetrating precision in combat, granting you the following benefits:</p><div class=\"rd__spc-inline-post\"></div><ul class=\"rd__list\"><li class=\"rd__li \">Increase your Strength or Dexterity by 1, to a maximum of 20.</li><li class=\"rd__li \">Once per turn, when you hit a creature with an attack that deals piercing damage, you can reroll one of the attack's damage dice, and you must use the new roll.</li><li class=\"rd__li \">When you score a critical hit that deals piercing damage to a creature, you can roll one additional damage die when determining the extra piercing damage the target takes.</li></ul></div>\n\t\t\t</div>","chat":"","unidentified":""},"source":"TCE","activation":{"type":"","cost":0,"condition":""},"duration":{"value":0,"units":""},"target":{"value":0,"width":null,"units":"","type":""},"range":{"value":0,"long":0,"units":null},"uses":{"value":0,"max":0,"per":""},"consume":{"type":"","target":null,"amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":0,"charged":true}},"effects":[{"_id":"NxmtQmOXKW9HvWnt","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro.Piercer","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"modules/GMmacros/img/Spear_pierc.png","label":"Piercer","transfer":true,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":true},"dnd5e-helpers":{"rest-effect":"Ignore"},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.dnd5e.DamageBonusMacro"}],"folder":null,"sort":0,"permission":{"default":0,"QwT9izJ4aW8QVTjo":3},"flags":{"srd5e":{"page":"feats.html","source":"TCE","hash":"piercer_tce"},"core":{"sourceId":"Item.TTEseFoyoaq57zZq"},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"clip":"","volume":100}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Piercer","type":"script","author":"QwT9izJ4aW8QVTjo","img":"icons/svg/dice-target.svg","scope":"global","command":"if (args[0].hitTargets.length === 0) return {};\nlet target = canvas.tokens.get(args[0].hitTargets[0]?._id)\nif (![\"piercing\"].includes(args[0].item.data.damage.parts[0][1])) return {};\nif(!target) return;\nif (args[0].isCritical) {\n    let damageRoll = new Roll(\"1d6\").roll()\n    new MidiQOL.DamageOnlyWorkflow(actor, token, damageRoll.total, \"piercing\", [target], damageRoll, {flavor: \"Piercer - bonus critical damage\", itemCardId: args[0].itemCardId})\n}\nlet roll = args[0].damageRoll;\nlet dieSize = roll.terms[0].faces;\nlet lowDice = Math.min(... roll.terms[0].values)\nconst content = `Reroll damage? \\n Previous lowest dice result: ${lowDice} on 1d${dieSize}`\nlet d = new Dialog({\n    title: \"Piercer Reroll\",\n    content: content,\n    buttons: {\n        one: {\n            icon:'<i class=\"fas fa-dice\"></i>',\n            label: \"Reroll\",\n            callback: () =>{\n                let damageRoll = new Roll(`1d${dieSize} - ${lowDice}`).roll()\n                new MidiQOL.DamageOnlyWorkflow(actor, token, damageRoll.total, \"piercing\", [target], damageRoll, {flavor: \"Piercer - reroll damage adjustment\", itemCardId: args[0].itemCardId})\n            }\n        }\n    }\n})\nd.render(true)","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}}},"_id":"NIsuq7rBKk3TIy0n"}
{"name":"Manobra: Ataque de Finta","type":"feat","img":"systems/dnd5e/icons/skills/arrow_17.jpg","data":{"description":{"value":"<div>\n\t\t\t\n\t\t\t<div class=\"rd__b  rd__b--3\"><p>You can expend one superiority die and use a bonus action on your turn to feint, choosing one creature within 5 feet of you as your target. You have advantage on your next attack roll this turn against that creature. If that attack hits, add the superiority die to the attack's damage roll.</p><div class=\"rd__spc-inline-post\"></div><p>The advantage is lost if not used on the turn you gain it.</p></div>\n\t\t</div>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":0,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"charges","target":"Xua4YBT4XHareySe","amount":1},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Fighter 3 (Battle Master)","recharge":{"value":0,"charged":true},"flags":{"srd5e":{"dataType":"subclassFeature","className":"Fighter","subclassName":"Battle Master"}}},"effects":[{"_id":"GEz5P9i5IYrFKitc","flags":{"dae":{"stackable":false,"macroRepeat":"none","specialDuration":["1Attack"],"transfer":false},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"alignment":"","type":"","aura":"None","radius":null,"save":"","savedc":null,"hostile":false,"onlyOnce":false,"time":"None"}},"changes":[{"key":"flags.midi-qol.advantage.attack.mwak","mode":2,"value":"1","priority":"20"},{"key":"data.bonuses.mwak.damage","mode":2,"value":"1d10","priority":"20"}],"disabled":false,"duration":{"startTime":null,"turns":1},"icon":"systems/dnd5e/icons/skills/arrow_17.jpg","label":"Manobra: Ataque de Finta","origin":"Actor.2aUyBxoKbmFEnom1.OwnedItem.A8Dk5kodDAgq4xP9","tint":null,"transfer":false,"selectedKey":["data.abilities.cha.dc","data.bonuses.mwak.damage"]}],"folder":null,"sort":0,"permission":{"default":0,"05k4ub2VgC3VLxAg":3},"flags":{"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"mess":{"templateTexture":""},"midi-qol":{"onUseMacroName":""},"innocenti-openlock":{"enabled":false,"keylock":"","wallCoord":"","disarmTrap":10,"findTrap":10,"skillfindTrap":"prc","passive":10,"forceLock":12,"openLock":10,"toolsBreak":5},"favtab":{"isFavorite":false},"core":{"sourceId":"Item.A8Dk5kodDAgq4xP9"},"autoanimations":{"killAnim":false,"override":false,"animType":"t1","animName":"","color":"n1","dtvar":"dt1","explosion":false,"explodeVariant":"ev1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","hmAnim":"a1","selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"bards":{"bardAnim":"a1","bardTarget":true,"bardTargetAnim":"a1","bardTargetColor":"a1","bardSelf":true,"marker":true,"markerColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","spellOptions":{"spellLoops":1},"uaStrikeType":"physical","divineSmite":{"dsEnable":false,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"a1"},"allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":25},"item":{"enableAudio":false,"file":"","delay":100,"volume":25}},"teleDist":30,"animLevel":false,"exAnimLevel":false,"impactVar":"a1","templates":{"tempType":"a1","tempAnim":"","tempColor":"","tempLoop":1,"customAnim":false,"customPath":""}}},"_id":"NkcDuVTSD0cvpPrC"}
{"_id":"PxVvrCaS6nNqQP32","name":"Defensive Duelist","type":"feat","img":"modules/plutonium/media/icon/feat/phb-defensive-duelist.webp","data":{"description":{"value":"<div>\n\t\t\t\t<p><i>Prerequisite: Prerequisite: Dexterity 13 or higher</i></p>\n\t\t\t\t<div class=\"rd__b  rd__b--3\"><p>When you are wielding a finesse weapon with which you are proficient and another creature hits you with a melee attack, you can use your reaction to add your proficiency bonus to your AC for that attack, potentially causing the attack to miss you.</p><div class=\"rd__spc-inline-post\"></div></div>\n\t\t\t</div>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"reaction","cost":1,"condition":""},"duration":{"value":0,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Dexterity 13 or higher","recharge":{"value":0,"charged":true}},"effects":[{"_id":"Yfdhxr0RlIevApNR","changes":[{"key":"data.attributes.ac.value","mode":2,"value":"@attributes.prof","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"modules/plutonium/media/icon/feat/phb-defensive-duelist.webp","label":"Defensive Duelist","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":["isAttacked"],"transfer":false},"dnd5e-helpers":{"rest-effect":"Ignore"},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"data.attributes.ac.value"}],"folder":null,"sort":0,"permission":{"default":0,"rbM5nB1AbUwbj4yJ":3},"flags":{"srd5e":{"page":"feats.html","source":"PHB","hash":"defensive%20duelist_phb"},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"clip":"","volume":100}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Item.hAfqQJzdW4Zp2rzR"}}}
{"_id":"fXA3IUwbqrFG5HVl","name":"Reckless Attack","type":"feat","img":"systems/dnd5e/icons/skills/weapon_34.jpg","data":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>Starting at 2nd level, you can throw aside all concern for defense to attack with fierce desperation. When you make your first attack on your turn, you can decide to attack recklessly. Doing so gives you advantage on melee weapon attack rolls using Strength during this turn, but attack rolls against you have advantage until your next turn.</p><div class=\"rd__spc-inline-post\"></div></div>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"none","cost":0,"condition":""},"duration":{"value":1,"units":"round"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"0","per":"","type":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Barbarian 2","recharge":{"value":null,"charged":false},"flags":{"srd5e":{"dataType":"classFeature","className":"Barbarian"}}},"effects":[{"_id":"Asih2rmcRkbIFgYm","flags":{"dae":{"stackable":false,"specialDuration":["turnEnd"],"macroRepeat":"none","transfer":false},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"alignment":"","type":"","aura":"None","radius":null,"save":"","savedc":null,"hostile":false,"onlyOnce":false,"time":"None"}},"changes":[{"key":"flags.midi-qol.advantage.attack.mwak","value":"1","mode":5,"priority":20}],"disabled":false,"duration":{"startTime":null,"turns":1},"icon":"systems/dnd5e/icons/skills/weapon_34.jpg","label":"Reckless Attack","origin":"Actor.LswToQPSWxkCVKbW.Item.SOBVU6YnPDeu8YPb","tint":null,"transfer":false},{"_id":"awAUhOn1SzQCcgz7","flags":{"dae":{"stackable":false,"specialDuration":["turnStart"],"macroRepeat":"none","transfer":false},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"alignment":"","type":"","aura":"None","radius":null,"save":"","savedc":null}},"changes":[{"key":"flags.midi-qol.grants.advantage.attack.all","value":"1","mode":0,"priority":20}],"disabled":false,"duration":{"startTime":null,"rounds":1},"icon":"systems/dnd5e/icons/skills/weapon_34.jpg","label":"Reckless Attack","origin":"Actor.LswToQPSWxkCVKbW.Item.SOBVU6YnPDeu8YPb","tint":null,"transfer":false}],"folder":null,"sort":0,"permission":{"default":0,"05k4ub2VgC3VLxAg":3},"flags":{"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"innocenti-openlock":{"enabled":false,"keylock":"","wallCoord":"","disarmTrap":10,"findTrap":10,"skillfindTrap":"prc","passive":10,"forceLock":12,"openLock":10,"toolsBreak":5},"favtab":{"isFavorite":false},"mess":{"templateTexture":""},"exportSource":{"world":"backup","system":"dnd5e","coreVersion":"0.7.9","systemVersion":"1.2.4"},"autoanimations":{"killAnim":false,"override":false,"animType":"t1","animName":"","hmAnim":"a1","color":"n1","uaStrikeType":"physical","dtvar":"dt1","explosion":false,"explodeVariant":"ev1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"bards":{"bardAnim":"a1","bardTarget":true,"bardTargetAnim":"a1","bardTargetColor":"a1","bardSelf":true,"marker":true,"markerColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","spellOptions":{"spellLoops":1},"divineSmite":{"dsEnable":false,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"a1"},"allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":0.25},"item":{"enableAudio":false,"file":"","delay":100,"volume":0.25}},"teleDist":30,"templates":{"tempType":"a1","tempAnim":"","tempColor":"","tempLoop":1,"customAnim":false,"customPath":""},"animLevel":false,"exAnimLevel":false,"impactVar":"a1"},"core":{"sourceId":"Item.SOBVU6YnPDeu8YPb"}}}
{"name":"Tough","type":"feat","img":"modules/plutonium/media/icon/feat/phb-tough.webp","data":{"description":{"value":"<div>\n\t\t\t\t\n\t\t\t\t<div class=\"rd__b  rd__b--3\"><p>Your hit point maximum increases by an amount equal to twice your level when you gain this feat. Whenever you gain a level thereafter, your hit point maximum increases by an additional 2 hit points.</p><div class=\"rd__spc-inline-post\"></div></div>\n\t\t\t</div>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"","cost":0,"condition":""},"duration":{"value":0,"units":""},"target":{"value":0,"width":null,"units":"","type":""},"range":{"value":0,"long":0,"units":null},"uses":{"value":0,"max":0,"per":""},"consume":{"type":"","target":null,"amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":0,"charged":true}},"effects":[{"_id":"dHpWbiIZQkyzSVRh","changes":[{"key":"data.attributes.hp.max","mode":2,"value":"@details.level*2","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"modules/plutonium/media/icon/feat/phb-tough.webp","label":"Tough","transfer":true,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":true},"dnd5e-helpers":{"rest-effect":"Ignore"},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"data.attributes.hp.max"}],"folder":null,"sort":0,"permission":{"default":0,"rbM5nB1AbUwbj4yJ":3},"flags":{"srd5e":{"page":"feats.html","source":"PHB","hash":"tough_phb"},"core":{"sourceId":"Item.UEankt4zuh3x9q2g"},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"clip":"","volume":100}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"}},"_id":"lINjzvvdJj0AFDGQ"}
{"name":"Legendary Resistance","type":"feat","img":"systems/dnd5e/icons/skills/weapon_18.jpg","data":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>If the dragon fails a saving throw, it can choose to succeed instead.</p><div class=\"rd__spc-inline-post\"></div></div>","chat":"","unidentified":""},"source":"MM","activation":{"type":"none","cost":0,"condition":"If the dragon fails a saving throw, it can choose to succeed instead."},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":3,"max":"3","per":"day"},"consume":{"type":"attribute","target":"","amount":1},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"flat"},"requirements":"","recharge":{"value":null,"charged":false}},"effects":[{"_id":"FniO7deC5cNc9vuy","changes":[{"key":"flags.midi-qol.optional.LegRes.save","mode":5,"value":"success","priority":"20"},{"key":"flags.midi-qol.optional.LegRes.count","mode":5,"value":"@resources.legres.value","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/weapon_18.jpg","label":"Legendary Resistance","origin":"Item.rO1EWt1SPvUJg7k3","transfer":true,"flags":{"dae":{"stackable":false,"macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["data.abilities.cha.dc","data.abilities.cha.dc"]}],"folder":null,"sort":0,"permission":{"default":0,"rbM5nB1AbUwbj4yJ":3},"flags":{"betterRolls5e":{"critRange":{"type":"String","value":""},"critDamage":{"type":"String","value":""},"quickDesc":{"type":"Boolean","value":true,"altValue":true},"quickAttack":{"type":"Boolean","value":true,"altValue":true},"quickSave":{"type":"Boolean","value":true,"altValue":true},"quickDamage":{"type":"Array","value":[],"altValue":[],"context":[]},"quickProperties":{"type":"Boolean","value":true,"altValue":true},"quickCharges":{"type":"Boolean","value":{"use":true,"resource":true,"charge":false},"altValue":{"use":true,"resource":true,"charge":false}},"quickTemplate":{"type":"Boolean","value":true,"altValue":true},"quickOther":{"type":"Boolean","value":true,"altValue":true,"context":""},"quickFlavor":{"type":"Boolean","value":true,"altValue":true},"quickPrompt":{"type":"Boolean","value":false,"altValue":false}},"midi-qol":{"onUseMacroName":""},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Item.rO1EWt1SPvUJg7k3"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}}},"_id":"mOXc9oaxyT5ikS7Y"}
{"_id":"pkcWXwxgirR9leT3","name":"Colossus Slayer","type":"feat","img":"systems/dnd5e/icons/skills/yellow_14.jpg","data":{"description":{"value":"<p>Your tenacity can wear down the most potent foes. When you hit a creature with a weapon attack, the creature takes an extra 1d8 damage if it's below its hit point maximum. You can deal this extra damage only once per turn.</p>","chat":"","unidentified":""},"source":"PHB pg. 93","activation":{"type":"special","cost":null,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":null,"max":"","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Hunter 3","recharge":{"value":null,"charged":false}},"effects":[{"_id":"Rflatnn1S6DNIZpF","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro.Colossus Slayer","priority":"30"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/yellow_14.jpg","label":"Colossus Slayer","transfer":true,"flags":{"dae":{"stackable":false,"macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.dnd5e.DamageBonusMacro"}],"folder":null,"sort":0,"permission":{"default":0,"05k4ub2VgC3VLxAg":3},"flags":{"core":{"sourceId":"Compendium.dnd5e.classfeatures.5gx1O0sxK08awEO9"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"onUseMacroName":"ItemMacro"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"autoanimations":{"killAnim":false,"animLevel":false,"override":false,"animType":"t1","animName":"","bards":{"bardAnim":"a1","bardTarget":true,"bardTargetAnim":"a1","bardTargetColor":"a1","bardSelf":true,"marker":true,"markerColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","hmAnim":"a1","rangedOptions":{"rangeDmgType":""},"color":"n1","spellOptions":{"spellLoops":1},"uaStrikeType":"physical","dtvar":"dt1","divineSmite":{"dsEnable":false,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"a1"},"explosion":false,"exAnimLevel":false,"explodeVariant":"ev1","impactVar":"a1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":0.25},"item":{"enableAudio":false,"file":"","delay":100,"volume":0.25}},"selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"teleDist":30,"templates":{"tempType":"a1","tempAnim":"","tempColor":"","tempLoop":1,"customAnim":false,"customPath":""}},"itemacro":{"macro":{"data":{"_id":null,"name":"Colossus Slayer","type":"script","author":"05k4ub2VgC3VLxAg","img":"icons/svg/dice-target.svg","scope":"global","command":"// v1.0\nif (![\"mwak\",\"rwak\"].includes(args[0].item.data.actionType)) return {}; // weapon attack\nif (args[0].hitTargets.length < 1) return {};\ntoken = canvas.tokens.get(args[0].tokenId);\nactor = token.actor;\nif (!actor || !token || args[0].hitTargets.length < 1) return {};\nconst rangerLevels = actor.getRollData().classes.ranger?.levels;\nif (!rangerLevels) {\n  MidiQOL.warn(\"Colossus Slayer Damage: Trying to do colossus attack and not a ranger\");\n  return {}; // ranger only\n}\nlet target = canvas.tokens.get(args[0].hitTargets[0]._id);\nif (game.combat) {\n  let combatTime = game.combat.round + game.combat.turn /100;\n  let lastTime = getProperty(token.data.flags, \"midi-qol.colossusAttackTime\");\n  if (combatTime === lastTime) {\n   MidiQOL.warn(\"Colossus Slayer Damage: Already done a colossus attack this turn\");\n   return {};\n  }\n}\nlet foundEnemy = true;\nlet isSneak = target.actor.data.data.attributes.hp.max != target.actor.data.data.attributes.hp.value;\nif (!isSneak) {\n  MidiQOL.warn(\"Colossus Slayer Damage: target not below its hit point maximum\");\n  return {};\n}\nlet useSneak = actor.data.flags.dae?.autoSneak;\nif (!useSneak) {\n    let dialog = new Promise((resolve, reject) => {\n      new Dialog({\n      // localize this text\n      title: \"Conditional Damage\",\n      content: `<p>Use Colossus Slayer?</p>`+(!foundEnemy ? \"<p>Only Nuetral creatures nearby</p>\" : \"\"),\n      buttons: {\n          one: {\n              icon: '<i class=\"fas fa-check\"></i>',\n              label: \"Confirm\",\n              callback: () => resolve(true)\n          },\n          two: {\n              icon: '<i class=\"fas fa-times\"></i>',\n              label: \"Cancel\",\n              callback: () => {resolve(false)}\n          }\n      },\n      default: \"two\"\n      }).render(true);\n    });\n    useSneak = await dialog;\n}\nif (!useSneak) return {}\nconst diceMult = args[0].isCritical ? 2: 1;\nif (game.combat) {\n  let combatTime = game.combat.round + game.combat.turn /100;\n  let lastTime = getProperty(token.data.flags, \"midi-qol.colossusAttackTime\");\n  if (combatTime !== lastTime) {\n     setProperty(token.data.flags, \"midi-qol.colossusAttackTime\", combatTime)\n  }\n}\n\n// How to check that we've already done one this turn?\nreturn {damageRoll: `${diceMult}d8`, flavor: \"Colossus Slayer\"};","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"exportSource":{"world":"test","system":"dnd5e","coreVersion":"0.8.8","systemVersion":"1.3.3"},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"clip":"","volume":100}}}}
{"name":"Sharpshooter","type":"feat","img":"modules/plutonium/media/icon/feat/phb-sharpshooter.webp","data":{"description":{"value":"<p>+10 Dano / -5 Atk</p>\n<p>Meia cobertura e 3/4 são ignoradas.</p>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"special","cost":1,"condition":""},"duration":{"value":0,"units":""},"target":{"value":0,"width":null,"units":"","type":""},"range":{"value":0,"long":0,"units":""},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":0,"charged":true}},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"rbM5nB1AbUwbj4yJ":3},"flags":{"srd5e":{"page":"feats.html","source":"PHB","hash":"sharpshooter_phb"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"midi-qol":{"onUseMacroName":"ItemMacro"},"itemacro":{"macro":{"data":{"_id":null,"name":"Sharpshooter","type":"script","author":"rbM5nB1AbUwbj4yJ","img":"icons/svg/dice-target.svg","scope":"global","command":"//#####################################\n// READ THIS\n// Requires Midi-QoL on use\n\n//####################################\nlet sharpshooter = async function () {\n    const target = canvas.tokens.get(args[0].tokenId).actor;\n    const itemD = args[0].item;\n    const gameRound = game.combat ? game.combat.round : 0;\n    let chatMessage = \"\";\n    let the_message = \"\";\n    if (target.effects.find(ef => ef.data.label === itemD.name)) {\n        let effect_id = await target.effects.find(ef => ef.data.label === itemD.name).id;\n        await target.deleteEmbeddedDocuments(\"ActiveEffect\", [effect_id]);\n        the_message = `<em><span style=\"color: red\"><strong>Sharpshooter desligado</strong></span></em>`;\n        chatMessage = game.messages.get(args[0].itemCardId);\n    } else {\n        let effectData = [{\n            label: itemD.name,\n            icon: itemD.img,\n            duration: { rounds: 10, startRound: gameRound, startTime: game.time.worldTime },\n            origin: args[0].uuid,\n            changes: [{\n                \"key\": \"data.bonuses.rwak.damage\",\n                \"mode\": 2,\n                \"value\": \"+10\",\n                \"priority\": 20\n            }, {\n                \"key\": \"data.bonuses.rwak.attack\",\n                \"mode\": 2,\n                \"value\": \"-5\",\n                \"priority\": 20\n            }]\n        }];\n        await target.createEmbeddedDocuments(\"ActiveEffect\", effectData);\n        the_message = `<em><span style=\"color: green\"><strong>Sharpshooter Desligado</strong></span></em>`;\n        chatMessage = game.messages.get(args[0].itemCardId);\n    }\n    let content = await duplicate(chatMessage.data.content);\n    let searchString = /<div class=\"midi-qol-saves-display\">[\\s\\S]*<div class=\"end-midi-qol-saves-display\">/g;\n    let replaceString = `<div class=\"midi-qol-saves-display\"><div class=\"end-midi-qol-saves-display\">${the_message}`;\n    content = content.replace(searchString, replaceString);\n    await chatMessage.update({ content: content });\n};\nsharpshooter();","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.zaChWJQFyrvyRkZH"}},"_id":"qj3CM2HsiK0A4Uqo"}
{"name":"Steady Aim","type":"feat","img":"modules/GMmacros/img/Ability_SteadyAim.png","data":{"description":{"value":"<div class=\"rd__b  rd__b--1\"><p><i>3rd-level rogue <a href=\"https://5e.tools/variantrules.html#optional%20class%20features_tce\" data-plut-hover=\"{&quot;page&quot;:&quot;variantrules.html&quot;,&quot;source&quot;:&quot;tce&quot;,&quot;hash&quot;:&quot;optional%20class%20features_tce&quot;}\">optional feature</a></i></p><p>As a bonus action, you give yourself advantage on your next attack roll on the current turn. You can use this bonus action only if you haven't moved during this turn, and after you use the bonus action, your speed is 0 until the end of the current turn.</p></div>","chat":"","unidentified":""},"source":"TCE","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"flat"},"requirements":"Rogue 3","recharge":{"value":null,"charged":false}},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"QwT9izJ4aW8QVTjo":3},"flags":{"srd5e":{"page":"classfeatures.html","source":"TCE","hash":"steady%20aim_rogue_phb_3_tce"},"midi-qol":{"onUseMacroName":"ItemMacro"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"autoanimations":{"killAnim":false,"animLevel":false,"override":false,"animType":"t1","animName":"","bards":{"bardAnim":"a1","bardTarget":true,"bardTargetAnim":"a1","bardTargetColor":"a1","bardSelf":true,"marker":true,"markerColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","hmAnim":"a1","color":"n1","spellOptions":{"spellLoops":1},"uaStrikeType":"physical","dtvar":"dt1","divineSmite":{"dsEnable":false,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"a1"},"explosion":false,"exAnimLevel":false,"explodeVariant":"ev1","impactVar":"a1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":0.25},"item":{"enableAudio":false,"file":"","delay":100,"volume":0.25}},"selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"teleDist":30,"templates":{"tempType":"a1","tempAnim":"","tempColor":"","tempLoop":1,"customAnim":false,"customPath":""}},"spellTemplateManager":{},"siftoolkit":{"SIFData":{"alpha":50,"coneOrigin":1,"ignoreDuration":false,"loopAnimations":true,"texture":"","useTexture":false}},"core":{"sourceId":"Item.TK1Lr3IewQGYMLyC"},"itemacro":{"macro":{"data":{"_id":null,"name":"Steady Aim","type":"script","author":"QwT9izJ4aW8QVTjo","img":"icons/svg/dice-target.svg","scope":"global","command":"const a = canvas.tokens.controlled[0]?.actor || game.user.character;\nconst img = \"modules/GMmacros/img/Ability_SteadyAim.png\";\n\nconst effectData = {\n\tlabel: \"Steady Aim\", icon: img, \n\tchanges: [{value: 1, mode: CONST.ACTIVE_EFFECT_MODES.OVERRIDE, priority: 20, key:\"flags.midi-qol.advantage.attack.rwak\"}], duration: {turns:1}, flags:{dae: {specialDuration: [\"1Attack:rwak\"]}}\n};\n\nawait a.createEmbeddedDocuments(\"ActiveEffect\", [effectData]);","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}}},"_id":"tkNTOMSY00oPMAnJ"}
{"name":"Slasher","type":"feat","img":"markers/slash.png","data":{"description":{"value":"<div>\n\t\t\t\n\t\t\t<div class=\"rd__b  rd__b--3\"><p>You've learned where to cut to have the greatest results, granting you the following benefits:</p><div class=\"rd__spc-inline-post\"></div><ul class=\"rd__list\"><li class=\"rd__li \">Increase your Strength or Dexterity by 1, to a maximum of 20.</li><li class=\"rd__li \">Once per turn when you hit a creature with an attack that deals slashing damage, you can reduce the speed of the target by 10 feet until the start of your next turn.</li><li class=\"rd__li \">When you score a critical hit that deals slashing damage to a creature, you grievously wound it. Until the start of your next turn, the target has disadvantage on all attack rolls.</li></ul></div>\n\t\t</div>","chat":"","unidentified":""},"source":"TCE","activation":{"type":"","cost":0,"condition":""},"duration":{"value":0,"units":""},"target":{"value":0,"width":null,"units":"","type":""},"range":{"value":0,"long":0,"units":null},"uses":{"value":0,"max":0,"per":""},"consume":{"type":"","target":null,"amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":0,"charged":true}},"effects":[{"_id":"Y56NKNgacXQZrqPi","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro.Slasher","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"markers/slash.png","label":"Slasher","transfer":true,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false},"dnd5e-helpers":{"rest-effect":"Ignore"}},"tint":null,"selectedKey":"macro.itemMacro"}],"folder":null,"sort":0,"permission":{"default":0,"QwT9izJ4aW8QVTjo":3},"flags":{"srd5e":{"page":"feats.html","source":"TCE","hash":"slasher_tce"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"autoanimations":{"killAnim":false,"override":false,"animType":"t1","animName":"","bards":{"bardAnim":"a1","bardTarget":true,"bardTargetAnim":"a1","bardTargetColor":"a1","bardSelf":true,"marker":true,"markerColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","hmAnim":"a1","color":"n1","spellOptions":{"spellLoops":1},"uaStrikeType":"physical","dtvar":"dt1","divineSmite":{"dsEnable":false,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"a1"},"explosion":false,"explodeVariant":"ev1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":0.25},"item":{"enableAudio":false,"file":"","delay":100,"volume":0.25}},"selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"teleDist":30,"templates":{"tempType":"a1","tempAnim":"","tempColor":"","tempLoop":1,"customAnim":false,"customPath":""},"animLevel":false,"exAnimLevel":false,"impactVar":"a1","rangedOptions":{"rangeDmgType":""}},"core":{"sourceId":"Item.1e6H5rXvpVjQ4wWK"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"itemacro":{"macro":{"data":{"_id":null,"name":"Slasher","type":"script","author":"QwT9izJ4aW8QVTjo","img":"icons/svg/dice-target.svg","scope":"global","command":"if (args[0].hitTargets.length === 0) return {};\nif (game.combat) {\n  let combatTime = game.combat.round + game.combat.turn /100;\n  let lastTime = getProperty(token.data.flags, \"midi-qol.slashAttackTime\");\n  if (combatTime === lastTime) {\n   MidiQOL.warn(\"Slasher: Already done used slasher this turn\");\n   return {};\n  }\n}\nif (![\"slashing\"].includes(args[0].item.data.damage.parts[0][1])) return {};\nlet target  = Array.from(game.user.targets)[0].actor;\n\n\nif (args[0].isCritical) {\nconst effectData = {\nlabel: \"Slasher\", icon: \"modules/GMmacros/img/slash.png\", \nchanges: [\n{value: -10, mode: CONST.ACTIVE_EFFECT_MODES.ADD, priority: 20, key:\"data.attributes.movement.walk\"},\n{value: -10, mode: CONST.ACTIVE_EFFECT_MODES.ADD, priority: 20, key:\"data.attributes.movement.swim\"},\n{value: -10, mode: CONST.ACTIVE_EFFECT_MODES.ADD, priority: 20, key:\"data.attributes.movement.fly\"},\n{value: -10, mode: CONST.ACTIVE_EFFECT_MODES.ADD, priority: 20, key:\"data.attributes.movement.burrow\"},\n{value: -10, mode: CONST.ACTIVE_EFFECT_MODES.ADD, priority: 20, key:\"data.attributes.movement.climb\"},\n], duration: {rounds: 1}\n}\nawait target.createEmbeddedEntity(\"ActiveEffect\", effectData);\nconst efffectData = {\nlabel: \"Slasher\", icon: \"modules/GMmacros/img/1%20Desvantagem_defender.png\", \nchanges: [\n{value: 1, mode: CONST.ACTIVE_EFFECT_MODES.OVERRIDE, priority: 20, key:\"flags.midi-qol.disadvantage.attack.all\"}\n], duration: {rounds: 1}\n}\nawait target.createEmbeddedEntity(\"ActiveEffect\", efffectData);\nif (game.combat) {\n  let combatTime = game.combat.round + game.combat.turn /100;\n  let lastTime = getProperty(token.data.flags, \"midi-qol.slashAttackTime\");\n  if (combatTime !== lastTime) {\n     await token.setFlag(\"midi-qol\", \"slashAttackTime\", combatTime)\n  }\n}\n} else {\nconst effectData = {\nlabel: \"Slasher\", icon: \"modules/GMmacros/img/slash.png\", \nchanges: [\n{value: -10, mode: CONST.ACTIVE_EFFECT_MODES.ADD, priority: 20, key:\"data.attributes.movement.walk\"},\n{value: -10, mode: CONST.ACTIVE_EFFECT_MODES.ADD, priority: 20, key:\"data.attributes.movement.swim\"},\n{value: -10, mode: CONST.ACTIVE_EFFECT_MODES.ADD, priority: 20, key:\"data.attributes.movement.fly\"},\n{value: -10, mode: CONST.ACTIVE_EFFECT_MODES.ADD, priority: 20, key:\"data.attributes.movement.burrow\"},\n{value: -10, mode: CONST.ACTIVE_EFFECT_MODES.ADD, priority: 20, key:\"data.attributes.movement.climb\"},\n], \nduration: {rounds: 1}\n}\nawait target.createEmbeddedEntity(\"ActiveEffect\", effectData);\nif (game.combat) {\n  let combatTime = game.combat.round + game.combat.turn /100;\n  let lastTime = getProperty(token.data.flags, \"midi-qol.slashAttackTime\");\n  if (combatTime !== lastTime) {\n     await token.setFlag(\"midi-qol\", \"slashAttackTime\", combatTime)\n  }\n}\n\n}\nreturn {}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"clip":"","volume":100}}},"_id":"yemcXdNspP51Vp4F"}
{"_id":"3fKynp6CSrvkJ7Fg","name":"Manobra: Parry","type":"feat","img":"modules/GMmacros/img/Ability_Warrior_DefensiveStance.png","data":{"description":{"value":"<div>\n\t\t\t\t\n\t\t\t\t<div class=\"rd__b  rd__b--3\"><p>When another creature damages you with a melee attack, you can use your reaction and expend one superiority die to reduce the damage by the number you roll on your superiority die + your Dexterity modifier.</p><div class=\"rd__spc-inline-post\"></div></div>\n\t\t\t</div>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"reaction","cost":1,"condition":""},"duration":{"value":0,"units":""},"target":{"value":0,"width":null,"units":"","type":""},"range":{"value":0,"long":0,"units":""},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"charges","target":"Xua4YBT4XHareySe","amount":1},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"1d10+@abilities.dex.mod","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Fighter 10 (Battle Master)","recharge":{"value":0,"charged":true}},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"05k4ub2VgC3VLxAg":3},"flags":{"srd5e":{"page":"optionalfeatures.html","source":"PHB","hash":"parry_phb"},"core":{"sourceId":"Item.FlTNJhHn7heS0QO6"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"autoanimations":{"killAnim":false,"animLevel":false,"override":false,"animType":"t1","animName":"","bards":{"bardAnim":"a1","bardTarget":true,"bardTargetAnim":"a1","bardTargetColor":"a1","bardSelf":true,"marker":true,"markerColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","hmAnim":"a1","color":"n1","spellOptions":{"spellLoops":1},"uaStrikeType":"physical","dtvar":"dt1","divineSmite":{"dsEnable":false,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"a1"},"explosion":false,"exAnimLevel":false,"explodeVariant":"ev1","impactVar":"a1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":0.25},"item":{"enableAudio":false,"file":"","delay":100,"volume":0.25}},"selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"teleDist":30,"templates":{"tempType":"a1","tempAnim":"","tempColor":"","tempLoop":1,"customAnim":false,"customPath":""}},"midi-qol":{"onUseMacroName":""},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"clip":"","volume":100}}}}
{"_id":"3fKynp6CSrvkJ7Fg","name":"Manobra: Parry","type":"feat","img":"modules/GMmacros/img/Ability_Warrior_DefensiveStance.png","data":{"description":{"value":"<div>\n\t\t\t\t\n\t\t\t\t<div class=\"rd__b  rd__b--3\"><p>When another creature damages you with a melee attack, you can use your reaction and expend one superiority die to reduce the damage by the number you roll on your superiority die + your Dexterity modifier.</p><div class=\"rd__spc-inline-post\"></div></div>\n\t\t\t</div>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"reaction","cost":1,"condition":""},"duration":{"value":0,"units":""},"target":{"value":0,"width":null,"units":"","type":""},"range":{"value":0,"long":0,"units":""},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"charges","target":"","amount":1},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"1d10+@abilities.dex.mod","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Fighter 10 (Battle Master)","recharge":{"value":0,"charged":true}},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"05k4ub2VgC3VLxAg":3},"flags":{"srd5e":{"page":"optionalfeatures.html","source":"PHB","hash":"parry_phb"},"core":{"sourceId":"Item.FlTNJhHn7heS0QO6"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"autoanimations":{"killAnim":false,"animLevel":false,"override":false,"animType":"t1","animName":"","bards":{"bardAnim":"a1","bardTarget":true,"bardTargetAnim":"a1","bardTargetColor":"a1","bardSelf":true,"marker":true,"markerColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","hmAnim":"a1","color":"n1","spellOptions":{"spellLoops":1},"uaStrikeType":"physical","dtvar":"dt1","divineSmite":{"dsEnable":false,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"a1"},"explosion":false,"exAnimLevel":false,"explodeVariant":"ev1","impactVar":"a1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":0.25},"item":{"enableAudio":false,"file":"","delay":100,"volume":0.25}},"selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"teleDist":30,"templates":{"tempType":"a1","tempAnim":"","tempColor":"","tempLoop":1,"customAnim":false,"customPath":""}},"midi-qol":{"onUseMacroName":""},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"clip":"","volume":100}}}}
{"name":"Parry","type":"feat","img":"systems/dnd5e/icons/skills/weapon_21.jpg","data":{"description":{"value":"<section class=\"secret\">\n<p>The gladiator adds 3 to its <strong>AC</strong> against one melee Attack that would hit it. To do so, the gladiator must see the attacker and be wielding a melee weapon.</p>\n</section>\n<p>The gladiator adds 3 to its <strong>AC</strong> against one melee Attack that would hit it.</p>","chat":"","unidentified":""},"source":"","activation":{"type":"reaction","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"0","per":"","type":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"","recharge":{"value":null,"charged":false}},"effects":[{"_id":"Tspniu1tm7U04xZa","changes":[{"key":"data.attributes.ac.bonus","mode":2,"value":"3","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/weapon_21.jpg","label":"Parry","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":["isAttacked"],"transfer":false},"dnd5e-helpers":{"rest-effect":"Ignore"},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"data.attributes.ac.bonus"}],"folder":null,"sort":0,"permission":{"default":0,"QwT9izJ4aW8QVTjo":3},"flags":{"core":{"sourceId":"Item.r4qRqWx4O2o6D5Dw"},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"clip":"","volume":100}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"}},"_id":"MB7Xpd7MStklaV4x"}
{"_id":"HF68OzFHbBUWEVuh","name":"Crusher","type":"feat","img":"modules/GMmacros/img/crusher.png","data":{"description":{"value":"<div>\n\t\t\t\t\n\t\t\t\t<div class=\"rd__b  rd__b--3\"><p>You are practiced in the art of crushing your enemies, granting you the following benefits:</p><div class=\"rd__spc-inline-post\"></div><ul class=\"rd__list\"><li class=\"rd__li \">Increase your Strength or Constitution by 1, to a maximum of 20.</li><li class=\"rd__li \">Once per turn, when you hit a creature with an attack that deals bludgeoning damage, you can move it 5 feet to an unoccupied space, provided the target is no more than one size larger than you.</li><li class=\"rd__li \">When you score a critical hit that deals bludgeoning damage to a creature, attack rolls against that creature are made with advantage until the start of your next turn.</li></ul></div>\n\t\t\t</div>","chat":"","unidentified":""},"source":"TCE","activation":{"type":"","cost":0,"condition":""},"duration":{"value":0,"units":""},"target":{"value":0,"width":null,"units":"","type":""},"range":{"value":0,"long":0,"units":null},"uses":{"value":0,"max":0,"per":""},"consume":{"type":"","target":null,"amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":0,"charged":true}},"effects":[{"_id":"3oY5yGLLMA3ZS2gk","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro.Crusher","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"modules/GMmacros/img/crusher.png","label":"Crusher","transfer":true,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false},"dnd5e-helpers":{"rest-effect":"Ignore"}},"tint":null,"selectedKey":"flags.dnd5e.DamageBonusMacro"}],"folder":null,"sort":0,"permission":{"default":0,"QwT9izJ4aW8QVTjo":3},"flags":{"srd5e":{"page":"feats.html","source":"TCE","hash":"crusher_tce","propDroppable":"feat","isStandardDragDrop":true},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Crusher","type":"script","author":"QwT9izJ4aW8QVTjo","img":"icons/svg/dice-target.svg","scope":"global","command":"if (args[0].hitTargets.length === 0) return {};\nif (![\"bludgeoning\"].includes(args[0].item.data.damage.parts[0][1])) return {};\nif (game.combat) {\n  let combatTime = game.combat.round + game.combat.turn /100;\n  let lastTime = getProperty(token.data.flags, \"midi-qol.crusherAttackTime\");\n  if (combatTime === lastTime) {\n   MidiQOL.warn(\"Crusher: Already done used crusher this turn\");\n   return {};\n  }\n}\nlet target  = Array.from(game.user.targets)[0].actor;\n\nif (args[0].isCritical) {\nconst efffectData = {\nlabel: \"Crusher\", icon: \"modules/GMmacros/img/1%20Desvantagem_defender.png\", \nchanges: [\n{value: 1, mode: CONST.ACTIVE_EFFECT_MODES.OVERRIDE, priority: 20, key:\"flags.midi-qol.grants.advantage.attack.all\"}],\nduration: {rounds: 1}\n}\nawait target.createEmbeddedEntity(\"ActiveEffect\", efffectData);\nif (game.combat) {\n  let combatTime = game.combat.round + game.combat.turn /100;\n  let lastTime = getProperty(token.data.flags, \"midi-qol.crusherAttackTime\");\n  if (combatTime !== lastTime) {\n     await token.setFlag(\"midi-qol\", \"crusherAttackTime\", combatTime)\n  }\n}\n}\nreturn {}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.Zp0iEo3BYVdM8MDj"},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"clip":"","volume":100}}}}
{"_id":"HF68OzFHbBUWEVuh","name":"Crusher","type":"feat","img":"modules/GMmacros/img/crusher.png","data":{"description":{"value":"<div>\n\t\t\t\t\n\t\t\t\t<div class=\"rd__b  rd__b--3\"><p>You are practiced in the art of crushing your enemies, granting you the following benefits:</p><div class=\"rd__spc-inline-post\"></div><ul class=\"rd__list\"><li class=\"rd__li \">Increase your Strength or Constitution by 1, to a maximum of 20.</li><li class=\"rd__li \">Once per turn, when you hit a creature with an attack that deals bludgeoning damage, you can move it 5 feet to an unoccupied space, provided the target is no more than one size larger than you.</li><li class=\"rd__li \">When you score a critical hit that deals bludgeoning damage to a creature, attack rolls against that creature are made with advantage until the start of your next turn.</li></ul></div>\n\t\t\t</div>","chat":"","unidentified":""},"source":"TCE","activation":{"type":"","cost":0,"condition":""},"duration":{"value":0,"units":""},"target":{"value":0,"width":null,"units":"","type":""},"range":{"value":0,"long":0,"units":null},"uses":{"value":0,"max":0,"per":""},"consume":{"type":"","target":null,"amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":0,"charged":true}},"effects":[{"_id":"3oY5yGLLMA3ZS2gk","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro.Crusher","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"modules/GMmacros/img/crusher.png","label":"Crusher","transfer":true,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false},"dnd5e-helpers":{"rest-effect":"Ignore"}},"tint":null,"selectedKey":"flags.dnd5e.DamageBonusMacro"}],"folder":null,"sort":0,"permission":{"default":0,"QwT9izJ4aW8QVTjo":3},"flags":{"srd5e":{"page":"feats.html","source":"TCE","hash":"crusher_tce","propDroppable":"feat","isStandardDragDrop":true},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Crusher","type":"script","author":"QwT9izJ4aW8QVTjo","img":"icons/svg/dice-target.svg","scope":"global","command":"if (args[0].hitTargets.length === 0) return {};\nif (![\"bludgeoning\"].includes(args[0].item.data.damage.parts[0][1])) return {};\nif (game.combat) {\n  let combatTime = game.combat.round + game.combat.turn /100;\n  let lastTime = getProperty(token.data.flags, \"midi-qol.crusherAttackTime\");\n  if (combatTime === lastTime) {\n   MidiQOL.warn(\"Crusher: Already done used crusher this turn\");\n   return {};\n  }\n}\nlet target  = Array.from(game.user.targets)[0].actor;\n\nif (args[0].isCritical) {\nconst efffectData = {\nlabel: \"Crusher\", icon: \"modules/GMmacros/img/1%20Desvantagem_defender.png\", \nchanges: [\n{value: 1, mode: CONST.ACTIVE_EFFECT_MODES.OVERRIDE, priority: 20, key:\"flags.midi-qol.grants.advantage.attack.all\"}],\nduration: {rounds: 1}\n}\nawait target.createEmbeddedEntity(\"ActiveEffect\", efffectData);\nif (game.combat) {\n  let combatTime = game.combat.round + game.combat.turn /100;\n  let lastTime = getProperty(token.data.flags, \"midi-qol.crusherAttackTime\");\n  if (combatTime !== lastTime) {\n     await token.setFlag(\"midi-qol\", \"crusherAttackTime\", combatTime)\n  }\n}\n}\nreturn {}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.Zp0iEo3BYVdM8MDj"},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"clip":"","volume":100}}}}
{"_id":"FHRLqeAelrKvxWqQ","name":"Defensive Flourish","type":"feat","img":"systems/dnd5e/icons/skills/weapon_16.jpg","data":{"description":{"value":"<div class=\"rd__b  rd__b--1\"><p>You can expend one use of your Bardic Inspiration to cause the weapon to deal extra damage to the target you hit. The damage equals the number you roll on the Bardic Inspiration die. You also add the number rolled to your AC until the start of your next turn.</p></div>","chat":"","unidentified":""},"source":"XGE","activation":{"type":"special","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":"none"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":"20","chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"flat"},"requirements":"Bard 3 (Swords)","recharge":{"value":null,"charged":false}},"effects":[{"_id":"udWHSFElMFDSxSdR","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro.Defensive Flourish","priority":"30"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/weapon_16.jpg","label":"Defensive Flourish","transfer":true,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.dnd5e.DamageBonusMacro"}],"folder":null,"sort":0,"permission":{"default":0,"rbM5nB1AbUwbj4yJ":3},"flags":{"srd5e":{"page":"classfeatures.html","source":"XGE","hash":"defensive%20flourish_bard_xge_swords_xge_3_xge"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"onUseMacroName":"","criticalThreshold":"20"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Item.GBtHJIfJjufFkUzW"},"itemacro":{"macro":{"data":{"_id":null,"name":"Defensive Flourish2","type":"script","author":"rbM5nB1AbUwbj4yJ","img":"icons/svg/dice-target.svg","scope":"global","command":"//Defensive Flourish\n// v1.0. Requires midi-qol and times-up.\n\n//hit?\nif (![\"mwak\",\"rwak\"].includes(args[0].item.data.actionType)) return {}; // weapon attack\nif (args[0].hitTargets.length < 1) return {};\ntoken = canvas.tokens.get(args[0].tokenId);\nactor = token.actor;\nif (!actor || !token || args[0].hitTargets.length < 1) return {};\nlet target = canvas.tokens.get(args[0].hitTargets[0]._id);\nif (game.combat) {\n  let combatTime = game.combat.round + game.combat.turn /100;\n  let lastTime = getProperty(token.data.flags, \"midi-qol.flourishAttackTime\");\n  if (combatTime === lastTime) {\n   MidiQOL.warn(\"Blade Flourish Damage: Already done a Blade Flourish this turn\");\n   return {};\n  }\n}\nlet foundEnemy = true;\nlet useSneak = actor.data.flags.dae?.autoSneak;\nif (!useSneak) {\nlet dialog = new Promise((resolve, reject) => {\n      new Dialog({\n      // localize this text\n      title: \"Conditional Damage\",\n      content: `<p>Use Defensive Flourish?</p>`+(!foundEnemy ? \"<p>Only Nuetral creatures nearby</p>\" : \"\"),\n      buttons: {\n          one: {\n              icon: '<i class=\"fas fa-check\"></i>',\n              label: \"Confirm\",\n              callback: () => resolve(true)\n          },\n          two: {\n              icon: '<i class=\"fas fa-times\"></i>',\n              label: \"Cancel\",\n              callback: () => {resolve(false)}\n          }\n      },\n      default: \"two\"\n      }).render(true);\n    });\n    useSneak = await dialog;\n}\n\n\n//roll\nconst level = actor.items.getName(\"Bard\").data.data.levels;\nlet bardicDice = level < 5 ? 6 : level >= 5 ? 8 : level >= 15 ? 12 : null;\nconst roll = new Roll(`1d${bardicDice}`);\nroll.toMessage({});\n\n\n// create effect\nconst effect = {\nlabel: \"Defensive Flourish\", icon: \"systems/dnd5e/icons/skills/weapon_16.jpg\", \nchanges: [{value: `${roll.terms[0].total}`, mode: CONST.ACTIVE_EFFECT_MODES.ADD, priority: 20, key:\"data.attributes.ac.value\"}],duration: {rounds: 1}, flags:{dae: {specialDuration: [\"turnStart\"]}}\n};\nif(token){\n  let effectPresent = !!token.actor.effects.find(e => e.data.label === effect.label);\n  if(effectPresent) removeEffect({ actor : token.actor, effectLabel : effect.label });\n  else addEffect({ actor : token.actor, effectData : effect });\n}\nasync function removeEffect({ actor, effectLabel }){\n  if(!actor || !effectLabel) return;\n  let effect = actor.effects.find(e => e.data.label === effectLabel);\n  if(!effect) return;\n\n  await actor.deleteEmbeddedEntity(\"ActiveEffect\", [effect.id]);\n}\nasync function addEffect({ actor, effectData }){\n  if(!actor || !effectData) return;\n  await actor.createEmbeddedEntity(\"ActiveEffect\", effectData );\n}\n\nreturn {damageRoll: `${roll.terms[0].total}`, flavor: \"Defensive Flourish\"};","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"clip":"","volume":100}}}}
{"_id":"NIsuq7rBKk3TIy0n","name":"Piercer","type":"feat","img":"modules/GMmacros/img/Spear_pierc.png","data":{"description":{"value":"<div>\n\t\t\t\t\n\t\t\t\t<div class=\"rd__b  rd__b--3\"><p>You have achieved a penetrating precision in combat, granting you the following benefits:</p><div class=\"rd__spc-inline-post\"></div><ul class=\"rd__list\"><li class=\"rd__li \">Increase your Strength or Dexterity by 1, to a maximum of 20.</li><li class=\"rd__li \">Once per turn, when you hit a creature with an attack that deals piercing damage, you can reroll one of the attack's damage dice, and you must use the new roll.</li><li class=\"rd__li \">When you score a critical hit that deals piercing damage to a creature, you can roll one additional damage die when determining the extra piercing damage the target takes.</li></ul></div>\n\t\t\t</div>","chat":"","unidentified":""},"source":"TCE","activation":{"type":"","cost":0,"condition":""},"duration":{"value":0,"units":""},"target":{"value":0,"width":null,"units":"","type":""},"range":{"value":0,"long":0,"units":null},"uses":{"value":0,"max":0,"per":""},"consume":{"type":"","target":null,"amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":0,"charged":true}},"effects":[{"_id":"NxmtQmOXKW9HvWnt","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro.Piercer","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"modules/GMmacros/img/Spear_pierc.png","label":"Piercer","transfer":true,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":true},"dnd5e-helpers":{"rest-effect":"Ignore"},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.dnd5e.DamageBonusMacro"}],"folder":null,"sort":0,"permission":{"default":0,"QwT9izJ4aW8QVTjo":3},"flags":{"srd5e":{"page":"feats.html","source":"TCE","hash":"piercer_tce"},"core":{"sourceId":"Item.TTEseFoyoaq57zZq"},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"clip":"","volume":100}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Piercer","type":"script","author":"QwT9izJ4aW8QVTjo","img":"icons/svg/dice-target.svg","scope":"global","command":"if (args[0].hitTargets.length === 0) return {};\nlet target = canvas.tokens.get(args[0].hitTargets[0]?._id)\nif (![\"piercing\"].includes(args[0].item.data.damage.parts[0][1])) return {};\nif(!target) return;\nif (args[0].isCritical) {\n    let damageRoll = new Roll(\"1d6\").roll()\n    new MidiQOL.DamageOnlyWorkflow(actor, token, damageRoll.total, \"piercing\", [target], damageRoll, {flavor: \"Piercer - bonus critical damage\", itemCardId: args[0].itemCardId})\n}\nlet roll = args[0].damageRoll;\nlet dieSize = roll.terms[0].faces;\nlet lowDice = Math.min(... roll.terms[0].values)\nconst content = `Reroll damage? \\n Previous lowest dice result: ${lowDice} on 1d${dieSize}`\nlet d = new Dialog({\n    title: \"Piercer Reroll\",\n    content: content,\n    buttons: {\n        one: {\n            icon:'<i class=\"fas fa-dice\"></i>',\n            label: \"Reroll\",\n            callback: () =>{\n                let damageRoll = new Roll(`1d${dieSize} - ${lowDice}`).roll()\n                new MidiQOL.DamageOnlyWorkflow(actor, token, damageRoll.total, \"piercing\", [target], damageRoll, {flavor: \"Piercer - reroll damage adjustment\", itemCardId: args[0].itemCardId})\n            }\n        }\n    }\n})\nd.render(true)","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}}}}
{"_id":"HF68OzFHbBUWEVuh","name":"Crusher","type":"feat","img":"modules/GMmacros/img/crusher.png","data":{"description":{"value":"<div>\n\t\t\t\t\n\t\t\t\t<div class=\"rd__b  rd__b--3\"><p>You are practiced in the art of crushing your enemies, granting you the following benefits:</p><div class=\"rd__spc-inline-post\"></div><ul class=\"rd__list\"><li class=\"rd__li \">Increase your Strength or Constitution by 1, to a maximum of 20.</li><li class=\"rd__li \">Once per turn, when you hit a creature with an attack that deals bludgeoning damage, you can move it 5 feet to an unoccupied space, provided the target is no more than one size larger than you.</li><li class=\"rd__li \">When you score a critical hit that deals bludgeoning damage to a creature, attack rolls against that creature are made with advantage until the start of your next turn.</li></ul></div>\n\t\t\t</div>","chat":"","unidentified":""},"source":"TCE","activation":{"type":"","cost":0,"condition":""},"duration":{"value":0,"units":""},"target":{"value":0,"width":null,"units":"","type":""},"range":{"value":0,"long":0,"units":null},"uses":{"value":0,"max":0,"per":""},"consume":{"type":"","target":null,"amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":0,"charged":true}},"effects":[{"_id":"3oY5yGLLMA3ZS2gk","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro.Crusher","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"modules/GMmacros/img/crusher.png","label":"Crusher","transfer":true,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false},"dnd5e-helpers":{"rest-effect":"Ignore"}},"tint":null,"selectedKey":"flags.dnd5e.DamageBonusMacro"}],"folder":null,"sort":0,"permission":{"default":0,"QwT9izJ4aW8QVTjo":3},"flags":{"srd5e":{"page":"feats.html","source":"TCE","hash":"crusher_tce","propDroppable":"feat","isStandardDragDrop":true},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Crusher","type":"script","author":"QwT9izJ4aW8QVTjo","img":"icons/svg/dice-target.svg","scope":"global","command":"if (args[0].hitTargets.length === 0) return {};\nif (![\"bludgeoning\"].includes(args[0].item.data.damage.parts[0][1])) return {};\nif (game.combat) {\n  let combatTime = game.combat.round + game.combat.turn /100;\n  let lastTime = getProperty(token.data.flags, \"midi-qol.crusherAttackTime\");\n  if (combatTime === lastTime) {\n   MidiQOL.warn(\"Crusher: Already done used crusher this turn\");\n   return {};\n  }\n}\nlet target  = Array.from(game.user.targets)[0].actor;\n\nif (args[0].isCritical) {\nconst efffectData = {\nlabel: \"Crusher\", icon: \"modules/GMmacros/img/1%20Desvantagem_defender.png\", \nchanges: [\n{value: 1, mode: CONST.ACTIVE_EFFECT_MODES.OVERRIDE, priority: 20, key:\"flags.midi-qol.grants.advantage.attack.all\"}],\nduration: {rounds: 1}\n}\nawait target.createEmbeddedEntity(\"ActiveEffect\", efffectData);\nif (game.combat) {\n  let combatTime = game.combat.round + game.combat.turn /100;\n  let lastTime = getProperty(token.data.flags, \"midi-qol.crusherAttackTime\");\n  if (combatTime !== lastTime) {\n     await token.setFlag(\"midi-qol\", \"crusherAttackTime\", combatTime)\n  }\n}\n}\nreturn {}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.Zp0iEo3BYVdM8MDj"},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"clip":"","volume":100}}}}
{"_id":"qj3CM2HsiK0A4Uqo","name":"Sharpshooter","type":"feat","img":"modules/plutonium/media/icon/feat/phb-sharpshooter.webp","data":{"description":{"value":"<p>+10 Dano / -5 Atk</p>\n<p>Meia cobertura e 3/4 são ignoradas.</p>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"special","cost":1,"condition":""},"duration":{"value":0,"units":""},"target":{"value":0,"width":null,"units":"","type":""},"range":{"value":0,"long":0,"units":""},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":0,"charged":true}},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"rbM5nB1AbUwbj4yJ":3},"flags":{"srd5e":{"page":"feats.html","source":"PHB","hash":"sharpshooter_phb"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"midi-qol":{"onUseMacroName":"ItemMacro"},"itemacro":{"macro":{"data":{"_id":null,"name":"Sharpshooter","type":"script","author":"rbM5nB1AbUwbj4yJ","img":"icons/svg/dice-target.svg","scope":"global","command":"//#####################################\n// READ THIS\n// Requires Midi-QoL on use\n\n//####################################\nlet sharpshooter = async function () {\n    const target = canvas.tokens.get(args[0].tokenId).actor;\n    const itemD = args[0].item;\n    const gameRound = game.combat ? game.combat.round : 0;\n    let chatMessage = \"\";\n    let the_message = \"\";\n    if (target.effects.find(ef => ef.data.label === itemD.name)) {\n        let effect_id = await target.effects.find(ef => ef.data.label === itemD.name).id;\n        await target.deleteEmbeddedDocuments(\"ActiveEffect\", [effect_id]);\n        the_message = `<em><span style=\"color: red\"><strong>Sharpshooter desligado</strong></span></em>`;\n        chatMessage = game.messages.get(args[0].itemCardId);\n    } else {\n        let effectData = [{\n            label: itemD.name,\n            icon: itemD.img,\n            duration: { rounds: 10, startRound: gameRound, startTime: game.time.worldTime },\n            origin: args[0].uuid,\n            changes: [{\n                \"key\": \"data.bonuses.rwak.damage\",\n                \"mode\": 2,\n                \"value\": \"+10\",\n                \"priority\": 20\n            }, {\n                \"key\": \"data.bonuses.rwak.attack\",\n                \"mode\": 2,\n                \"value\": \"-5\",\n                \"priority\": 20\n            }]\n        }];\n        await target.createEmbeddedDocuments(\"ActiveEffect\", effectData);\n        the_message = `<em><span style=\"color: green\"><strong>Sharpshooter Desligado</strong></span></em>`;\n        chatMessage = game.messages.get(args[0].itemCardId);\n    }\n    let content = await duplicate(chatMessage.data.content);\n    let searchString = /<div class=\"midi-qol-saves-display\">[\\s\\S]*<div class=\"end-midi-qol-saves-display\">/g;\n    let replaceString = `<div class=\"midi-qol-saves-display\"><div class=\"end-midi-qol-saves-display\">${the_message}`;\n    content = content.replace(searchString, replaceString);\n    await chatMessage.update({ content: content });\n};\nsharpshooter();","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.zaChWJQFyrvyRkZH"},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"clip":"","volume":100}}}}
{"_id":"qj3CM2HsiK0A4Uqo","name":"Sharpshooter","type":"feat","img":"modules/plutonium/media/icon/feat/phb-sharpshooter.webp","data":{"description":{"value":"<p>+10 Dano / -5 Atk</p>\n<p>Meia cobertura e 3/4 são ignoradas.</p>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"special","cost":1,"condition":""},"duration":{"value":0,"units":""},"target":{"value":0,"width":null,"units":"","type":""},"range":{"value":0,"long":0,"units":""},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":0,"charged":true}},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"rbM5nB1AbUwbj4yJ":3},"flags":{"srd5e":{"page":"feats.html","source":"PHB","hash":"sharpshooter_phb"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"midi-qol":{"onUseMacroName":"ItemMacro"},"itemacro":{"macro":{"data":{"_id":null,"name":"Sharpshooter","type":"script","author":"rbM5nB1AbUwbj4yJ","img":"icons/svg/dice-target.svg","scope":"global","command":"//#####################################\n// READ THIS\n// Requires Midi-QoL on use\n\n//####################################\nlet sharpshooter = async function () {\n    const target = canvas.tokens.get(args[0].tokenId).actor;\n    const itemD = args[0].item;\n    const gameRound = game.combat ? game.combat.round : 0;\n    let chatMessage = \"\";\n    let the_message = \"\";\n    if (target.effects.find(ef => ef.data.label === itemD.name)) {\n        let effect_id = await target.effects.find(ef => ef.data.label === itemD.name).id;\n        await target.deleteEmbeddedDocuments(\"ActiveEffect\", [effect_id]);\n        the_message = `<em><span style=\"color: red\"><strong>Sharpshooter desligado</strong></span></em>`;\n        chatMessage = game.messages.get(args[0].itemCardId);\n    } else {\n        let effectData = [{\n            label: itemD.name,\n            icon: itemD.img,\n            duration: { rounds: 10, startRound: gameRound, startTime: game.time.worldTime },\n            origin: args[0].uuid,\n            changes: [{\n                \"key\": \"data.bonuses.rwak.damage\",\n                \"mode\": 2,\n                \"value\": \"+10\",\n                \"priority\": 20\n            }, {\n                \"key\": \"data.bonuses.rwak.attack\",\n                \"mode\": 2,\n                \"value\": \"-5\",\n                \"priority\": 20\n            }]\n        }];\n        await target.createEmbeddedDocuments(\"ActiveEffect\", effectData);\n        the_message = `<em><span style=\"color: green\"><strong>Sharpshooter Desligado</strong></span></em>`;\n        chatMessage = game.messages.get(args[0].itemCardId);\n    }\n    let content = await duplicate(chatMessage.data.content);\n    let searchString = /<div class=\"midi-qol-saves-display\">[\\s\\S]*<div class=\"end-midi-qol-saves-display\">/g;\n    let replaceString = `<div class=\"midi-qol-saves-display\"><div class=\"end-midi-qol-saves-display\">${the_message}`;\n    content = content.replace(searchString, replaceString);\n    await chatMessage.update({ content: content });\n};\nsharpshooter();","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.zaChWJQFyrvyRkZH"},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"clip":"","volume":100}}}}
