{"name":"Summon Elemental","type":"spell","system":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>You call forth an elemental spirit. It manifests in an unoccupied space that you can see within range. This corporeal form uses the @creature[Elemental Spirit|TCE] stat block. When you cast the spell, choose an element: Air, Earth, Fire, or Water. The creature resembles a bipedal form wreathed in the chosen element, which determines certain traits in its stat block. The creature disappears when it drops to 0 hit points or when the spell ends.</p><div class=\"rd__spc-inline-post\"></div><p>The creature is an ally to you and your companions. In combat, the creature shares your initiative count, but it takes its turn immediately after yours. It obeys your verbal commands (no action required by you). If you don't issue any, it takes the @action[Dodge] action and uses its move to avoid danger.</p></div><div class=\"rd__b  rd__b--3\"><div class=\"rd__b  rd__b--3\"><span class=\"rd__h rd__h--3\" data-title-index=\"5\"> <span class=\"entry-title-inner\">At Higher Levels.</span></span> <p>When you cast this spell using a spell slot of 5th level or higher, use the higher level wherever the spell's level appears in the stat block.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__spc-inline-post\"></div></div>","chat":"","unidentified":""},"source":"TCE","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"hour"},"target":{"value":0,"width":null,"units":"","type":""},"range":{"value":90,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":null,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":4,"school":"con","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":true},"materials":{"value":"air, a pebble, ash, and water inside a gold-inlaid vial worth at least 400 gp","consumed":false,"cost":400,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"none","formula":""}},"img":"icons/magic/unholy/silhouette-evil-horned-giant.webp","flags":{"plutonium":{"page":"spells.html","source":"TCE","hash":"summon%20elemental_tce","propDroppable":"spell"},"rest-recovery":{"data":{"recovery":{"enabled":false}}},"midi-qol":{"effectActivation":false,"onUseMacroName":"[postActiveEffects]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"itemacro":{"macro":{"name":"Summon Elemental","type":"script","scope":"global","command":"const item = actor.items.getName(\"Summon Elemental\");\nconst [{spellLevel: level}] = args;\nconst multiatk = Math.floor(level/2)\nconst summonerDc = actor.system.attributes.spelldc;\nconst summonerAttack = summonerDc - 8;\nconst hp = 50 + 10 * (level - 4);\nconst sourceActor = token?.actor ?? game.user.character;\nconst number = sourceActor.getRollData().details.level;\n\n/* Prompt the user for which type of celestial to summon */\nconst buttonData = {\n  buttons: [{\n    label: 'Air Elemental',\n    value: {\n      token: { name: \"Air Elemental\" },\n      token: { img: \"systems/dnd5e/tokens/elemental/WindElemental.webp\" },\n      actor: { name: \"Air Elemental\" },\n      actor: { img: \"systems/dnd5e/tokens/elemental/WindElemental.webp\"},\n      embedded: {\n        Item: {\n          \"Damage Resistances (Water only)\": warpgate.CONST.DELETE,\n          \"Damage Resistances (Earth only)\": warpgate.CONST.DELETE,\n          \"Damage Immunities (Fire only)\": warpgate.CONST.DELETE,\n          \"Slam\": {\n             'system.damage.parts': [[`1d10 + 4 + ${level}`, \"bludgeoning\"]],\n             'system.attackBonus': `- @mod - @prof + ${summonerAttack}`,\n             },\n        }\n      }\n    }\n  }, {\n    label: 'Earth Elemental',\n    value: {\n      token: { name: \"Earth Elemental\" },\n      token: { img: \"modules/GMmacros/img/clay.png\" },\n      actor: { name: \"Earth Elemental\" },\n      actor: { img: \"modules/GMmacros/img/clay.png\"},\n      embedded: {\n        Item: {\n          \"Damage Resistances (Earth only)\": warpgate.CONST.DELETE,\n          \"Damage Resistances (Air only)\": warpgate.CONST.DELETE,\n          \"Damage Immunities (Fire only)\": warpgate.CONST.DELETE,\n          \"Slam\": {\n             'system.damage.parts': [[`1d10 + 4 + ${level}`, \"bludgeoning\"]],\n             'system.attackBonus': `- @mod - @prof + ${summonerAttack}`,\n             },\n        }\n      }\n    }\n  },{\n    label: 'Water Elemental',\n    value: {\n      token: { name: \"Water Elemental\" },\n      token: { img: \"modules/GMmacros/img/waterelemental.png\" },\n      actor: { name: \"Water Elemental\" },\n      actor: { img: \"modules/GMmacros/img/waterelemental.png\"},\n      embedded: {\n        Item: {\n          \"Damage Resistances (Air only)\": warpgate.CONST.DELETE,\n          \"Damage Resistances (Earth only)\": warpgate.CONST.DELETE,\n          \"Damage Immunities (Fire only)\": warpgate.CONST.DELETE,\n          \"Slam\": {\n             'system.damage.parts': [[`1d10 + 4 + ${level}`, \"bludgeoning\"]],\n             'system.attackBonus': `- @mod - @prof + ${summonerAttack}`,\n             },\n        }\n      }\n    }\n  },{\n    label: 'Fire Elemental',\n    value: {\n      token: { name: \"Fire Elemental\" },\n      token: { img: \"systems/dnd5e/tokens/elemental/FireElemental.webp\" },\n      actor: { name: \"Fire Elemental\" },\n      actor: { img: \"systems/dnd5e/tokens/elemental/FireElemental.webp\"},\n      embedded: {\n        Item: {\n          \"Damage Resistances (Water only)\": warpgate.CONST.DELETE,\n          \"Damage Resistances (Earth only)\": warpgate.CONST.DELETE,\n          \"Damage Resistances (Air only)\": warpgate.CONST.DELETE,\n          \"Slam\": {\n             'system.damage.parts': [[`1d10 + 4 + ${level}`, \"fire\"]],\n             'system.attackBonus': `- @mod - @prof + ${summonerAttack}`,\n             },\n        }\n      }\n    }\n  }\n  ],\n  title: 'Which Elemental?'\n};\n\nconst celestial = await warpgate.buttonDialog(buttonData);\n\nconst callbacks = {\n    post: async (location, tokenDoc, updates, iteration) => {\n        await myEffectFunction(tokenDoc);\n    }\n}\n\n/* Craft the updates that are common to all celestials */\nconst updates = foundry.utils.mergeObject({\n  token: { \"displayName\": CONST.TOKEN_DISPLAY_MODES.HOVER },\n  actor: {\n    'system.attributes.ac.natural': 11 + level,\n    'system.details.cr': number,\n  },\n  embedded: {\n    Item: {\n      \"Multiattack\": {\n        name: `${multiatk}x Multiattack`\n\t},\n      },\n    }\n }, celestial);\nasync function preSpawn(location, updates, iteration) {\n   await new Sequence()\n    .effect()\n      .file(\"jb2a.divine_smite.caster.blueyellow\")\n      .atLocation(location)\n      .scaleToObject(3)\n      .waitUntilFinished(-500)\n      .fadeIn(100)\n    .effect()\n      .file(\"jb2a.explosion.blueyellow.0\")\n      .atLocation(location)\n      .scaleToObject(4)\n  .play()\n  }\n\n  await warpgate.spawn(\"Elemental Spirit\", updates, {pre:preSpawn});","author":"Be8r6Sgxcs3sL08I","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"core":{"sourceId":"Item.VlvnBndUAPrtaPx8"},"cf":{"id":"temp_6q1ztzxb2o4"}},"effects":[],"ownership":{"default":0,"Be8r6Sgxcs3sL08I":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.291","createdTime":1671301377240,"modifiedTime":1671323878665,"lastModifiedBy":"Be8r6Sgxcs3sL08I"},"folder":null,"sort":0,"_id":"0cnrVDKRTr0KmUW3"}
{"name":"Booming Blade","type":"spell","system":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>You brandish the weapon used in the spell's casting and make a melee attack with it against one creature within 5 feet of you. On a hit, the target suffers the weapon attack's normal effects and then becomes sheathed in booming energy until the start of your next turn. If the target willingly moves 5 feet or more before then, the target takes [[/r 1d8]] thunder damage, and the spell ends.</p><div class=\"rd__spc-inline-post\"></div><p>This spell's damage increases when you reach certain levels. At 5th level, the melee attack deals an extra [[/r 1d8]] thunder damage to the target on a hit, and the damage the target takes for moving increases to [[/r 2d8]]. Both damage rolls increase by 1d8 at 11th level ([[/r 2d8]] and [[/r 3d8]]) and again at 17th level ([[/r 3d8]] and [[/r 4d8]]).</p></div>","chat":"","unidentified":""},"source":"TCE","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":null,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"int"},"level":0,"school":"evo","components":{"value":"","vocal":false,"somatic":true,"material":true,"ritual":false,"concentration":false},"materials":{"value":"a melee weapon worth at least 1 sp","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"always","prepared":true},"scaling":{"mode":"cantrip","formula":"1d8"}},"img":"icons/skills/melee/strike-sword-slashing-red.webp","flags":{"plutonium":{"page":"spells.html","source":"TCE","hash":"booming%20blade_tce","propDroppable":"spell"},"rest-recovery":{"data":{"recovery":{"enabled":false}}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"itemacro":{"macro":{"name":"Booming Blade","type":"script","scope":"global","command":"const version = \"10.0.17\";\ntry {\n    if (![\"mwak\"].includes(args[0].item.system.actionType)) return {}; \n    if (args[0].hitTargetUuids.length === 0) return {}; // did not hit anyone\n    for (let tokenUuid of args[0].hitTargetUuids) {\n        const target = await fromUuid(tokenUuid);\n        const targetActor = target.actor;\n        if (!targetActor) continue;\n        let bsEffect = new ActiveEffect({label: \"Booming Blade\", icon: \"icons/skills/melee/strike-sword-slashing-red.webp\", duration: {rounds: 1},flags:{dae: {specialDuration: [\"turnEnd\"]}}});\n            await MidiQOL.socket().executeAsGM(\"createEffects\", {actorUuid: targetActor.uuid, effects: [bsEffect.toObject()]})\n    }\n\nconst spellLevel = actor.flags[\"midi-qol\"].boomingLevel.level;\n\nif (spellLevel > 16) {\ndados = 3} else if (spellLevel > 10) {\ndados = 2} else if (spellLevel > 4) {\ndados = 1} else {\ndados = 0}\n\nif (args[0].isCritical) dados = dados * 2;\n\n    return{damageRoll: `${dados}d8[thunder]`, flavor: \"Booming Blade\"}\n} catch (err) {\n    console.error(`${args[0].itemData.name} - Booming Blade ${version}`, err);\n}","author":"Be8r6Sgxcs3sL08I","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"core":{"sourceId":"Actor.YPh5XDISqV1e9Zth.Item.v7nuxo5TUTGtys7W"},"cf":{"id":"temp_6q1ztzxb2o4"}},"effects":[{"label":"Booming Blade","icon":"icons/skills/melee/strike-sword-slashing-red.webp","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro","priority":20},{"key":"flags.midi-qol.boomingLevel.level","mode":2,"value":"@details.level","priority":20}],"transfer":false,"_id":"7Dmml4ccyo7qjwv8","disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"origin":null,"tint":null,"flags":{"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["1Attack:mwak"]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"ownership":{"default":0,"l056gHuKc3178tdK":3,"Be8r6Sgxcs3sL08I":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.291","createdTime":1669683494379,"modifiedTime":1671425291866,"lastModifiedBy":"Be8r6Sgxcs3sL08I"},"folder":null,"sort":0,"_id":"1BtolCJNJcPR9w1r"}
{"_id":"1zK99XCfi84gRGDA","name":"#[CF_tempEntity]","type":"weapon","img":"icons/svg/item-bag.svg","effects":[],"folder":null,"sort":0,"flags":{"cf":{"id":"temp_0ayrgs4kykof","folderPath":[],"color":"#000000","fontColor":"#FFFFFF","name":"Magias-SemAE-Criar DF Effect","children":[],"icon":"","sorting":"a","contents":["sdpD323b7JkaEliH"],"version":"2.4.5"}},"system":{"description":{"value":"","chat":"","unidentified":""},"source":"","quantity":1,"weight":0,"price":0,"attunement":0,"equipped":false,"rarity":"","identified":true,"activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null,"recovery":""},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":null,"attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"weaponType":"simpleM","baseItem":"","properties":{},"proficient":true},"ownership":{"default":0,"QwT9izJ4aW8QVTjo":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.290","createdTime":null,"modifiedTime":1668439868256,"lastModifiedBy":"Be8r6Sgxcs3sL08I"}}
{"name":"Summon Fiend","type":"spell","system":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>You call forth a fiendish spirit. It manifests in an unoccupied space that you can see within range. This corporeal form uses the @creature[Fiendish Spirit|TCE] stat block. When you cast the spell, choose Demon, Devil, or Yugoloth. The creature resembles a fiend of the chosen type, which determines certain traits in its stat block. The creature disappears when it drops to 0 hit points or when the spell ends.</p><div class=\"rd__spc-inline-post\"></div><p>The creature is an ally to you and your companions. In combat, the creature shares your initiative count, but it takes its turn immediately after yours. It obeys your verbal commands (no action required by you). If you don't issue any, it takes the @action[Dodge] action and uses its move to avoid danger.</p></div><div class=\"rd__b  rd__b--3\"><div class=\"rd__b  rd__b--3\"><span class=\"rd__h rd__h--3\" data-title-index=\"6\"> <span class=\"entry-title-inner\">At Higher Levels.</span></span> <p>When you cast this spell using a spell slot of 7th level or higher, use the higher level wherever the spell's level appears in the stat block.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__spc-inline-post\"></div></div>","chat":"","unidentified":""},"source":"TCE","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"hour"},"target":{"value":0,"width":null,"units":"","type":""},"range":{"value":90,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":null,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":6,"school":"con","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":true},"materials":{"value":"humanoid blood inside a ruby vial worth at least 600 gp","consumed":false,"cost":600,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"none","formula":""}},"img":"icons/magic/unholy/silhouette-evil-horned-giant.webp","flags":{"plutonium":{"page":"spells.html","source":"TCE","hash":"summon%20fiend_tce","propDroppable":"spell"},"rest-recovery":{"data":{"recovery":{"enabled":false}}},"midi-qol":{"effectActivation":false,"onUseMacroName":"[postActiveEffects]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"itemacro":{"macro":{"name":"Summon Fiend","type":"script","scope":"global","command":"const item = actor.items.getName(\"Summon Fiend\");\nconst [{spellLevel: level}] = args;\nconst multiatk = Math.floor(level/2)\nconst summonerDc = actor.system.attributes.spelldc;\nconst summonerAttack = summonerDc - 8;\nconst hpdev = 40 + 15 * (level - 6);\nconst hpdem = 50 + 15 * (level - 6);\nconst hpyu = 60 + 15 * (level - 6);\nconst sourceActor = token?.actor ?? game.user.character;\nconst number = sourceActor.getRollData().details.level;\n\n\n/* Prompt the user for which type of celestial to summon */\nconst buttonData = {\n  buttons: [{\n    label: 'Demon',\n    value: {\n      token: { name: \"Demon\" },\n      actor: { name: \"Demon\" },\n      actor: {\n        'system.attributes.hp': { value: hpdem, max: hpdem}},\n      embedded: {\n        Item: {\n          \"Devil's Sight (Devil Only)\": warpgate.CONST.DELETE,\n          \"Hurl Flame (Devil Only)\": warpgate.CONST.DELETE,\n          \"Claws (Yugoloth Only)\": warpgate.CONST.DELETE,\n          \"Death Throes (Demon Only)\": {\n\t\t'system.damage.parts': [[`2d10 + ${level}`, \"fire\"]],\n\t\t'system.save': {'dc': `${summonerDc}`}},\n          \"Bite (Demon Only)\": {\n             'system.damage.parts': [[`1d12 + 3 + ${level}`, \"necrotic\"]],\n             'system.attackBonus': `- @mod - @prof + ${summonerAttack}`,\n             },\n      } }\n    }\n  }, {\n    label: 'Devil',\n    value: {\n      token: { name: \"Devil\" },\n      actor: { name: \"Devil\" },\n      actor: {\n        'system.attributes.hp': { value: hpdev, max: hpdev}},\n      embedded: {\n        Item: {\n          \"Death Throes (Demon Only)\": warpgate.CONST.DELETE,\n          \"Bite (Demon Only)\": warpgate.CONST.DELETE,\n          \"Claws (Yugoloth Only)\": warpgate.CONST.DELETE,\n          \"Hurl Flame (Devil Only)\": {\n             'system.damage.parts': [[`2d6 + 3 + ${level}`, \"fire\"]],\n             'system.attackBonus': `- @mod - @prof + ${summonerAttack}`,\n             },\n      }\n    }\n  }\n  },{\n    label: 'Yugoloth',\n    value: {\n      actor: { name: \"Yugoloth\" },\n      actor: {\n        'system.attributes.hp': { value: hpyu, max: hpyu }},\n      token: { name: \"Yugoloth\" },\n      embedded: {\n        Item: {\n          \"Devil's Sight (Devil Only)\": warpgate.CONST.DELETE,\n          \"Death Throes (Demon Only)\": warpgate.CONST.DELETE,\n          \"Bite (Demon Only)\": warpgate.CONST.DELETE,\n          \"Hurl Flame (Devil Only)\": warpgate.CONST.DELETE,\n          \"Claws (Yugoloth Only)\": {\n             'system.damage.parts': [[`1d8 + 3 + ${level}`, \"slashing\"]],\n             'system.attackBonus': `- @mod - @prof + ${summonerAttack}`,\n             },\n      }\n    }\n  }\n  }\n  ],\n  title: 'Which Fiend?'\n};\n\nconst celestial = await warpgate.buttonDialog(buttonData);\n\n\n\nconst callbacks = {\n    post: async (location, tokenDoc, updates, iteration) => {\n        await myEffectFunction(tokenDoc);\n    }\n}\n\n/* Craft the updates that are common to all celestials */\nconst updates = foundry.utils.mergeObject({\n  token: { \"displayName\": CONST.TOKEN_DISPLAY_MODES.HOVER },\n  actor: {\n    'system.details.cr': number,\n    'system.attributes.ac.natural': 12 + level,\n  },\n  embedded: {\n    Item: {\n      \"Multiattack\": {\n        name: `Multiattack (${Math.floor(level / 2)} attacks)`\n      },\n    }\n  }\n}, celestial);\nasync function preSpawn(location, updates, iteration) {\n   await new Sequence()\n    .effect()\n      .file(\"jb2a.divine_smite.caster.blueyellow\")\n      .atLocation(location)\n      .scaleToObject(3)\n      .waitUntilFinished(-500)\n      .fadeIn(100)\n    .effect()\n      .file(\"jb2a.explosion.blueyellow.0\")\n      .atLocation(location)\n      .scaleToObject(4)\n  .play()\n  }\n\n  await warpgate.spawn(\"Fiendish Spirit\", updates, {pre:preSpawn});","author":"Be8r6Sgxcs3sL08I","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"core":{"sourceId":"Item.Fq9M31siIQJ2qSYA"},"cf":{"id":"temp_6q1ztzxb2o4"}},"effects":[],"ownership":{"default":0,"Be8r6Sgxcs3sL08I":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.291","createdTime":1671301377331,"modifiedTime":1671326844537,"lastModifiedBy":"Be8r6Sgxcs3sL08I"},"folder":null,"sort":0,"_id":"2biaBQmZTkKSAhrl"}
{"name":"Wrathful Smite","type":"spell","img":"modules/plutonium/media/icon/spell/phb-wrathful-smite.webp","effects":[{"_id":"GJRQbsQVtQ5CJMe9","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro.Wrathful Smite","priority":20},{"key":"flags.midi-qol.wrathfulSmite.level","mode":5,"value":"1","priority":20},{"key":"flags.midi-qol.wrathfulDC.level","mode":0,"value":"@attributes.spelldc","priority":20}],"disabled":false,"duration":{"startTime":null,"rounds":10,"seconds":null,"combat":null,"turns":null,"startRound":null,"startTurn":null},"icon":"modules/plutonium/media/icon/spell/phb-wrathful-smite.webp","label":"Wrathful Smite","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":["1Hit:mwak","1Hit:rwak"],"transfer":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"origin":null}],"folder":null,"sort":0,"flags":{"srd5e":{"page":"spells.html","source":"PHB","hash":"wrathful%20smite_phb"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"onUseMacroName":"","effectActivation":false},"itemacro":{"macro":{"data":{"_id":null,"name":"Wrathful Smite","type":"script","author":"WpiVAovmlZrRTFMX","img":"icons/svg/dice-target.svg","scope":"global","command":"if (![\"mwak\"].includes(args[0].itemData.data.actionType)) return {}; // melee weapon attack\nconst uuid = game.user.targets.first().actor.uuid;\nconst targets = Array.from(game.user.targets);\nconst hasEffectApplied = game.dfreds.effectInterface.hasEffectApplied('Frightened', uuid);\nconst wait = async (ms) => new Promise((resolve)=> setTimeout(resolve, ms));\n\nfor (const target of targets) {\n\nif (target.actor.data.data.traits.ci.value.includes(\"frightened\")) {\n  \t\tui.notifications.info(\"Imune to Frightened!\");\n} else { \n\nawait game.MonksTokenBar.requestRoll(targets,{request:'save:wis', silent: true});\nawait wait(5000)\n\nconst listMessages = game.messages.contents\nconst lastMessage = listMessages[listMessages.length - 1];\nconst spellDC = actor.data.data.attributes.spelldc\nlet tokenid = 'token'+target.id;\nlet saveRoll = lastMessage.data.flags[\"monks-tokenbar\"][tokenid].total\n\nif (saveRoll < spellDC) {\nif (!hasEffectApplied) {\n  await game.dfreds.effectInterface.addEffect({ effectName: 'Frightened', uuid});\n  } \n}\n} }\n\n\nlet spellLevel = 1;\nif (args[0].isCritical) spellLevel = spellLevel * 2;\nreturn{damageRoll: `${spellLevel}d6[psychic]`, flavor: \"Wrathful Smite\"};","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.umH5y4Dyea4HzJbx"},"exportSource":{"world":"criador","system":"dnd5e","coreVersion":"0.8.8","systemVersion":"1.3.6"},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"playSaveAudio":false,"clip":"","volume":100}},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false,"autoFailFriendly":false,"offHandWeapon":false},"cf":{"id":"temp_lpjg4hxkuum"},"scene-packer":{"hash":"d36928938a5dc0512f0ecfe7bb288aa62d7ed943","sourceId":"Item.1pUyUwCxDuCvSIC3"},"rest-recovery":{"data":{"recovery":{"enabled":false}}}},"_id":"3F07GbctmyUhV72S","system":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>The next time you hit with a melee weapon attack during this spell's duration, your attack deals an extra [[/r 1d6]] psychic damage. Additionally, if the target is a creature, it must make a Wisdom saving throw or be <a href=\"https://5e.tools/conditionsdiseases.html#frightened_phb\" data-plut-hover=\"{&quot;page&quot;:&quot;conditionsdiseases.html&quot;,&quot;source&quot;:&quot;PHB&quot;,&quot;hash&quot;:&quot;frightened_phb&quot;}\">frightened</a> of you until the spell ends. As an action, the creature can make a Wisdom check against your spell save DC to steel its resolve and end this spell.</p><div class=\"rd__spc-inline-post\"></div></div>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"0","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":1,"school":"evo","components":{"value":"","vocal":true,"somatic":false,"material":false,"ritual":false,"concentration":true},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"none","formula":""},"attunement":0},"ownership":{"default":0,"WpiVAovmlZrRTFMX":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.291","createdTime":null,"modifiedTime":1671422781302,"lastModifiedBy":"Be8r6Sgxcs3sL08I"}}
{"_id":"4JGyAK3LM4Seqgeg","name":"Thunderous Smite","type":"spell","img":"modules/GMmacros/img/phb-thunderous-smite.jpg","effects":[{"_id":"rZnn6dJ2qCXaajTU","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro.Thunderous Smite","priority":20},{"key":"flags.midi-qol.thunderousSmite.level","mode":5,"value":"2","priority":20},{"key":"flags.midi-qol.thunderousDC.level","mode":0,"value":"@attributes.spelldc","priority":20}],"disabled":false,"duration":{"startTime":null,"rounds":10,"seconds":null,"combat":null,"turns":null,"startRound":null,"startTurn":null},"icon":"modules/plutonium/media/icon/spell/phb-thunderous-smite.webp","label":"Thunderous Smite","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":["1Hit:mwak","1Hit:rwak"],"transfer":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"origin":null}],"folder":null,"sort":0,"flags":{"srd5e":{"page":"spells.html","source":"PHB","hash":"thunderous%20smite_phb"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"onUseMacroName":"","effectActivation":false},"itemacro":{"macro":{"data":{"_id":null,"name":"Thunderous Smite","type":"script","author":"WpiVAovmlZrRTFMX","img":"icons/svg/dice-target.svg","scope":"global","command":"if (![\"mwak\"].includes(args[0].itemData.data.actionType)) return {}; // melee weapon attack\nconst uuid = game.user.targets.first().actor.uuid;\nconst targett = game.user.targets.first();\nconst targets = Array.from(game.user.targets);\nconst hasEffectApplied = game.dfreds.effectInterface.hasEffectApplied('Prone', uuid);\nconst wait = async (ms) => new Promise((resolve)=> setTimeout(resolve, ms));\n\nfor (const target of targets) {\n\nif (target.actor.data.data.traits.ci.value.includes(\"prone\")) {\n  \t\tui.notifications.info(\"Imune to Prone!\");\n} else { \n\nawait game.MonksTokenBar.requestRoll(targets,{request:'save:str', silent: true});\nawait wait(5000)\n\nconst listMessages = game.messages.contents\nconst lastMessage = listMessages[listMessages.length - 1];\nconst spellDC = actor.data.data.attributes.spelldc\nlet tokenid = 'token'+target.id;\nlet saveRoll = lastMessage.data.flags[\"monks-tokenbar\"][tokenid].total\n\nif (saveRoll < spellDC) {\nif (!hasEffectApplied) {\n  await game.dfreds.effectInterface.addEffect({ effectName: 'Prone', uuid});\n  } \n}\n} }\n\nawait canvas.tokens.moveMany({dx:(targett.data.x/canvas.grid.size-token.data.x/canvas.grid.size)*2, dy:(targett.data.y/canvas.grid.size-token.data.y/canvas.grid.size)*2, ids: [targett.id]});\nlet spellLevel = 2;\nif (args[0].isCritical) spellLevel = spellLevel * 2;\nreturn{damageRoll: `${spellLevel}d6[thunder]`, flavor: \"Thunderous Smite\"};","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.y4OxsSifV43KWiLH"},"exportSource":{"world":"criador","system":"dnd5e","coreVersion":"0.8.8","systemVersion":"1.3.6"},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"playSaveAudio":false,"clip":"","volume":100}},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"cf":{"id":"temp_lpjg4hxkuum"},"scene-packer":{"hash":"9a9b1d4d626e8812924128103e0e40ad7ef665af","sourceId":"Item.LJ3KhMRxWEWbpxRc"},"rest-recovery":{"data":{"recovery":{"enabled":false}}}},"system":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>The first time you hit with a melee weapon attack during this spell's duration, your weapon rings with thunder that is audible within 300 feet of you, and the attack deals an extra [[/r 2d6]] thunder damage to the target. Additionally, if the target is a creature, it must succeed on a Strength saving throw or be pushed 10 feet away from you and knocked <a href=\"https://5e.tools/conditionsdiseases.html#prone_phb\" data-plut-hover=\"{&quot;page&quot;:&quot;conditionsdiseases.html&quot;,&quot;source&quot;:&quot;PHB&quot;,&quot;hash&quot;:&quot;prone_phb&quot;}\">prone</a>.</p><div class=\"rd__spc-inline-post\"></div></div>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"0","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":1,"school":"evo","components":{"value":"","vocal":true,"somatic":false,"material":false,"ritual":false,"concentration":true},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"none","formula":""},"attunement":0},"ownership":{"default":0,"WpiVAovmlZrRTFMX":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.290","createdTime":null,"modifiedTime":1668383305069,"lastModifiedBy":"Be8r6Sgxcs3sL08I"}}
{"name":"#[CF_tempEntity]","type":"weapon","flags":{"cf":{"id":"temp_5lmql55efox","name":"Magias_premades_chris","color":"#eb3737","fontColor":"#FFFFFF","icon":"","sorting":"m","contents":["GL9S0BF4RAAywt6R"],"children":[]}},"img":"icons/svg/item-bag.svg","system":{"description":{"value":"","chat":"","unidentified":""},"source":"","quantity":1,"weight":0,"price":{"value":0,"denomination":"gp"},"attunement":0,"equipped":false,"rarity":"","identified":true,"activation":{"type":"","cost":null,"condition":""},"duration":{"value":"","units":""},"cover":null,"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null,"recovery":""},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":null,"attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"armor":{"value":null},"hp":{"value":null,"max":null,"dt":null,"conditions":""},"weaponType":"simpleM","baseItem":"","properties":{},"proficient":true},"effects":[],"folder":null,"sort":0,"ownership":{"default":0,"Be8r6Sgxcs3sL08I":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1684720027226,"modifiedTime":1684720030086,"lastModifiedBy":"Be8r6Sgxcs3sL08I"},"_id":"4Vkemr2SHGDR7EML"}
{"name":"Summon Draconic Spirit","type":"spell","system":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>You call forth a @creature[draconic spirit|FTD]. It manifests in an unoccupied space that you can see within range. This corporeal form uses the Draconic Spirit stat block. When you cast this spell, choose a family of dragon: chromatic, gem, or metallic. The creature resembles a dragon of the chosen family, which determines certain traits in its stat block. The creature disappears when it drops to 0 hit points or when the spell ends.</p><div class=\"rd__spc-inline-post\"></div><p>The creature is an ally to you and your companions. In combat, the creature shares your initiative count, but it takes its turn immediately after yours. It obeys your verbal commands (no action required by you). If you don't issue any, it takes the @action[Dodge] action and uses its move to avoid danger.</p></div><div class=\"rd__b  rd__b--3\"><div class=\"rd__b  rd__b--3\"><span class=\"rd__h rd__h--3\" data-title-index=\"2\"> <span class=\"entry-title-inner\">At Higher Levels.</span></span> <p>When you cast this spell using a spell slot of 6th level or higher, use the higher level wherever the spell's level appears in the stat block.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__spc-inline-post\"></div></div>","chat":"","unidentified":""},"source":"FTD","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"hour"},"target":{"value":0,"width":null,"units":"","type":""},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":null,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":5,"school":"con","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":true},"materials":{"value":"an object with the image of a dragon engraved on it, worth at least 500 gp","consumed":false,"cost":500,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"none","formula":""}},"img":"icons/magic/unholy/silhouette-evil-horned-giant.webp","flags":{"plutonium":{"page":"spells.html","source":"FTD","hash":"summon%20draconic%20spirit_ftd","propDroppable":"spell"},"rest-recovery":{"data":{"recovery":{"enabled":false}}},"midi-qol":{"effectActivation":false,"onUseMacroName":"[postActiveEffects]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"itemacro":{"macro":{"name":"Summon Draconic Spirit","type":"script","scope":"global","command":"const item = actor.items.getName(\"Summon Draconic Spirit\");\nconst [{spellLevel: level}] = args;\nconst multiatk = Math.floor(level/2)\nconst summonerDc = actor.system.attributes.spelldc;\nconst summonerAttack = summonerDc - 8;\nconst hp = 50 + 10 * (level - 5);\nconst sourceActor = token?.actor ?? game.user.character;\nconst number = sourceActor.getRollData().details.level;\n\n/* Prompt the user for which type of celestial to summon */\nconst buttonData = {\n  buttons: [{\n    label: 'Chromatic Dragon',\n    value: {\n      token: { name: \"Chromatic Dragon\" },\n      actor: { name: \"Chromatic Dragon\" },\n      actor: {\n        'system.attributes.hp': { value: hp, max: hp }},\n      embedded: {\n        Item: {\n          \"Damage Resistances(Gem Only)\": warpgate.CONST.DELETE,\n          \"Force Breath\": warpgate.CONST.DELETE,\n          \"Necrotic Breath\": warpgate.CONST.DELETE,\n          \"Psych Breath\": warpgate.CONST.DELETE,\n          \"Radiant Breath\": warpgate.CONST.DELETE,\n          \"Thunder Breath\": warpgate.CONST.DELETE,\n          \"Rend\": {\n             'system.damage.parts': [[`1d6 + 4 + ${level}`, \"bludgeoning\"]],\n             'system.attackBonus': `- @mod - @prof + ${summonerAttack}`,\n             },\n          \"Acid Breath\": {\n\t\t'system.save': {'dc': `${summonerDc}`}},\n          \"Cold Breath\": {\n\t\t'system.save': {'dc': `${summonerDc}`}},\n          \"Fire Breath\": {\n\t\t'system.save': {'dc': `${summonerDc}`}},\n          \"Lightning Breath\":  {\n\t\t'system.save': {'dc': `${summonerDc}`}},\n          \"Poison Breath\": {\n\t\t'system.save': {'dc': `${summonerDc}`}},\n        }\n      }\n    }\n  }, {\n    label: 'Gem Dragon',\n    value: {\n      token: { name: \"Gem Dragon\" },\n      actor: { name: \"Gem Dragon\" },\n      actor: {\n        'system.attributes.hp': { value: hp, max: hp }},\n      embedded: {\n        Item: {\n          \"Acid Breath\": warpgate.CONST.DELETE,\n          \"Cold Breath\": warpgate.CONST.DELETE,\n          \"Fire Breath\": warpgate.CONST.DELETE,\n          \"Lightning Breath\": warpgate.CONST.DELETE,\n          \"Poison Breath\": warpgate.CONST.DELETE,\n          \"Rend\": {\n             'system.damage.parts': [[`1d6 + 4 + ${level}`, \"bludgeoning\"]],\n             'system.attackBonus': `- @mod - @prof + ${summonerAttack}`,\n             },\n          \"Force Breath\": {\n\t\t'system.save': {'dc': `${summonerDc}`}},\n          \"Necrotic Breath\": {\n\t\t'system.save': {'dc': `${summonerDc}`}},\n          \"Psych Breath\": {\n\t\t'system.save': {'dc': `${summonerDc}`}},\n          \"Radiant Breath\":  {\n\t\t'system.save': {'dc': `${summonerDc}`}},\n          \"Thunder Breath\": {\n\t\t'system.save': {'dc': `${summonerDc}`}},\n        }\n      }\n    }\n  },{\n    label: 'Metallic Dragon',\n    value: {\n      actor: { name: \"Metallic Dragon\" },\n      actor: {\n        'system.attributes.hp': { value: hp, max: hp }},\n      token: { name: \"Metallic Dragon\" },\n      embedded: {\n        Item: {\n          \"Damage Resistances(Gem Only)\": warpgate.CONST.DELETE,\n          \"Force Breath\": warpgate.CONST.DELETE,\n          \"Necrotic Breath\": warpgate.CONST.DELETE,\n          \"Psych Breath\": warpgate.CONST.DELETE,\n          \"Radiant Breath\": warpgate.CONST.DELETE,\n          \"Thunder Breath\": warpgate.CONST.DELETE,\n          \"Rend\": {\n             'system.damage.parts': [[`1d6 + 4 + ${level}`, \"bludgeoning\"]],\n             'system.attackBonus': `- @mod - @prof + ${summonerAttack}`,\n             },\n          \"Acid Breath\": {\n\t\t'system.save': {'dc': `${summonerDc}`}},\n          \"Cold Breath\": {\n\t\t'system.save': {'dc': `${summonerDc}`}},\n          \"Fire Breath\": {\n\t\t'system.save': {'dc': `${summonerDc}`}},\n          \"Lightning Breath\":  {\n\t\t'system.save': {'dc': `${summonerDc}`}},\n          \"Poison Breath\": {\n\t\t'system.save': {'dc': `${summonerDc}`}},\n        }\n      }\n    }\n  }\n  ],\n  title: 'Which Dragon?'\n};\n\nconst celestial = await warpgate.buttonDialog(buttonData);\n\nconst callbacks = {\n    post: async (location, tokenDoc, updates, iteration) => {\n        await myEffectFunction(tokenDoc);\n    }\n}\n\n/* Craft the updates that are common to all celestials */\nconst updates = foundry.utils.mergeObject({\n  token: { \"displayName\": CONST.TOKEN_DISPLAY_MODES.HOVER },\n  actor: {\n    'system.attributes.ac.natural': 14 + level,\n    'system.details.cr': number,\n  },\n  embedded: {\n    Item: {\n      \"Multiattack\": {\n        name: `${multiatk}x Multiattack`\n\t},\n      },\n    }\n }, celestial);\nasync function preSpawn(location, updates, iteration) {\n   await new Sequence()\n    .effect()\n      .file(\"jb2a.divine_smite.caster.blueyellow\")\n      .atLocation(location)\n      .scaleToObject(3)\n      .waitUntilFinished(-500)\n      .fadeIn(100)\n    .effect()\n      .file(\"jb2a.explosion.blueyellow.0\")\n      .atLocation(location)\n      .scaleToObject(4)\n  .play()\n  }\n\n  await warpgate.spawn(\"Draconic Spirit\", updates, {pre:preSpawn});","author":"Be8r6Sgxcs3sL08I","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"core":{"sourceId":"Item.vWtwhe3cA55PF7tb"},"cf":{"id":"temp_6q1ztzxb2o4"}},"effects":[],"ownership":{"default":0,"Be8r6Sgxcs3sL08I":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.291","createdTime":1671301376948,"modifiedTime":1671322931790,"lastModifiedBy":"Be8r6Sgxcs3sL08I"},"folder":null,"sort":0,"_id":"4WGIAGrMAQCxKNqw"}
{"name":"Blinding Smite","type":"spell","img":"modules/GMmacros/img/phb-blinding-smite.webp","data":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>The next time you hit a creature with a melee weapon attack during this spell's duration, your weapon flares with bright light, and the attack deals an extra [[/r 3d8]] radiant damage to the target. Additionally, the target must succeed on a Constitution saving throw or be <a href=\"https://5e.tools/conditionsdiseases.html#blinded_phb\" data-plut-hover=\"{&quot;page&quot;:&quot;conditionsdiseases.html&quot;,&quot;source&quot;:&quot;PHB&quot;,&quot;hash&quot;:&quot;blinded_phb&quot;}\">blinded</a> until the spell ends.</p><div class=\"rd__spc-inline-post\"></div><p>A creature <a href=\"https://5e.tools/conditionsdiseases.html#blinded_phb\" data-plut-hover=\"{&quot;page&quot;:&quot;conditionsdiseases.html&quot;,&quot;source&quot;:&quot;PHB&quot;,&quot;hash&quot;:&quot;blinded_phb&quot;}\">blinded</a> by this spell makes another Constitution saving throw at the end of each of its turns. On a successful save, it is no longer <a href=\"https://5e.tools/conditionsdiseases.html#blinded_phb\" data-plut-hover=\"{&quot;page&quot;:&quot;conditionsdiseases.html&quot;,&quot;source&quot;:&quot;PHB&quot;,&quot;hash&quot;:&quot;blinded_phb&quot;}\">blinded</a>.</p></div>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":3,"school":"evo","components":{"value":"","vocal":true,"somatic":false,"material":false,"ritual":false,"concentration":true},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"none","formula":""},"attunement":0},"effects":[{"_id":"bUvjVVw3euakm0xu","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro.Blinding Smite","priority":"20"},{"key":"flags.midi-qol.blindingDC.level","mode":0,"value":"@attributes.spelldc","priority":"20"},{"key":"flags.midi-qol.blindingSmite.level","mode":0,"value":"3","priority":"20"}],"disabled":false,"duration":{"startTime":null,"rounds":10},"icon":"modules/plutonium/media/icon/spell/phb-blinding-smite.webp","label":"Blinding Smite","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":["1Hit:mwak","1Hit:rwak"],"transfer":false,"durationExpression":""},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false,"displayTemp":false},"core":{"statusId":""},"dnd5e-helpers":{"rest-effect":"Ignore"}},"tint":null,"selectedKey":["flags.dnd5e.DamageBonusMacro","__","__"]}],"folder":null,"sort":0,"permission":{"default":0,"WpiVAovmlZrRTFMX":3},"flags":{"srd5e":{"page":"spells.html","source":"PHB","hash":"blinding%20smite_phb"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"onUseMacroName":"","effectActivation":false},"itemacro":{"macro":{"data":{"_id":null,"name":"Blinding Smite","type":"script","author":"WpiVAovmlZrRTFMX","img":"icons/svg/dice-target.svg","scope":"global","command":"if (![\"mwak\"].includes(args[0].itemData.data.actionType)) return {}; // melee weapon attack\nconst uuid = game.user.targets.first().actor.uuid;\nconst targets = Array.from(game.user.targets);\nconst hasEffectApplied = game.dfreds.effectInterface.hasEffectApplied('Blinded', uuid);\nconst wait = async (ms) => new Promise((resolve)=> setTimeout(resolve, ms));\nconst spldc = actor.data.data.attributes.spelldc\n\nlet bsEffect = new ActiveEffect({label: \"Blinding Smite\", icon: \"modules/GMmacros/img/phb-blinding-smite.webp\", changes: [{value: `turn=end,saveDC=${spldc},saveAbility=con,label=Blinding Smite`, mode: CONST.ACTIVE_EFFECT_MODES.CUSTOM, priority: 20, key:\"flags.midi-qol.OverTime\"},{value: 1, mode:CONST.ACTIVE_EFFECT_MODES.ADD, priority: 20, key:\"flags.midi-qol.disadvantage.attack.all\"},{value: 1, mode:CONST.ACTIVE_EFFECT_MODES.ADD, priority: 20, key:\"flags.midi-qol.grants.advantage.attack.all\"}], duration: {seconds: 60}});\n\n\nfor (const target of targets) {\nif (target.actor.data.data.traits.ci.value.includes(\"blinded\")) {\n  \t\tui.notifications.info(\"Imune to Blind!\");\n} else { \n\nawait game.MonksTokenBar.requestRoll(targets,{request:'save:con', silent: true});\nawait wait(5000)\n\nconst listMessages = game.messages.contents\nconst lastMessage = listMessages[listMessages.length - 1];\nconst spellDC = actor.data.data.attributes.spelldc\nlet tokenid = 'token'+target.id;\nlet saveRoll = lastMessage.data.flags[\"monks-tokenbar\"][tokenid].total\n\nif (saveRoll < spellDC) {\nif (!hasEffectApplied) {\n  for (let tokenUuid of args[0].hitTargetUuids) {\n        const target = await fromUuid(tokenUuid);\n        const targetActor = target.actor;\n        if (!targetActor) continue;\n        await MidiQOL.socket().executeAsGM(\"createEffects\", {actorUuid: targetActor.uuid, effects: [bsEffect.toObject()]})\n} // for\n} // if has\n} // if save\n} // else\n} // for target\n\n\nlet spellLevel = 3;\nif (args[0].isCritical) spellLevel = spellLevel * 2;\nreturn{damageRoll: `${spellLevel}d8[radiant]`, flavor: \"Blinding Smite\"};","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.rf69h6xNdtAnObgs"},"exportSource":{"world":"criador","system":"dnd5e","coreVersion":"0.8.8","systemVersion":"1.3.6"},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"playSaveAudio":false,"clip":"","volume":100}},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"cf":{"id":"temp_lpjg4hxkuum"},"scene-packer":{"hash":"eb9e70407027add56d9d8a4ff17616d7ad628f7b","sourceId":"Item.IvQefmPblsJAvuPP"}},"_id":"5jTk9lMZbFDaS8mG"}
{"name":"Hex","type":"spell","system":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>You place a curse on a creature that you can see within range. Until the spell ends, you deal an extra [[/r 1d6]] necrotic damage to the target whenever you hit it with an attack. Also, choose one ability when you cast the spell. The target has disadvantage on ability checks made with the chosen ability.</p><div class=\"rd__spc-inline-post\"></div><p>If the target drops to 0 hit points before this spell ends, you can use a bonus action on a subsequent turn of yours to curse a new creature.</p><p>A @spell[remove curse] cast on the target ends this spell early.</p></div><div class=\"rd__b  rd__b--3\"><div class=\"rd__b  rd__b--3\"><span class=\"rd__h rd__h--3\" data-title-index=\"65\"> <span class=\"entry-title-inner\">At Higher Levels.</span></span> <p>When you cast this spell using a spell slot of 3rd or 4th level, you can maintain your concentration on the spell for up to 8 hours. When you use a spell slot of 5th level or higher, you can maintain your concentration on the spell for up to 24 hours.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__spc-inline-post\"></div></div>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"hour"},"target":{"value":0,"width":null,"units":"","type":"creature"},"range":{"value":90,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":null,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":1,"school":"enc","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":true},"materials":{"value":"the petrified eye of a newt","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"none","formula":""}},"img":"icons/magic/control/voodoo-doll-pain-damage-red.webp","flags":{"plutonium":{"page":"spells.html","source":"PHB","hash":"hex_phb","propDroppable":"spell"},"itemacro":{"macro":{"name":"Hex","type":"script","scope":"global","command":"const version = \"10.0.10\";\ntry {\n\tif (actor.flags?.dae?.onUpdateTarget && args[0].hitTargets.length > 0) {\n\tconst isMarked = actor.flags.dae.onUpdateTarget.find(flag => \n\t\t\tflag.flagName === \"Hex\" && flag.sourceTokenUuid === args[0].hitTargetUuids[0]);\n\tif (isMarked) {\n\t        let damageType = args[0].item.system.damage.parts[0][1];\n\t        const diceMult = args[0].isCritical ? 2: 1;\n\t        return {damageRoll: `${diceMult}d6[necrotic]`, flavor: \"Hex\"};\n\t}\t\n}\nreturn {};\n} catch (err) {\n\t    console.error(`${args[0].itemData.name} - Hex ${version}`, err);\n\t\treturn {}\n}","author":"Be8r6Sgxcs3sL08I","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"rest-recovery":{"data":{"recovery":{"enabled":false}}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"core":{"sourceId":"Actor.l17Codzmb868P2e7.Item.ESR4e9bhBwpEF38l"},"cf":{"id":"temp_6q1ztzxb2o4"}},"effects":[{"label":"Hex","icon":"icons/magic/control/voodoo-doll-pain-damage-red.webp","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro","priority":20}],"transfer":true,"_id":"6GBt0klUMbj7pdu0","disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"origin":null,"tint":null,"flags":{"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}},{"label":"Hex","icon":"icons/magic/control/voodoo-doll-pain-damage-red.webp","changes":[{"key":"flags.dae.onUpdateSource","mode":0,"value":"Hex","priority":20}],"transfer":false,"_id":"0ZjraMDyURYU0T9t","disabled":false,"duration":{"startTime":null,"seconds":3600,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"origin":null,"tint":null,"flags":{"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"ownership":{"default":0,"QEGPFkVbwvqQv8sl":3,"Be8r6Sgxcs3sL08I":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.290","createdTime":1669603610917,"modifiedTime":1670001268668,"lastModifiedBy":"Be8r6Sgxcs3sL08I"},"folder":null,"sort":0,"_id":"7LHvzm1F8aJpLzbf"}
{"_id":"BvU3MCmn58F6dTd8","name":"Gift of Alacrity","type":"spell","img":"modules/plutonium/media/icon/spell/egw-gift-of-alacrity.webp","effects":[{"_id":"OwMoEzA7O4KTf5hq","changes":[{"key":"system.attributes.init.mod","mode":2,"value":"1d8","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"modules/plutonium/media/icon/spell/egw-gift-of-alacrity.webp","label":"Gift of Alacrity","transfer":false,"flags":{"dae":{"stackable":false,"macroRepeat":"none","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"origin":null}],"folder":null,"sort":0,"flags":{"srd5e":{"page":"spells.html","source":"EGW","hash":"gift%20of%20alacrity_egw"},"core":{"sourceId":"Item.cDZVJXsJjGY7F6P4"},"midi-qol":{"onUseMacroName":"","effectActivation":false},"autoanimations":{"killAnim":false,"override":false,"animType":"t1","animName":"","bards":{"bardAnim":"a1","bardTarget":true,"bardTargetAnim":"a1","bardTargetColor":"a1","bardSelf":true,"marker":true,"markerColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","hmAnim":"a1","color":"n1","spellOptions":{"spellLoops":1},"uaStrikeType":"physical","dtvar":"dt1","divineSmite":{"dsEnable":false,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"a1"},"explosion":false,"explodeVariant":"ev1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":0.25},"item":{"enableAudio":false,"file":"","delay":100,"volume":0.25}},"selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"teleDist":30,"animLevel":false,"rangedOptions":{"rangeDmgType":""},"exAnimLevel":false,"impactVar":"a1","templates":{"tempType":"a1","tempAnim":"","tempColor":"","tempLoop":1,"customAnim":false,"customPath":""}},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"rest-recovery":{"data":{"recovery":{"enabled":false}}},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"cf":{"id":"temp_lpjg4hxkuum"}},"system":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>You touch a willing creature. For the duration, the target can add [[/r 1d8]] to its initiative rolls.</p><div class=\"rd__spc-inline-post\"></div></div>","chat":"","unidentified":""},"source":"EGW","activation":{"type":"minute","cost":1,"condition":""},"duration":{"value":8,"units":"hour"},"target":{"value":null,"width":null,"units":"touch","type":""},"range":{"value":null,"long":null,"units":"touch"},"uses":{"value":0,"max":"1","per":"lr","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"cha","actionType":"util","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"1d8","save":{"ability":"","dc":null,"scaling":"cha"},"level":1,"school":"div","components":{"value":"","vocal":true,"somatic":true,"material":false,"ritual":false,"concentration":false},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"innate","prepared":true},"scaling":{"mode":"none","formula":""}},"ownership":{"default":0,"XaHraXd0L5EoLNNo":3,"05k4ub2VgC3VLxAg":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.290","createdTime":null,"modifiedTime":1668439902817,"lastModifiedBy":"Be8r6Sgxcs3sL08I"}}
{"name":"Branding Smite","type":"spell","img":"modules/GMmacros/img/phb-branding-smite.jpg","effects":[{"_id":"6hAZJkE4UfjO7Adp","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro.Branding Smite","priority":20},{"key":"flags.midi-qol.brandingSmite.level","mode":5,"value":"@item.level","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"systems/dnd5e/icons/spells/enchant-orange-2.jpg","label":"Branding Smite","origin":"Compendium.midi-qol.midiqol-sample-items.dlP9fWGo3ggfkOfm","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":["1Hit:mwak","1Hit:rwak"],"transfer":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null}],"flags":{"midi-qol":{"onUseMacroName":"","effectActivation":false},"autoanimations":{"killAnim":false,"animLevel":false,"override":false,"animType":"t1","animName":"","bards":{"bardAnim":"a1","bardTarget":true,"bardTargetAnim":"a1","bardTargetColor":"a1","bardSelf":true,"marker":true,"markerColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","hmAnim":"a1","rangedOptions":{"rangeDmgType":""},"color":"n1","spellOptions":{"spellLoops":1},"uaStrikeType":"physical","dtvar":"dt1","divineSmite":{"dsEnable":false,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"a1"},"explosion":false,"exAnimLevel":false,"explodeVariant":"ev1","impactVar":"a1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":0.25},"item":{"enableAudio":false,"file":"","delay":100,"volume":0.25}},"selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"teleDist":30,"templates":{"tempType":"a1","tempAnim":"","tempColor":"","tempLoop":1,"customAnim":false,"customPath":""}},"core":{"sourceId":"Item.Z2bmzJrSSmIZdOFp"},"itemacro":{"macro":{"data":{"_id":null,"name":"Branding Smite","type":"script","author":"WpiVAovmlZrRTFMX","img":"icons/svg/dice-target.svg","scope":"global","command":"// v1.0. Requires midi-qol and ATL.\nconst version = \"0.9.52\";\ntry {\n    if (![\"mwak\",\"rwak\"].includes(args[0].item.data.actionType)) return {}; \n    if (args[0].hitTargetUuids.length === 0) return {}; // did not hit anyone\n    for (let tokenUuid of args[0].hitTargetUuids) {\n        const target = await fromUuid(tokenUuid);\n        const targetActor = target.actor;\n        if (!targetActor) continue;\n        // remvoe the invisible condition\n        const effect = targetActor?.effects.find(ef=> ef.data.label===game.i18n.localize(\"midi-qol.invisible\"));\n        if (effect) await MidiQOL.socket().executeAsGM(\"removeEffects\", {actorUuid: targetActor.uuid, effects:[effect.id]});\n        // create the dim light effect on the target\n        let bsEffect = new ActiveEffect({label: \"Branding Smite\", icon: \"systems/dnd5e/icons/spells/enchant-orange-2.jpg\", changes: [{value: 5, mode: CONST.ACTIVE_EFFECT_MODES.UPGRADE, priority: 20, key:\"ATL.dimLight\"}], duration: {seconds: 60}});\n        // 60 seconds is wrong - should look for the branding smite effect and use the remaining duration - but hey\n    \n        await MidiQOL.socket().executeAsGM(\"createEffects\", {actorUuid: targetActor.uuid, effects: [bsEffect.toObject()]})\n    }\n    Hooks.once(\"midi-qol.RollComplete\", (workflow) => {\n        console.log(\"Deleting concentration\")\n        const effect = MidiQOL.getConcentrationEffect(actor);\n        if (effect) effect.delete();\n        return true;\n    })\n    const spellLevel = actor.data.flags[\"midi-qol\"].brandingSmite.level;\nif (args[0].isCritical) spellLevel = spellLevel * 2;\n    return{damageRoll: `${spellLevel}d6[radiant]`, flavor: \"Branding Smite\"}\n} catch (err) {\n    console.error(`${args[0].itemData.name} - Branding Smite ${version}`, err);\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"cf":{"id":"temp_lpjg4hxkuum","color":"#000000"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false,"autoFailFriendly":false,"offHandWeapon":false},"scene-packer":{"hash":"902f6a95a05b11465dc3f1a0cf5e2f8a0445a0fc","sourceId":"Item.b1HbUoS7lpwkn3cJ"},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"playSaveAudio":false,"clip":"","volume":100}},"rest-recovery":{"data":{"recovery":{"enabled":false}}}},"system":{"description":{"value":"<p>The next time you hit a creature with a weapon attack before this spell ends, the weapon gleams with astral radiance as you strike. The attack deals an extra 2d6 radiant damage to the target, which becomes visible if it's invisible, and the target sheds dim light in a 5-foot radius and can't become invisible until the spell ends.</p>\n<p><strong>At Higher Levels.</strong> When you cast this spell using a spell slot of 3rd level or higher, the extra damage increases by 1d6 for each slot level above 2nd.</p>\n<p>Midi-qol: Rename to Branding Smite when equipping on an actor.</p>","chat":"","unidentified":""},"source":"PHB pg. 219","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"0","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"level":2,"school":"evo","components":{"value":"","vocal":true,"somatic":false,"material":false,"ritual":false,"concentration":true},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"level","formula":"1d6"},"attributes":{"spelldc":10}},"ownership":{"default":0,"WpiVAovmlZrRTFMX":3,"Be8r6Sgxcs3sL08I":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.291","createdTime":1668365303135,"modifiedTime":1671422766879,"lastModifiedBy":"Be8r6Sgxcs3sL08I"},"folder":null,"sort":0,"_id":"C5NTNyJqIpvceE04"}
{"_id":"EPHJ7sWdZ261mMWZ","name":"#[CF_tempEntity]","type":"weapon","img":"icons/svg/item-bag.svg","effects":[],"folder":null,"sort":0,"flags":{"cf":{"id":"temp_lpjg4hxkuum","folderPath":[],"color":"#3b67ce","fontColor":"#FFFFFF","name":"Magias-AE","children":[],"icon":"","contents":["aB23YkFsI94D2cGu","lPp5ru8rQbrI48yz","5jTk9lMZbFDaS8mG","C5NTNyJqIpvceE04","hJtxGFRQtTrzrnHd","eUs1fgUWJjnGBORK","WYIejkhD1fDmE9cI","Z1R54lhVCtYLvPjs","z6fVJ1qxhuuTsorE","teAxDaqg2FQYxMbz","4JGyAK3LM4Seqgeg","TGL4z244vlkKeZva","3F07GbctmyUhV72S","BvU3MCmn58F6dTd8","QPc95ukgFgXAmIKP","OU9Hofvwzt57gxQe"],"sorting":"a","version":"2.5.5"}},"system":{"description":{"value":"","chat":"","unidentified":""},"source":"","quantity":1,"weight":0,"price":0,"attunement":0,"equipped":false,"rarity":"","identified":true,"activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"cover":null,"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null,"recovery":""},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":null,"attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"weaponType":"simpleM","baseItem":"","properties":{},"proficient":true},"ownership":{"default":0,"QwT9izJ4aW8QVTjo":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":null,"modifiedTime":1684719976126,"lastModifiedBy":"Be8r6Sgxcs3sL08I"}}
{"name":"Levitate","type":"spell","img":"modules/GMmacros/img/phb-levitate.webp","effects":[{"_id":"9rwdSxFSfv6oDrvY","changes":[{"key":"macro.itemMacro","mode":0,"value":"","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"modules/plutonium/media/icon/spell/phb-levitate.webp","label":"Levitate","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":false},"dnd5e-helpers":{"rest-effect":"Ignore"},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"origin":null}],"folder":null,"sort":0,"flags":{"srd5e":{"page":"spells.html","source":"PHB","hash":"levitate_phb"},"midi-qol":{"onUseMacroName":"","effectActivation":false},"autoanimations":{"killAnim":false,"animLevel":false,"override":false,"animType":"t1","animName":"","bards":{"bardAnim":"a1","bardTarget":true,"bardTargetAnim":"a1","bardTargetColor":"a1","bardSelf":true,"marker":true,"markerColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","hmAnim":"a1","color":"n1","spellOptions":{"spellLoops":1},"uaStrikeType":"physical","dtvar":"dt1","divineSmite":{"dsEnable":false,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"a1"},"explosion":false,"exAnimLevel":false,"explodeVariant":"ev1","impactVar":"a1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":0.25},"item":{"enableAudio":false,"file":"","delay":100,"volume":0.25}},"selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"teleDist":30,"templates":{"tempType":"a1","tempAnim":"","tempColor":"","tempLoop":1,"customAnim":false,"customPath":""}},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"clip":"","volume":100}},"core":{"sourceId":"Item.eK3E5SyLzarUd7Nl"},"itemacro":{"macro":{"data":{"_id":null,"name":"Levitate","type":"script","author":"QwT9izJ4aW8QVTjo","img":"icons/svg/dice-target.svg","scope":"global","command":"//DAE Item Macro, no arguments passed\nif (!game.modules.get(\"advanced-macros\")?.active) ui.notifications.error(\"Please enable the Advanced Macros module\")\nconst lastArg = args[args.length - 1];\nlet tactor;\nconst target = canvas.tokens.get(lastArg.tokenId)\n\nif (args[0] === \"on\") {\n    ChatMessage.create({ content: `${target.name} is levitated 20ft` });\n    target.update({ \"elevation\": 20 });\n}\nif (args[0] === \"off\") {\n    target.update({\"elevation\": 0 });\n    ChatMessage.create({ content: `${target.name} is returned to the ground` });\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"rest-recovery":{"data":{"recovery":{"enabled":false}}},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"cf":{"id":"temp_6q1ztzxb2o4"}},"_id":"F6j4KmRGUvKWZ9kI","system":{"description":{"value":"<div class=\"rd__b  rd__b--3\">\n<p>One creature or loose object of your choice that you can see within range rises vertically, up to 20 feet, and remains suspended there for the duration. The spell can levitate a target that weighs up to 500 pounds (227kg). An unwilling creature that succeeds on a Constitution saving throw is unaffected.</p>\n<div class=\"rd__spc-inline-post\"></div>\n<p>The target can move only by pushing or pulling against a fixed object or surface within reach (such as a wall or a ceiling), which allows it to move as if it were climbing. You can change the target's altitude by up to 20 feet in either direction on your turn. If you are the target, you can move up or down as part of your move. Otherwise, you can use your action to move the target, which must remain within the spell's range.</p>\n<p>When the spell ends, the target floats gently to the ground if it is still aloft.</p>\n</div>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":10,"units":"minute"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":0,"max":"0","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"save","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"con","dc":null,"scaling":"spell"},"level":2,"school":"trs","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":true},"materials":{"value":"either a small leather loop or a piece of golden wire bent into a cup shape with a long shank on one end","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"always","prepared":true},"scaling":{"mode":"none","formula":""}},"ownership":{"default":0,"QwT9izJ4aW8QVTjo":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.290","createdTime":null,"modifiedTime":1668440009567,"lastModifiedBy":"Be8r6Sgxcs3sL08I"}}
{"type":"spell","system":{"description":{"value":"<p>This spell will automatically apply to tokens in the template following the RAW rules for Zone of Truth.</p><p>This includes overlapping spell effect rules (you can safely overlap multiple Zone of Truth).</p><p><em>This spell is not safe to rename.</em></p>","chat":"","unidentified":""},"source":"Basic Rules, Player's Handbook pg 289","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":"1","units":"hour"},"cover":null,"target":{"value":20,"width":null,"units":"ft","type":"cube"},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":2,"school":"con","components":{"vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":false},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"none","formula":""}},"name":"Web","flags":{"ddbimporter":{"id":138960,"definitionId":2305,"entityTypeId":435869154,"dndbeyond":{"lookup":"generic","lookupName":"generic","level":null,"castAtLevel":null},"originalName":"Zone of Truth","sources":[{"sourceId":1,"pageNumber":null,"sourceType":2},{"sourceId":2,"pageNumber":289,"sourceType":1}],"tags":["Control"],"version":"3.3.10","effectsApplied":true},"cf":{"id":"temp_5lmql55efox"},"core":{"sourceId":"Compendium.world.ddb-development-testing-ddb-spells.YEBIv8j5MGMhZUdo"},"templatemacro":{"whenCreated":{"asGM":false,"command":"console.log(template);\nconsole.log(this);"},"whenEntered":{"asGM":false,"command":"await chrisPremades.macros.web.inZone(token, template);"},"whenTurnStart":{"asGM":false,"command":"await chrisPremades.macros.web.inZone(token, template);"},"whenLeft":{"asGM":false,"command":"await chrisPremades.macros.web.leaveZone(token, template);"},"whenStaying":{"asGM":false,"command":"await chrisPremades.macros.web.inZone(token, template);"}},"custom-character-sheet-sections":{"sectionName":""},"rest-recovery":{"data":{"recovery":{"enabled":false}}},"midi-qol":{"effectActivation":false,"onUseMacroName":""},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"autoSaveFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"itemacro":{"macro":{"name":"Web","type":"script","scope":"global","command":"","author":"Be8r6Sgxcs3sL08I","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}}},"effects":[],"img":"icons/magic/control/debuff-chains-ropes-net-white.webp","_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1676798650073,"modifiedTime":1684720030087,"lastModifiedBy":"Be8r6Sgxcs3sL08I"},"ownership":{"default":0,"PQGBBcoVSwpUhViM":3,"Be8r6Sgxcs3sL08I":3},"folder":null,"sort":0,"_id":"GL9S0BF4RAAywt6R"}
{"name":"Sunbeam","ownership":{"default":0,"Be8r6Sgxcs3sL08I":3},"type":"spell","system":{"description":{"value":"<p>A beam of brilliant light flashes out from your hand in a 5-foot-wide, 60-foot-long line. Each creature in the line must make a Constitution saving throw. On a failed save, a creature takes 6d8 radiant damage and is Blinded until your next turn. On a successful save, it takes half as much damage and isn't blinded by this spell. Undead and oozes have disadvantage on this saving throw.</p><p>You can create a new line of radiance as your action on any turn until the spell ends.</p><p>For the Duration, a mote of brilliant radiance shines in your hand. It sheds bright light in a 30-foot radius and dim light for an additional 30 feet. This light is sunlight.</p>","chat":"","unidentified":""},"source":"PHB pg. 279","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"0","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":0,"scaling":"spell"},"level":6,"school":"evo","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":true},"materials":{"value":"A magnifying glass","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"none","formula":""}},"flags":{"core":{"sourceId":"Compendium.dnd5e.spells.2RC0EyvBLPH88PZF"},"itemacro":{"macro":{"name":"Sunbeam","type":"script","scope":"global","command":"const lastArg = args[args.length - 1];\nlet tactor;\nif (lastArg.tokenId) tactor = canvas.tokens.get(lastArg.tokenId).actor;\nelse tactor = game.actors.get(lastArg.actorId);\nconst target = canvas.tokens.get(lastArg.tokenId)\nlet item = args[1];  //passed by @item in the DAE field\n\nif (args[0] === \"on\") {\n    \n        const updates = {\n        //apply sunlight to token    \n        token: {\n                \"brightLight\": 30,\n                \"dimLight\": 60,\n                \"lightAlpha\": .1,\n                \"lightAngle\": 360,\n                \"lightColor\":\"#ffd700\",\n                \"lightAnimation\":{\n                    \"intensity\":3,\n                    \"speed\":1,\n                    \"type\": \"sunburst\"\n                },\n        },\n        embedded: {\n            //create Sunbeam (attack) part of this spell\n            Item: {\n                \"Sunbeam (attack)\": { \n                    \"type\": \"spell\",\n                    \"img\": item.img,\n                    \n                    \"data\": {\n                        \"damage\":{\n                            \"parts\":[\n                             [\"6d8\"\n                             ,\"radiant\"]\n                             ]\n                        },\n                        \"preparation\": {\n                            \"mode\":\"atwill\"    \n                        \n                        },\n                        \"activation\":{\n                            \"type\": \"action\",\n                            \"cost\": 1,\n                        },\n                        \"target\":{\n                            \"value\":60,\n                            \"units\":\"ft\",\n                            \"type\":\"line\"\n                        },\n                        \"description\": {\n                            \"value\": `A beam of brilliant light flashes out from your hand in a 5-foot-wide, 60-foot-long line. Each creature in the line must make a Constitution saving throw. On a failed save, a creature takes 6d8 radiant damage and is Blinded until your next turn. On a successful save, it takes half as much damage and isnt blinded by this spell. Undead and oozes have disadvantage on this saving throw.`\n                        },\n                        \"level\": 6,\n                        \"school\": \"evo\",\n                        \"save\": {\n                            \"ability\": \"con\",\n                        },\n                    \n                        \"actionType\": \"save\",\n                    },  \n            \n                    \"flags\": {\n                            \"favtab\": {\n                               \"isFavorite\": true\n                            },\n\n                    },\n                    //Here we assign the macro used by Sunbeam (attack)\n                    'flags.midi-qol.onUseMacroName': 'ItemMacro',\n                    'flags.itemacro.macro.data.name': \"Attack\",\n                    'flags.itemacro.macro.data.type': \"script\",\n                    'flags.itemacro.macro.data.scope': \"global\",\n                    'flags.itemacro.macro.data.command': `const actorD = game.actors.get(args[0].actor._id);\nconst tokenD = canvas.tokens.get(args[0].tokenId);\nconst itemD = args[0].item;\n\n//Let's fancy up the template with an animation\nlet template = canvas.templates.get(args[0].templateId);\nlet texture = \"modules/jb2a_patreon/Library/2nd_Level/Scorching_Ray/ScorchingRay_01_Regular_Yellow_60ft_2800x400.webm\";\nlet opacity = 1;\n\nlet updates = [{ \"_id\": args[0].templateId, \"texture\": texture, \"flags.tokenmagic.templateData.opacity\": opacity }]\nawait canvas.scene.updateEmbeddedDocuments(\"MeasuredTemplate\", updates);\n\n//some TMFX to burn the targets\nlet param =\n        [{\n            filterType: \"xfire\",\n            filterId: \"meleeBurn\",\n            autoDestroy: true,\n            time: 0,\n            color: 0xFFDF00,\n            blend: 1,\n            amplitude: 1,\n            dispersion: 0,\n            chromatic: false,\n            scaleX: 1,\n            scaleY: 1,\n            inlay: false,\n            animated:\n            {\n                time:\n                {\n                    loopDuration: 500,\n                    loops: 4,\n                    active: true,\n                    speed: -0.0015,\n                    animType: \"move\"\n                }\n            }\n        }];\n\nawait TokenMagic.addUpdateFiltersOnTargeted(param);\n\n//Adding CUB Blindness\nfor (let targets of args[0].failedSaves) {\n        let target = canvas.tokens.get(targets._id);\n        let effectData = {\n            duration: {rounds: 1},\n            changes: [{ \n                \"key\": \"macro.CE\",\n                \"mode\": 0,\n                \"value\": \"Blinded\",\n                \"priority\": 20\n            }]\n        };\n        await target.actor.createEmbeddedEntity(\"ActiveEffect\", effectData);\n}\n\n//remove template after 3 seconds because I'm too lazy to do it manually\nawait warpgate.wait(3000)\nlet sunbeamTemplate = canvas.templates.get(args[0].templateId);\nif(sunbeamTemplate) await sunbeamTemplate.delete()\n`\n                },\n            },\n        }\n\n        \n        \n    }\n\n    //update the token and create the necessary attack spell\n    await warpgate.mutate(token.document, updates);\n    ui.notifications.info(`Sunbeam (attack) has been added to your At-Will spells.`);\n    ChatMessage.create({ content: `${tactor.name} shines like the sun!` });\n    await tactor.items.getName(\"Sunbeam (attack)\").roll();\n    \n}\nif (args[0] === \"off\") {\n    \n    //Concentration broke or time expired, let's revert the token and remove the attack spell item\n    await warpgate.revert(token.document)\n    ChatMessage.create({ content: `${tactor.name} dims.` });\n    \n}","author":"Be8r6Sgxcs3sL08I","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"rest-recovery":{"data":{"recovery":{"enabled":false}}},"midi-qol":{"effectActivation":false,"onUseMacroName":""},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"cf":{"id":"temp_6q1ztzxb2o4"}},"img":"icons/magic/light/beams-rays-orange-purple-large.webp","effects":[{"label":"Sunbeam","icon":"icons/magic/light/beams-rays-orange-purple-large.webp","changes":[{"key":"macro.itemMacro","mode":0,"value":"@item","priority":20}],"transfer":false,"_id":"lthhL9HVGyLVZtEB","disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"origin":null,"tint":null,"flags":{"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.291","createdTime":1661787234059,"modifiedTime":1671300271060,"lastModifiedBy":"Be8r6Sgxcs3sL08I"},"folder":null,"sort":0,"_id":"HqWYW8sSHhfaMWHf"}
{"name":"Summon Beast","type":"spell","system":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>You call forth a bestial spirit. It manifests in an unoccupied space that you can see within range. This corporeal form uses the @creature[Bestial Spirit|TCE] stat block. When you cast the spell, choose an environment: Air, Land, or Water. The creature resembles an animal of your choice that is native to the chosen environment, which determines certain traits in its stat block. The creature disappears when it drops to 0 hit points or when the spell ends.</p><div class=\"rd__spc-inline-post\"></div><p>The creature is an ally to you and your companions. In combat, the creature shares your initiative count, but it takes its turn immediately after yours. It obeys your verbal commands (no action required by you). If you don't issue any, it takes the @action[Dodge] action and uses its move to avoid danger.</p></div><div class=\"rd__b  rd__b--3\"><div class=\"rd__b  rd__b--3\"><span class=\"rd__h rd__h--3\" data-title-index=\"100\"> <span class=\"entry-title-inner\">At Higher Levels.</span></span> <p>When you cast this spell using a spell slot of 3rd level or higher, use the higher level wherever the spell's level appears in the stat block.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__spc-inline-post\"></div></div>","chat":"","unidentified":""},"source":"TCE","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"hour"},"target":{"value":0,"width":null,"units":"","type":""},"range":{"value":90,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":null,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":2,"school":"con","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":true},"materials":{"value":"a feather, tuft of fur, and fish tail inside a gilded acorn worth at least 200 gp","consumed":false,"cost":200,"supply":0},"preparation":{"mode":"always","prepared":true},"scaling":{"mode":"none","formula":""}},"img":"icons/magic/unholy/silhouette-evil-horned-giant.webp","flags":{"plutonium":{"page":"spells.html","source":"TCE","hash":"summon%20beast_tce","propDroppable":"spell"},"rest-recovery":{"data":{"recovery":{"enabled":false}}},"midi-qol":{"effectActivation":false,"onUseMacroName":"[postActiveEffects]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"core":{"sourceId":"Actor.0oq7oHzu7YXYk0gy.Item.6WdBKKDgs2XUHo47"},"itemacro":{"macro":{"name":"Summon Beast","type":"script","scope":"global","command":"const item = actor.items.getName(\"Summon Beast\");\nconst [{spellLevel: level}] = args;\nconst multiatk = Math.floor(level/2)\nconst summonerDc = actor.system.attributes.spelldc;\nconst summonerAttack = summonerDc - 8;\nconst hpair = 20 + 5 * (level - 2);\nconst hp = 30 + 5 * (level - 2);\nconst sourceActor = token?.actor ?? game.user.character;\nconst number = sourceActor.getRollData().details.level;\n\n/* Prompt the user for which type of celestial to summon */\nconst buttonData = {\n  buttons: [{\n    label: 'Air Beast',\n    value: {\n      token: { name: \"Air Beast\" },\n      token: { img: \"modules/GMmacros/img/air_token.png\" },\n      actor: { name: \"Air Beast\" },\n      actor: { img: \"modules/GMmacros/img/air_spirit.jpg\"},\n      actor: {\n        'system.attributes.hp': { value: hpair, max: hpair }},\n      embedded: {\n        Item: {\n          \"Water Breathing (Water Only)\": warpgate.CONST.DELETE,\n          \"Radiant Mace - Healing (Defender Only)\": warpgate.CONST.DELETE,\n        }\n      }\n    }\n  }, {\n    label: 'Land Beast',\n    value: {\n      token: { name: \"Land Beast\" },\n      token: { img: \"modules/GMmacros/img/land_token.png\" ,\n\t\tscaleX: 1, scaleY: 1},\n      actor: { name: \"Land Beast\" },\n      actor: { img: \"modules/GMmacros/img/land_spirit.jpg\"},\n      actor: {\n        'system.attributes.hp': { value: hp, max: hp }},\n      embedded: {\n        Item: {\n          \"Water Breathing (Water Only)\": warpgate.CONST.DELETE,\n          \"Flyby (Air Only)\": warpgate.CONST.DELETE,\n        }\n      }\n    }\n  },{\n    label: 'Water Beast',\n    value: {\n      actor: { name: \"Water Beast\" },\n      actor: { img: \"modules/GMmacros/img/water_spirit.jpg\" },\n      actor: {\n        'system.attributes.hp': { value: hp, max: hp }},\n      token: { name: \"Water Beast\" },\n      token: { img: \"modules/GMmacros/img/water_token.png\" },\n      embedded: {\n        Item: {\n \t  \"Flyby (Air Only)\": warpgate.CONST.DELETE,\n        }\n      }\n    }\n  }\n  ],\n  title: 'Which Beast?'\n};\n\nconst celestial = await warpgate.buttonDialog(buttonData);\n\nconst callbacks = {\n    post: async (location, tokenDoc, updates, iteration) => {\n        await myEffectFunction(tokenDoc);\n    }\n}\n\n/* Craft the updates that are common to all celestials */\nconst updates = foundry.utils.mergeObject({\n  token: { \"displayName\": CONST.TOKEN_DISPLAY_MODES.HOVER },\n  actor: {\n    'system.attributes.ac.natural': 11 + level,\n    'system.details.cr': number,\n  },\n  embedded: {\n    Item: {\n      \"Multiattack\": {\n        name: `${multiatk}x Multiattack`\n\t},\n      \"Maul\": {\n        'system.damage.parts': [[`1d8 + 4 + ${level}`, \"piercing\"]],\n        'system.attackBonus': `- @mod - @prof + ${summonerAttack}`,\n      },\n      },\n    }\n }, celestial);\nasync function preSpawn(location, updates, iteration) {\n   await new Sequence()\n    .effect()\n      .file(\"jb2a.divine_smite.caster.blueyellow\")\n      .atLocation(location)\n      .scaleToObject(3)\n      .waitUntilFinished(-500)\n      .fadeIn(100)\n    .effect()\n      .file(\"jb2a.explosion.blueyellow.0\")\n      .atLocation(location)\n      .scaleToObject(4)\n  .play()\n  }\n\n  await warpgate.spawn(\"Bestial Spirit\", updates, {pre:preSpawn});","author":"Be8r6Sgxcs3sL08I","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"cf":{"id":"temp_6q1ztzxb2o4"}},"effects":[],"ownership":{"default":0,"1Kz20ei3Wlv8Plzr":3,"Be8r6Sgxcs3sL08I":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.291","createdTime":1670373441999,"modifiedTime":1671322796451,"lastModifiedBy":"Be8r6Sgxcs3sL08I"},"folder":null,"sort":0,"_id":"KQjwLGNJuplCajT4"}
{"name":"Darkness","type":"spell","img":"modules/plutonium/media/icon/spell/phb-darkness.webp","effects":[],"folder":null,"sort":0,"flags":{"srd5e":{"page":"spells.html","source":"PHB","hash":"darkness_phb","propDroppable":"spell"},"scene-packer":{"hash":"f0899aebc24dc8b0fcc7a74d86ef6c05e869adf1","sourceId":"Item.3S566zmrdwHQSz3C"},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"playSaveAudio":false,"clip":"","volume":100}},"itemacro":{"macro":{"data":{"_id":null,"name":"Darkness","type":"script","author":"QwT9izJ4aW8QVTjo","img":"icons/svg/dice-target.svg","scope":"global","command":"// Use this macro in the \"On-Use Macro\" Field in the details page (bottom) of the item/spell\n// Requires Token Attacher module\n// Suggested to use Token Magic FX to apply a template animation to the aura/spell when cast and placed down\n\n/* For example: Spirit Guardians. Use this macro in the on-use field and set an animation for the template in Token Magic FX.\nWhen you cast the spell drop it on the canvas with your token at the center. This reads the center location of the template and\nautomatically attaches it to your token\n*/\n\nasync function TemplateAttach() {\n    const templateID = canvas.templates.placeables[canvas.templates.placeables.length - 1].data._id;\n    let template = await canvas.templates.get(templateID);\n    let target_token = canvas.tokens.placeables.find(i => i.center.x === template.center.x && i.center.y === template.center.y);\n    tokenAttacher.attachElementToToken(template, target_token)\n}\nTemplateAttach();","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"midi-qol":{"effectActivation":false,"onUseMacroName":"[postActiveEffects]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"core":{"sourceId":"Item.3S566zmrdwHQSz3C"},"rest-recovery":{"data":{"recovery":{"enabled":false}}},"cf":{"id":"temp_6q1ztzxb2o4"}},"_id":"KaLnVaBNHOpDLEHF","system":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>Magical darkness spreads from a point you choose within range to fill a 15-foot-radius sphere for the duration. The darkness spreads around corners. A creature with <span class=\"help help--hover\" data-plut-hover=\"true\" data-plut-hover-preload=\"true\" data-plut-hover-preload-id=\"1\">darkvision</span> can't see through this darkness, and nonmagical light can't illuminate it.</p><div class=\"rd__spc-inline-post\"></div><p>If the point you choose is on an object you are holding or one that isn't being worn or carried, the darkness emanates from the object and moves with it. Completely covering the source of the darkness with an opaque object, such as a bowl or a helm, blocks the darkness.</p><p>If any of this spell's area overlaps with an area of light created by a spell of 2nd level or lower, the spell that created the light is dispelled.</p></div>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":10,"units":"minute"},"target":{"value":15,"width":null,"units":"ft","type":"sphere"},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":null,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":2,"school":"evo","components":{"value":"","vocal":true,"somatic":false,"material":true,"ritual":false,"concentration":true},"materials":{"value":"bat fur and a drop of pitch or piece of coal","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"none","formula":""}},"ownership":{"default":0,"QwT9izJ4aW8QVTjo":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.290","createdTime":null,"modifiedTime":1669937984399,"lastModifiedBy":"Be8r6Sgxcs3sL08I"}}
{"name":"Summon Construct","type":"spell","system":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>You call forth the spirit of a construct. It manifests in an unoccupied space that you can see within range. This corporeal form uses the @creature[Construct Spirit|TCE] stat block. When you cast the spell, choose a material: Clay, Metal, or Stone. The creature resembles a golem or a modron (your choice) made of the chosen material, which determines certain traits in its stat block. The creature disappears when it drops to 0 hit points or when the spell ends.</p><div class=\"rd__spc-inline-post\"></div><p>The creature is an ally to you and your companions. In combat, the creature shares your initiative count, but it takes its turn immediately after yours. It obeys your verbal commands (no action required by you). If you don't issue any, it takes the @action[Dodge] action and uses its move to avoid danger.</p></div><div class=\"rd__b  rd__b--3\"><div class=\"rd__b  rd__b--3\"><span class=\"rd__h rd__h--3\" data-title-index=\"4\"> <span class=\"entry-title-inner\">At Higher Levels.</span></span> <p>When you cast this spell using a spell slot of 4th level or higher, use the higher level wherever the spell's level appears in the stat block.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__spc-inline-post\"></div></div>","chat":"","unidentified":""},"source":"TCE","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"hour"},"target":{"value":0,"width":null,"units":"","type":""},"range":{"value":90,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":null,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":4,"school":"con","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":true},"materials":{"value":"an ornate stone and metal lockbox worth at least 400 gp","consumed":false,"cost":400,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"none","formula":""}},"img":"icons/magic/unholy/silhouette-evil-horned-giant.webp","flags":{"plutonium":{"page":"spells.html","source":"TCE","hash":"summon%20construct_tce","propDroppable":"spell"},"rest-recovery":{"data":{"recovery":{"enabled":false}}},"midi-qol":{"effectActivation":false,"onUseMacroName":"[postActiveEffects]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"itemacro":{"macro":{"name":"Summon Construct","type":"script","scope":"global","command":"const item = actor.items.getName(\"Summon Construct\");\nconst [{spellLevel: level}] = args;\nconst multiatk = Math.floor(level/2)\nconst summonerDc = actor.system.attributes.spelldc;\nconst summonerAttack = summonerDc - 8;\nconst hp = 40 + 15 * (level - 4);\nconst sourceActor = token?.actor ?? game.user.character;\nconst number = sourceActor.getRollData().details.level;\n\n/* Prompt the user for which type of celestial to summon */\nconst buttonData = {\n  buttons: [{\n    label: 'Clay Golem',\n    value: {\n      token: { name: \"Clay Golem\" },\n      token: { img: \"modules/GMmacros/img/clay.png\" },\n      actor: { name: \"Clay Golem\" },\n      actor: { img: \"modules/GMmacros/img/clay.png\"},\n      actor: {\n        'system.attributes.hp': { value: hp, max: hp }},\n      embedded: {\n        Item: {\n          \"Heated Body (Metal Only)\": warpgate.CONST.DELETE,\n          \"Stony Lethargy (Stone Only)\": warpgate.CONST.DELETE,\n          \"Slam\": {\n             'system.damage.parts': [[`1d8 + 4 + ${level}`, \"bludgeoning\"]],\n             'system.attackBonus': `- @mod - @prof + ${summonerAttack}`,\n             },\n        }\n      }\n    }\n  }, {\n    label: 'Metal Golem',\n    value: {\n      token: { name: \"Metal Golem\" },\n      token: { img: \"modules/GMmacros/img/Metal.png\"},\n      actor: { name: \"Metal Golem\" },\n      actor: { img: \"modules/GMmacros/img/Metal.png\"},\n      actor: {\n        'system.attributes.hp': { value: hp, max: hp }},\n      embedded: {\n        Item: {\n          \"Stony Lethargy (Stone Only)\": warpgate.CONST.DELETE,\n          \"Berserk Lashing (Clay Only)\": warpgate.CONST.DELETE,\n          \"Slam\": {\n             'system.damage.parts': [[`1d8 + 4 + ${level}`, \"bludgeoning\"]],\n             'system.attackBonus': `- @mod - @prof + ${summonerAttack}`,\n             },\n        }\n      }\n    }\n  },{\n    label: 'Stone Golem',\n    value: {\n      actor: { name: \"Stone Golem\" },\n      actor: { img: \"modules/GMmacros/img/stone.png\" },\n      actor: {\n        'system.attributes.hp': { value: hp, max: hp }},\n      token: { name: \"Stone Golem\" },\n      token: { img: \"modules/GMmacros/img/stone.png\" },\n      embedded: {\n        Item: {\n          \"Berserk Lashing (Clay Only)\": warpgate.CONST.DELETE,\n          \"Heated Body (Metal Only)\": warpgate.CONST.DELETE,\n          \"Slam\": {\n             'system.damage.parts': [[`1d8 + 4 + ${level}`, \"bludgeoning\"]],\n             'system.attackBonus': `- @mod - @prof + ${summonerAttack}`,\n             },\n\n        }\n      }\n    }\n  }\n  ],\n  title: 'Which Construct?'\n};\n\nconst celestial = await warpgate.buttonDialog(buttonData);\n\nconst callbacks = {\n    post: async (location, tokenDoc, updates, iteration) => {\n        await myEffectFunction(tokenDoc);\n    }\n}\n\n/* Craft the updates that are common to all celestials */\nconst updates = foundry.utils.mergeObject({\n  token: { \"displayName\": CONST.TOKEN_DISPLAY_MODES.HOVER },\n  actor: {\n    'system.attributes.ac.natural': 13 + level,\n    'system.details.cr': number,\n  },\n  embedded: {\n    Item: {\n      \"Multiattack\": {\n        name: `${multiatk}x Multiattack`\n\t},\n      },\n    }\n }, celestial);\nasync function preSpawn(location, updates, iteration) {\n   await new Sequence()\n    .effect()\n      .file(\"jb2a.divine_smite.caster.blueyellow\")\n      .atLocation(location)\n      .scaleToObject(3)\n      .waitUntilFinished(-500)\n      .fadeIn(100)\n    .effect()\n      .file(\"jb2a.explosion.blueyellow.0\")\n      .atLocation(location)\n      .scaleToObject(4)\n  .play()\n  }\n\n  await warpgate.spawn(\"Construct Spirit\", updates, {pre:preSpawn});","author":"Be8r6Sgxcs3sL08I","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"core":{"sourceId":"Item.6lFLunZvlPyae6fG"},"cf":{"id":"temp_6q1ztzxb2o4"}},"effects":[],"ownership":{"default":0,"Be8r6Sgxcs3sL08I":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.291","createdTime":1671301377151,"modifiedTime":1671322911155,"lastModifiedBy":"Be8r6Sgxcs3sL08I"},"folder":null,"sort":0,"_id":"KwnLL3GIQygdgMzJ"}
{"_id":"MtJ2H7j2NA83zJIV","name":"Veneno (Purple Worm)","type":"consumable","img":"icons/consumables/potions/bottle-conical-corked-labeled-skull-poison-green.webp","effects":[{"_id":"yum7fb0w2wdq51a9","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro.Veneno (Purple Worm)","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/consumables/potions/bottle-conical-corked-labeled-skull-poison-green.webp","label":"Veneno (Purple Worm)","transfer":false,"flags":{"core":{"statusId":"Veneno"},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["1Hit:rwak","1Hit:mwak"],"transfer":false},"dnd5e-helpers":{"rest-effect":"Ignore"},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"origin":null}],"folder":null,"sort":0,"flags":{"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"playSaveAudio":false,"clip":"","volume":100}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Veneno (Purple Worm)","type":"script","author":"QwT9izJ4aW8QVTjo","img":"icons/svg/dice-target.svg","scope":"global","command":"// v1.0. Requires midi-qol.\nif (![\"mwak\",\"rwak\"].includes(args[0].item.data.actionType)) return {}; \nfor (let tokenUuid of args[0].hitTargetUuids) {\n    const target = await fromUuid(tokenUuid);\n    const targetActor = target.actor;\n    if (!targetActor) continue;\n\n}\nlet spellDC = 19\nlet results = await\ngame.user.targets.first().actor.rollAbilitySave(\"con\");\nif (results.total < spellDC) {\nreturn{damageRoll: `12d6[poison]`, flavor: \"Veneno\"}\n} else {\nreturn{damageRoll: `6d6[poison]`, flavor: \"Veneno\"}\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.PtNBU46PSIol0yEk"},"cf":{"id":"temp_bnv1ahmj4k"},"rest-recovery":{"data":{"recovery":{"enabled":false}}}},"system":{"description":{"value":"<p>Purple Worm Poison (Injury): This poison must be harvested from a dead or Incapacitated Purple Worm. A creature subjected to this poison must make a DC 19 Constitution saving throw, taking 42 (12d6) poison damage on a failed save, or half as much damage on a successful one.</p>","chat":"","unidentified":""},"source":"","quantity":2,"weight":0,"price":0,"attunement":0,"equipped":false,"rarity":"","identified":true,"activation":{"type":"action","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":null,"max":"","per":"","recovery":"","autoDestroy":false},"consume":{"type":"ammo","target":"","amount":1},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"consumableType":"poison"},"ownership":{"default":0,"QwT9izJ4aW8QVTjo":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.291","createdTime":null,"modifiedTime":1670804847549,"lastModifiedBy":"Be8r6Sgxcs3sL08I"}}
{"name":"Circle of Power","type":"spell","img":"icons/magic/light/orb-shadow-blue.webp","effects":[{"_id":"kJdmHhTJH03zJxo2","changes":[{"key":"flags.midi-qol.advantage.ability.save.all","mode":0,"value":"1","priority":20},{"key":"flags.midi-qol.superSaver.all","mode":0,"value":"1","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/light/orb-shadow-blue.webp","label":"Circle of Power","origin":"Item.LTQm45DD4V2IqDpi","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":false,"selfTarget":false,"selfTargetAlways":false,"durationExpression":""},"dnd5e-helpers":{"rest-effect":"Ignore"},"ActiveAuras":{"isAura":true,"aura":"Allies","radius":"30","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false,"displayTemp":true},"dfreds-convenient-effects":{"description":""},"core":{"statusId":""}},"tint":null}],"flags":{"core":{"sourceId":"Compendium.dnd5e.spells.uCud2s4TjMfjiXUb"},"midi-qol":{"onUseMacroName":"","effectActivation":false},"betterRolls5e":{"quickOther":{"context":"","value":true,"altValue":true,"type":"Boolean"},"quickDesc":{"value":true,"altValue":true,"type":"Boolean"},"quickSave":{"value":true,"altValue":true,"type":"Boolean"},"quickProperties":{"value":true,"altValue":true,"type":"Boolean"},"quickVersatile":{"value":false,"altValue":false,"type":"Boolean"},"quickFlavor":{"value":true,"altValue":true,"type":"Boolean"},"quickAttack":{"type":"Boolean","value":true,"altValue":true},"quickDamage":{"type":"Array","value":[],"altValue":[],"context":[]},"quickCharges":{"type":"Boolean","value":{"use":true,"resource":true},"altValue":{"use":true,"resource":true}},"quickTemplate":{"type":"Boolean","value":true,"altValue":true},"quickPrompt":{"type":"Boolean","value":false,"altValue":false}},"scene-packer":{"hash":"5517dcc2725d9c3f9845b639608127534ede5c37","sourceId":"Item.B8IrEtWEU0h9EtqY"},"itemacro":{"macro":{"data":{"_id":null,"name":"Spirit Guardians 0.8.85","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"const lastArg = args[args.length -1];\n// Check when applying the effect - if the token is not the caster and it IS the tokens turn they take damage\nif (args[0] === \"on\" && args[1] !== lastArg.tokenId && lastArg.tokenId === game.combat?.current.tokenId) {\n    const sourceItem = await fromUuid(lastArg.origin);\n    let theActor = await fromUuid(lastArg.actorUuid);\n    if (theActor.actor) theActor = theActor.actor;\n    const itemData = mergeObject(duplicate(sourceItem.data), {\n        type: \"weapon\",\n        effects: [],\n        flags: {\n            \"midi-qol\": {\n                noProvokeReaction: true, // no reactions triggered\n                onUseMacroName: null // \n            },\n        },\n        data: {\n            actionType: \"save\",\n            save: {dc: Number.parseInt(args[3]), ability: \"wis\", scaling: \"flat\"},\n            damage: { parts: [[`${args[2]}d8`, \"radiant\"]] },\n            \"target.type\": \"self\",\n            components: {concentration: false, material: false, ritual: false, somatic: false, value: \"\", vocal: false},\n            duration: {units: \"inst\", value: undefined},\n            weaponType: \"improv\"\n        }\n    }, {overwrite: true, inlace: true, insertKeys: true, insertValues: true});\n    itemData.data.target.type = \"self\";\n    setProperty(itemData.flags, \"autoanimations.killAnim\", true);\n    itemData.flags.autoanimations.killAnim = true;;\n    const item = new CONFIG.Item.documentClass(itemData, { parent: theActor })\n    const options = { showFullCard: false, createWorkflow: true, versatile: false, configureDialog: false };\n    await MidiQOL.completeItemRoll(item, options);\n\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}},"name":"Spirit Guardians 10.0.10","type":"script","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"10.0.10\";\ntry {\n    const lastArg = args[args.length -1];\n    // Check when applying the effect - if the token is not the caster and it IS the tokens turn they take damage\n    if (args[0] === \"on\" && args[1] !== lastArg.tokenId && lastArg.tokenId === game.combat?.current.tokenId) {\n        const sourceItem = await fromUuid(lastArg.origin);\n        let theActor = await fromUuid(lastArg.actorUuid);\n        if (theActor.actor) theActor = theActor.actor;\n        const itemData = mergeObject(duplicate(sourceItem.toObject(false)), {\n            type: \"weapon\",\n            effects: [],\n            flags: {\n                \"midi-qol\": {\n                    noProvokeReaction: true, // no reactions triggered\n                    onUseMacroName: null // \n                },\n            },\n            system: {\n                actionType: \"save\",\n                save: {dc: Number.parseInt(args[3]), ability: \"wis\", scaling: \"flat\"},\n                damage: { parts: [[`${args[2]}d8`, \"radiant\"]] },\n                \"target.type\": \"self\",\n                components: {concentration: false, material: false, ritual: false, somatic: false, value: \"\", vocal: false},\n                duration: {units: \"inst\", value: undefined},\n                weaponType: \"improv\"\n            }\n        }, {overwrite: true, inlace: true, insertKeys: true, insertValues: true});\n        itemData.system.target.type = \"self\";\n        setProperty(itemData.flags, \"autoanimations.killAnim\", true);\n        itemData.flags.autoanimations.killAnim = true;;\n        const item = new CONFIG.Item.documentClass(itemData, { parent: theActor })\n        const options = { showFullCard: false, createWorkflow: true, versatile: false, configureDialog: false };\n        await MidiQOL.completeItemRoll(item, options);\n    }\n} catch (err) {\n    console.error(`Spirit Guardians ${version}`, err);\n}","sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"gm-notes":{},"cf":{"id":"temp_lpjg4hxkuum","color":"#000000"},"rest-recovery":{"data":{"recovery":{"enabled":false}}},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"autoSaveFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false}},"system":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>Divine energy radiates from you, distorting and diffusing magical energy within 30 feet of you. Until the spell ends, the sphere moves with you, centered on you. For the duration, each friendly creature in the area (including you) has advantage on saving throws against spells and other magical effects. Additionally, when an affected creature succeeds on a saving throw made against a spell or magical effect that allows it to make a saving throw to take only half damage, it instead takes no damage if it succeeds on the saving throw.</p><p></p></div>","chat":"","unidentified":""},"source":"PHB pg. 278","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":"10","units":"minute"},"cover":null,"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":0,"scaling":"spell"},"level":5,"school":"abj","components":{"vocal":true,"somatic":false,"material":false,"ritual":false,"concentration":true},"materials":{"value":"A holy symbol","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"level","formula":"1d8"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1661995926108,"modifiedTime":1684719976127,"lastModifiedBy":"Be8r6Sgxcs3sL08I"},"ownership":{"default":0,"Be8r6Sgxcs3sL08I":3},"folder":null,"sort":0,"_id":"OU9Hofvwzt57gxQe"}
{"name":"Tasha's Hideous Laughter","type":"spell","system":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>A creature of your choice that you can see within range perceives everything as hilariously funny and falls into fits of laughter if this spell affects it. The target must succeed on a Wisdom saving throw or fall @condition[prone], becoming @condition[incapacitated] and unable to stand up for the duration. A creature with an Intelligence score of 4 or less isn't affected.</p><div class=\"rd__spc-inline-post\"></div><p>At the end of each of its turns, and each time it takes damage, the target can make another Wisdom saving throw. The target has advantage on the saving throw if it's triggered by damage. On a success, the spell ends.</p></div>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":30,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"save","attackBonus":null,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"wis","dc":null,"scaling":"spell"},"level":1,"school":"enc","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":true},"materials":{"value":"tiny tarts and a feather that is waved in the air","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"always","prepared":true},"scaling":{"mode":"none","formula":""}},"img":"icons/creatures/magical/spirit-fire-yellow.webp","flags":{"plutonium":{"page":"spells.html","source":"PHB","hash":"tasha's%20hideous%20laughter_phb","propDroppable":"spell"},"rest-recovery":{"data":{"recovery":{"enabled":false}}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"core":{"sourceId":"Actor.CQaWddu2rSc1igDg.Item.gKdBEpA99HpAE3e1"},"cf":{"id":"temp_lpjg4hxkuum"}},"effects":[{"label":"Tasha's Hideous Laughter","icon":"icons/creatures/magical/spirit-fire-yellow.webp","changes":[{"key":"macro.CE","mode":0,"value":"Prone","priority":20},{"key":"macro.CE","mode":0,"value":"Incapacitated","priority":20},{"key":"flags.midi-qol.OverTime","mode":2,"value":"turn=end,\nsaveDC=@attributes.spelldc,\nsaveAbility=wis","priority":20}],"transfer":false,"_id":"Z9gPap0SCZODWM2k","disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"origin":null,"tint":null,"flags":{"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"ownership":{"default":0,"Xvz9L40UsVHWsWpn":3,"Be8r6Sgxcs3sL08I":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.291","createdTime":1671396058316,"modifiedTime":1671399922730,"lastModifiedBy":"Be8r6Sgxcs3sL08I"},"folder":null,"sort":0,"_id":"QPc95ukgFgXAmIKP"}
{"_id":"TGL4z244vlkKeZva","name":"Toll the Dead","type":"spell","img":"modules/GMmacros/img/xge-toll-the-dead.webp","effects":[],"folder":null,"sort":0,"flags":{"ddbimporter":{"id":138274,"definitionId":14615,"entityTypeId":435869154,"dndbeyond":{"lookup":"generic","lookupName":"generic","level":null,"castAtLevel":null},"sources":[{"sourceId":27,"pageNumber":169,"sourceType":1}],"tags":["Damage"]},"betterRolls5e":{"quickVersatile":{"altValue":true},"quickCharges":{"value":{"use":true,"resource":true},"altValue":{"use":true,"resource":true}}},"midi-qol":{"effectActivation":false,"onUseMacroName":"[preDamageRoll]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"autoFailFriendly":false,"offHandWeapon":false,"ignoreTotalCover":false},"core":{"sourceId":"Compendium.world.ddb-spells.eWALttYghEEA1qOa"},"scene-packer":{"hash":"9f7ff19882d5754133397d9eb2657cd5ce210bd1","sourceId":"Item.CHNM01gLo3kddfju"},"itemacro":{"macro":{"data":{"_id":null,"name":"Toll the Dead","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"if (args[0].macroPass === \"preDamageRoll\") {\n    const target = await fromUuid(args[0].targetUuids[0]);\n    const needsD12 = target.actor.data.data.attributes.hp.value < target.actor.data.data.attributes.hp.max;\n    const theItem = await fromUuid(args[0].uuid);\n    let formula = theItem.data.data.damage.parts[0][0];\n    if (needsD12) \n        formula = formula.replace(\"d8\", \"d12\")\n    else \n        formula = formula.replace(\"d12\", \"d8\");\n    theItem.data.data.damage.parts[0][0] = formula;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"cf":{"id":"temp_lpjg4hxkuum"},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"playSaveAudio":false,"clip":"","volume":100}},"rest-recovery":{"data":{"recovery":{"enabled":false}}}},"system":{"description":{"value":"<p class=\"Core-Styles_Core-Body\">You point at one creature you can see within range, and the sound of a dolorous bell fills the air around it for a moment. The target must succeed on a Wisdom saving throw or take 1d8 necrotic damage. If the target is missing any of its hit points, it instead takes 1d12 necrotic damage.</p>\n<p class=\"Core-Styles_Core-Body\">The spells damage increases by one die when you reach 5th level (2d8 or 2d12), 11th level (3d8 or 3d12), and 17th level (4d8 or 4d12).</p>","chat":"<p class=\"Core-Styles_Core-Body\">You point at one creature you can see within range, and the sound of a dolorous bell fills the air around it for a moment. The target must succeed on a Wisdom saving throw or take 1d8 necrotic damage. If the target is missing any of its hit points, it instead takes 1d12 necrotic damage.</p>\n<p class=\"Core-Styles_Core-Body\">The spells damage increases by one die when you reach 5th level (2d8 or 2d12), 11th level (3d8 or 3d12), and 17th level (4d8 or 4d12).</p>","unidentified":""},"source":"Xanathar's Guide to Everything pg 169","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":0,"max":"0","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"save","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[["1d12","necrotic"]],"versatile":""},"formula":"","save":{"ability":"wis","dc":null,"scaling":"spell"},"level":0,"school":"nec","components":{"value":"","vocal":true,"somatic":true,"material":false,"ritual":false,"concentration":false},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"cantrip","formula":""},"attributes":{"spelldc":10},"attunement":null},"ownership":{"default":0,"QwT9izJ4aW8QVTjo":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.291","createdTime":null,"modifiedTime":1671423465635,"lastModifiedBy":"Be8r6Sgxcs3sL08I"}}
{"_id":"WYIejkhD1fDmE9cI","name":"Ensnaring Strike","type":"spell","img":"modules/GMmacros/img/phb-ensnaring-strike.jpg","data":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>The next time you hit a creature with a weapon attack before this spell ends, a writhing mass of thorny vines appears at the point of impact, and the target must succeed on a Strength saving throw or be <a href=\"https://5e.tools/conditionsdiseases.html#restrained_phb\" data-plut-hover=\"{&quot;page&quot;:&quot;conditionsdiseases.html&quot;,&quot;source&quot;:&quot;PHB&quot;,&quot;hash&quot;:&quot;restrained_phb&quot;}\">restrained</a> by the magical vines until the spell ends. A Large or larger creature has advantage on this saving throw. If the target succeeds on the save, the vines shrivel away.</p><div class=\"rd__spc-inline-post\"></div><p>While <a href=\"https://5e.tools/conditionsdiseases.html#restrained_phb\" data-plut-hover=\"{&quot;page&quot;:&quot;conditionsdiseases.html&quot;,&quot;source&quot;:&quot;PHB&quot;,&quot;hash&quot;:&quot;restrained_phb&quot;}\">restrained</a> by this spell, the target takes [[/r 1d6]] piercing damage at the start of each of its turns. A creature <a href=\"https://5e.tools/conditionsdiseases.html#restrained_phb\" data-plut-hover=\"{&quot;page&quot;:&quot;conditionsdiseases.html&quot;,&quot;source&quot;:&quot;PHB&quot;,&quot;hash&quot;:&quot;restrained_phb&quot;}\">restrained</a> by the vines or one that can touch the creature can use its action to make a Strength check against your spell save DC. On a success, the target is freed.</p></div><div class=\"rd__b  rd__b--3\"><div class=\"rd__b  rd__b--3\"><span class=\"rd__h rd__h--3\" data-title-index=\"2\"> <span class=\"entry-title-inner\">At Higher Levels.</span></span> <p>If you cast this spell using a spell slot of 2nd level or higher, the damage increases by [[/r 1d6]] for each slot level above 1st.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__spc-inline-post\"></div></div>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"save","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":1,"school":"con","components":{"value":"","vocal":true,"somatic":false,"material":false,"ritual":false,"concentration":true},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"level","formula":"1d6"},"attunement":0},"effects":[{"_id":"QjokgzRRv5cJRCYE","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro.Ensnaring Strike","priority":"20"},{"key":"flags.midi-qol.ensnaringSmite.level","mode":5,"value":"@item.level","priority":"20"}],"disabled":false,"duration":{"startTime":null,"rounds":10},"icon":"modules/plutonium/media/icon/spell/phb-ensnaring-strike.webp","label":"Ensnaring Strike","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":["1Hit:mwak","1Hit:rwak"],"transfer":false,"durationExpression":""},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false,"displayTemp":false},"core":{"statusId":""},"dnd5e-helpers":{"rest-effect":"Ignore"}},"tint":null,"selectedKey":["flags.dnd5e.DamageBonusMacro","__"]}],"folder":null,"sort":0,"permission":{"default":0,"WpiVAovmlZrRTFMX":3},"flags":{"srd5e":{"page":"spells.html","source":"PHB","hash":"ensnaring%20strike_phb"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"core":{"sourceId":"Item.iUIt6MO3Ioq2z59k"},"midi-qol":{"onUseMacroName":"","effectActivation":false},"itemacro":{"macro":{"data":{"_id":null,"name":"Ensnaring Strike","type":"script","author":"WpiVAovmlZrRTFMX","img":"icons/svg/dice-target.svg","scope":"global","command":"if (![\"mwak\",\"rwak\"].includes(args[0].itemData.data.actionType)) return {}; // melee weapon attack\nconst uuid = game.user.targets.first().actor.uuid;\nconst targets = Array.from(game.user.targets);\nconst spldc = actor.data.data.attributes.spelldc\nconst wait = async (ms) => new Promise((resolve)=> setTimeout(resolve, ms));\nconst hasEffectApplied = game.dfreds.effectInterface.hasEffectApplied('Restrained', uuid);\nconst spellLevel = actor.data.flags[\"midi-qol\"].ensnaringSmite.level;\nlet bsEffect = new ActiveEffect({label: \"Ensnaring Smite\", icon: \"modules/GMmacros/img/phb-ensnaring-strike.jpg\", changes: [{value: `turn=start,damageRoll=${spellLevel}d6,type=piercing,label=Ensnaring Smite`, mode: CONST.ACTIVE_EFFECT_MODES.CUSTOM, priority: 20, key:\"flags.midi-qol.OverTime\"},\n{value: \"1\", mode: CONST.ACTIVE_EFFECT_MODES.ADD, priority: 20, key:\"flags.midi-qol.disadvantage.attack.all\"},\n{value: \"1\", mode: CONST.ACTIVE_EFFECT_MODES.ADD, priority: 20, key:\"flags.midi-qol.grants.advantage.attack.all\"},\n{value: \"1\", mode: CONST.ACTIVE_EFFECT_MODES.ADD, priority: 20, key:\"flags.midi-qol.disadvantage.ability.save.dex\"},\n{value: \"0\", mode: CONST.ACTIVE_EFFECT_MODES.OVERRIDE, priority: 20, key:\"data.attributes.movement.all\"}], \n\nduration: {seconds: 60}});\n\nfor (const target of targets) {\nif (target.actor.data.data.traits.ci.value.includes(\"restrained\")) {\n  \t\tui.notifications.info(\"Restrained\");\n} else {\nfor (const target of targets) {\nawait game.MonksTokenBar.requestRoll(targets,{request:'save:str', silent: true});\nawait wait(5000)\n\nconst listMessages = game.messages.contents\nconst lastMessage = listMessages[listMessages.length - 1];\nconst spellDC = actor.data.data.attributes.spelldc\nlet tokenid = 'token'+target.id;\nlet saveRoll = lastMessage.data.flags[\"monks-tokenbar\"][tokenid].total\n\nif (saveRoll < spellDC) {\nfor (let tokenUuid of args[0].hitTargetUuids) {\n        const target = await fromUuid(tokenUuid);\n        const targetActor = target.actor;\n        if (!targetActor) continue;\n        await MidiQOL.socket().executeAsGM(\"createEffects\", {actorUuid: targetActor.uuid, effects: [bsEffect.toObject()]})\n}//for\n}//if\n}//if\n}//for\n}//else","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"exportSource":{"world":"criador","system":"dnd5e","coreVersion":"0.8.8","systemVersion":"1.3.6"},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"clip":"","volume":100}},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"cf":{"id":"temp_lpjg4hxkuum"},"scene-packer":{"hash":"4da88ac660e81874205a3d7adbc3df158d14881c","sourceId":"Item.mdTcCcyIKWaJBfKS"}}}
{"_id":"Z1R54lhVCtYLvPjs","name":"Searing Smite","type":"spell","img":"modules/GMmacros/img/phb-searing-smite.webp","effects":[{"_id":"6hAZJkE4UfjO7Adp","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro.Searing Smite","priority":20},{"key":"flags.midi-qol.searingSmite.level","mode":5,"value":"@item.level","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"modules/GMmacros/img/phb-searing-smite.webp","label":"Searing Smite","origin":"Compendium.midi-qol.midiqol-sample-items.dlP9fWGo3ggfkOfm","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":["1Hit:mwak","1Hit:rwak"],"transfer":false,"durationExpression":""},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false,"displayTemp":false},"core":{"statusId":""},"dnd5e-helpers":{"rest-effect":"Ignore"}},"tint":null}],"folder":null,"sort":0,"flags":{"midi-qol":{"onUseMacroName":"","effectActivation":false},"core":{"sourceId":"Item.Z2bmzJrSSmIZdOFp"},"itemacro":{"macro":{"data":{"_id":null,"name":"Searing Smite","type":"script","author":"WpiVAovmlZrRTFMX","img":"icons/svg/dice-target.svg","scope":"global","command":"if (![\"mwak\"].includes(args[0].itemData.data.actionType)) return {}; // melee weapon attack\nconst uuid = game.user.targets.first().actor.uuid;\nconst targets = Array.from(game.user.targets);\nconst spldc = actor.data.data.attributes.spelldc\nconst wait = async (ms) => new Promise((resolve)=> setTimeout(resolve, ms));\n\nlet bsEffect = new ActiveEffect({label: \"Searing Smite\", icon: \"modules/GMmacros/img/phb-searing-smite.webp\", changes: [{value: `turn=start,damageRoll=1d6,type=fire,saveDC=${spldc},saveAbility=con,label=Searing Smite`, mode: CONST.ACTIVE_EFFECT_MODES.CUSTOM, priority: 20, key:\"flags.midi-qol.OverTime\"}], duration: {seconds: 60}});\n\n\nfor (const target of targets) {\nawait game.MonksTokenBar.requestRoll(targets,{request:'save:con', silent: true});\nawait wait(5000)\n\nconst listMessages = game.messages.contents\nconst lastMessage = listMessages[listMessages.length - 1];\nconst spellDC = actor.data.data.attributes.spelldc\nlet tokenid = 'token'+target.id;\nlet saveRoll = lastMessage.data.flags[\"monks-tokenbar\"][tokenid].total\n\nif (saveRoll < spellDC) {\n    for (let tokenUuid of args[0].hitTargetUuids) {\n        const target = await fromUuid(tokenUuid);\n        const targetActor = target.actor;\n        if (!targetActor) continue;\n        await MidiQOL.socket().executeAsGM(\"createEffects\", {actorUuid: targetActor.uuid, effects: [bsEffect.toObject()]})\n}}\n}\nconst spellLevel = actor.data.flags[\"midi-qol\"].searingSmite.level;\nif (args[0].isCritical) spellLevel = spellLevel * 2;\nreturn{damageRoll: `${spellLevel}d6[fire]`, flavor: \"Searing Smite\"};","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"cf":{"id":"temp_lpjg4hxkuum","color":"#000000"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"autoFailFriendly":false,"autoSaveFriendly":false,"offHandWeapon":false,"ignoreTotalCover":false},"scene-packer":{"hash":"b95ef423e807b8edfe83babff5fb9d98177fdd1e","sourceId":"Item.CXkwfSQHWeyIa7aq"},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"playSaveAudio":false,"clip":"","volume":100}},"autoanimations":{"killAnim":false,"below":false,"override":false,"targetToken":{"enable":false},"sourceToken":{"enable":false},"allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":0.25},"item":{"enableAudio":false,"file":"","delay":100,"volume":0.25}},"autoOverride":{"enable":false},"version":4,"audio":{"a01":{"enable":false,"file":"","delay":100,"volume":0.25},"e01":{"enable":false,"file":"","delay":100,"volume":0.25}}},"rest-recovery":{"data":{"recovery":{"enabled":false}}}},"system":{"description":{"value":"<div class=\"rd__b  rd__b--3\">\n<p>The next time you hit a creature with a melee weapon attack during the spell's duration, your weapon flares with white-hot intensity, and the attack deals an extra [[/r 1d6]] fire damage to the target and causes the target to ignite in flames. At the start of each of its turns until the spell ends, the target must make a Constitution saving throw. On a failed save, it takes [[/r 1d6]] fire damage. On a successful save, the spell ends. If the target or a creature within 5 feet of it uses an action to put out the flames, or if some other effect douses the flames (such as the target being submerged in water), the spell ends.</p>\n<div class=\"rd__spc-inline-post\"></div>\n</div>\n<div class=\"rd__b  rd__b--3\">\n<div class=\"rd__b  rd__b--3\"><span class=\"rd__h rd__h--3\" data-title-index=\"1\">At Higher Levels.</span>\n<p>When you cast this spell using a spell slot of 2nd level or higher, the initial extra damage dealt by the attack increases by [[/r 1d6]] for each slot level above 1st.</p>\n<div class=\"rd__spc-inline-post\"></div>\n</div>\n<div class=\"rd__spc-inline-post\"></div>\n</div>","chat":"","unidentified":""},"source":"PHB pg. 219","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"cover":null,"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"0","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"level":1,"school":"evo","components":{"vocal":true,"somatic":false,"material":false,"ritual":false,"concentration":true,"value":""},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"level","formula":"1d6"},"attributes":{"spelldc":10},"attunement":null},"ownership":{"default":0,"WpiVAovmlZrRTFMX":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":null,"modifiedTime":1684689404974,"lastModifiedBy":"Be8r6Sgxcs3sL08I"}}
{"_id":"aB23YkFsI94D2cGu","name":"Absorb Elements","type":"spell","img":"icons/magic/defensive/shield-barrier-flaming-diamond-red.webp","effects":[{"_id":"iJ9E4fnIwXjfi1TP","flags":{"dae":{"stackable":"none","macroRepeat":"none","transfer":false,"specialDuration":["DamageDealt"]},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"alignment":"","type":"","aura":"None","radius":null,"save":"","savedc":null,"hostile":false,"onlyOnce":false,"time":"None"},"core":{"statusId":""},"dnd5e-helpers":{"rest-effect":"Ignore"}},"changes":[{"key":"system.bonuses.msak.damage","mode":2,"value":"0","priority":20},{"key":"system.bonuses.mwak.damage","mode":2,"value":"0","priority":20}],"disabled":false,"duration":{"startTime":null,"rounds":2,"startTurn":1,"seconds":null,"combat":null,"turns":null,"startRound":null},"icon":"icons/magic/defensive/shield-barrier-flaming-diamond-red.webp","label":"Absorb Elements","tint":null,"transfer":false,"origin":null},{"_id":"8r9eWcqP6QyIbPWU","changes":[{"key":"system.traits.dr.value","mode":2,"value":"fire","priority":20}],"disabled":false,"duration":{"rounds":2,"startTime":null,"seconds":null,"combat":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/defensive/shield-barrier-flaming-diamond-red.webp","label":"Absorb Elements Resistance","origin":"Item.csBPw2sdmOigPnOV","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":["turnEnd"],"transfer":false},"dnd5e-helpers":{"rest-effect":"Ignore"},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false},"core":{"statusId":""}},"tint":null}],"folder":null,"sort":0,"flags":{"dynamiceffects":{"equipActive":[true,true,true],"alwaysActive":[true,true,true]},"mess":{"templateTexture":""},"dae":{"activeEquipped":false,"alwaysActive":false},"exportSource":{"world":"waterdeep-dungeon-of-the-mad-mage","system":"dnd5e","coreVersion":"0.7.9","systemVersion":"1.2.4"},"betterRolls5e":{"quickDesc":{"type":"Boolean","value":true,"altValue":true},"quickAttack":{"type":"Boolean","value":true,"altValue":true},"quickSave":{"type":"Boolean","value":true,"altValue":true},"quickDamage":{"type":"Array","value":[],"altValue":[],"context":[]},"quickVersatile":{"type":"Boolean","value":false,"altValue":false},"quickProperties":{"type":"Boolean","value":true,"altValue":true},"quickCharges":{"type":"Boolean","value":{"use":false,"resource":true},"altValue":{"use":false,"resource":true}},"quickTemplate":{"type":"Boolean","value":true,"altValue":true},"quickOther":{"type":"Boolean","value":true,"altValue":true,"context":""},"quickFlavor":{"type":"Boolean","value":true,"altValue":true},"quickPrompt":{"type":"Boolean","value":false,"altValue":false}},"itemacro":{"macro":{"data":{"_id":null,"name":"Absorb Elements","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"let tactor;\nlet itemname = \"Absorb Elements\";\nif (args[0].tokenUuid) tactor = (await fromUuid(args[0].tokenUuid)).actor;\nelse tactor = game.actors.get(args[0].actorId);\n\nlet dialog = new Promise((resolve, reject) => {\n    new Dialog({\n        title: 'Choose a damage type',\n        content: `\n          <form class=\"flexcol\">\n            <div class=\"form-group\">\n              <select id=\"element\">\n                <option value=\"acid\">Acid</option>\n                <option value=\"cold\">Cold</option>\n                <option value=\"fire\">Fire</option>\n                <option value=\"lightning\">Lightning</option>\n                <option value=\"thunder\">Thunder</option>\n              </select>\n            </div>\n          </form>\n        `,\n        //select element type\n        buttons: {\n            yes: {\n                icon: '<i class=\"fas fa-bolt\"></i>',\n                label: 'Select',\n                callback: async (html) => {\n                    let element = html.find('#element').val();\n                    let effect =  tactor.effects.find(i => i.data.label === itemname);\n                    let changes = duplicate(effect.data.changes);\n                    changes[0].value = `${args[0].spellLevel}d6[${element}]`;\n                    changes[1].value = `${args[0].spellLevel}d6[${element}]`;\n                    await effect.update({changes});\n                    effect =  tactor.effects.find(i => i.data.label === `${itemname} Resistance`);\n                    changes = duplicate(effect.data.changes);\n                    changes[0].value = element;\n                    await effect.update({changes});\n                    resolve();\n                },\n            },\n        }\n    }).render(true);\n})\nawait dialog;","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"midi-qol":{"onUseMacroName":"[postActiveEffects]ItemMacro","effectActivation":false},"core":{"sourceId":"Item.jwe2NqmH3YX6SMVx"},"autoanimations":{"killAnim":false,"below":false,"override":false,"targetToken":{"enable":false},"sourceToken":{"enable":false},"allSounds":{},"autoOverride":{"enable":false},"version":1},"favtab":{"isFavorite":false},"cf":{"id":"temp_lpjg4hxkuum","color":"#000000"},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"playSaveAudio":false,"clip":"","volume":100}},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false,"autoFailFriendly":false,"offHandWeapon":false},"rest-recovery":{"data":{"recovery":{"enabled":false}}}},"system":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>The spell captures some of the incoming energy, lessening its effect on you and storing it for your next melee attack. You have resistance to the triggering damage type until the start of your next turn. Also, the first time you hit with a melee attack on your next turn, the target takes an extra [[/r 1d6]] damage of the triggering type, and the spell ends.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__b  rd__b--3\"><div class=\"rd__b  rd__b--3\"><span class=\"rd__h rd__h--3\" data-title-index=\"37\"> <span class=\"entry-title-inner\">At Higher Levels.</span></span> <p>When you cast this spell using a spell slot of 2nd level or higher, the extra damage increases by [[/r 1d6]] for each slot level above 1st.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__spc-inline-post\"></div></div>","chat":"","unidentified":""},"source":"XGE","activation":{"type":"reaction","cost":1,"condition":"which you take when you take acid, cold, fire, lightning, or thunder damage"},"duration":{"value":1,"units":"round"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"0","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":1,"school":"abj","components":{"value":"","vocal":false,"somatic":true,"material":false,"ritual":false,"concentration":false},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"level","formula":"1d6"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"properties":{}},"ownership":{"default":0,"QwT9izJ4aW8QVTjo":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.291","createdTime":null,"modifiedTime":1671317481906,"lastModifiedBy":"Be8r6Sgxcs3sL08I"}}
{"name":"Holy Weapon","type":"spell","system":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>You imbue a weapon you touch with holy power. Until the spell ends, the weapon emits bright light in a 30-foot radius and dim light for an additional 30 feet. In addition, weapon attacks made with it deal an extra [[/r 2d8]] radiant damage on a hit. If the weapon isn't already a magic weapon, it becomes one for the duration.</p><div class=\"rd__spc-inline-post\"></div><p>As a bonus action on your turn, you can dismiss this spell and cause the weapon to emit a burst of radiance. Each creature of your choice that you can see within 30 feet of the weapon must make a Constitution saving throw. On a failed save, a creature takes [[/r 4d8]] radiant damage, and it is @condition[blinded] for 1 minute. On a successful save, a creature takes half as much damage and isn't @condition[blinded]. At the end of each of its turns, a @condition[blinded] creature can make a Constitution saving throw, ending the effect on itself on a success.</p></div>","chat":"","unidentified":""},"source":"XGE","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"hour"},"target":{"value":null,"width":null,"units":"touch","type":""},"range":{"value":null,"long":null,"units":"touch"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":null,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":5,"school":"evo","components":{"value":"","vocal":true,"somatic":true,"material":false,"ritual":false,"concentration":true},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"none","formula":""}},"img":"icons/weapons/swords/sword-gold-holy.webp","flags":{"plutonium":{"page":"spells.html","source":"XGE","hash":"holy%20weapon_xge","propDroppable":"spell"},"rest-recovery":{"data":{"recovery":{"enabled":false}}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"itemacro":{"macro":{"name":"Holy Weapon","type":"script","scope":"global","command":"const version = \"10.0.17\";\n\ntry {\n    let targetActor = game.user.targets.values().next().value.actor;\n    const targets = Array.from(game.user.targets);\n    let target = game.user.targets.first().actor.uuid;\n    const lastArg = args[args.length - 1];\n    let weapons = targetActor.items.filter(i => i.type === `weapon`);\n    let weapon_content = ``;\n    for (let weapon of weapons) {\n        weapon_content += `<option value=${weapon.id}>${weapon.name}</option>`;\n    }\n    if (args[0] === \"on\") {\n        let content = `\n    <div class=\"form-group\">\n    <label>Weapons : </label>\n    <select name=\"weapons\">\n        ${weapon_content}\n    </select>\n    </div>`;\n\n        new Dialog({\n            title: \"Choose a weapon\",\n            content,\n            buttons:\n            {\n                Ok:\n                {\n                    label: `Ok`,\n                    callback: (html) => {\n                        let itemId = html.find('[name=weapons]')[0].value;\n                        let weaponItem = targetActor.items.get(itemId);\n                        let copy_item = duplicate(weaponItem.toObject(false));\n                        DAE.setFlag(targetActor, `holy weapon`, {\n                            \"_id\" : itemId,\n                            \"system.damage\" : copy_item.system.damage,\n                            \"system.ability\": copy_item.system.ability,\n                            \"system.properties.mgc\": copy_item.system.properties.mgc,\n                            \"name\": copy_item.name\n                        }).then(() => {\n                            copy_item.system.damage.parts.push([\"2d8\",\"radiant\"]);\n                            copy_item.system.properties.mgc = true;\n                            copy_item.name = `${copy_item.name} (Holy weapon)`;\n                            targetActor.updateEmbeddedDocuments(\"Item\", [copy_item]);\n                            ChatMessage.create({content: copy_item.name + \" is empowered with holy weapon\"});\n                        });\n                    }\n                },\n                Cancel:\n                {\n                    label: `Cancel`\n                }\n            }\n        }).render(true);\n    }\n\n    if (args[0] === \"off\") {\n        const flag = DAE.getFlag(targetActor, `holy weapon`);\n        await targetActor.updateEmbeddedDocuments(\"Item\", [flag]);\n        DAE.unsetFlag(targetActor, `holy weapon`);\n        ChatMessage.create({content: flag.name + \" returns to normal\"});\n    }\n} catch (err)  {\n    console.error(`Shillelagh ${version}`, err);\n} \nconsole.log(copy_item.system.damage.parts)","author":"Be8r6Sgxcs3sL08I","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"core":{"sourceId":"Actor.YPh5XDISqV1e9Zth.Item.AuGguvaVm4gCkO1X"},"cf":{"id":"temp_6q1ztzxb2o4"}},"effects":[{"label":"Holy Weapon","icon":"icons/weapons/swords/sword-gold-holy.webp","changes":[{"key":"macro.itemMacro","mode":0,"value":"","priority":20}],"transfer":false,"_id":"eAp3LldHPCPoFKeY","disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"origin":null,"tint":null,"flags":{"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"ownership":{"default":0,"l056gHuKc3178tdK":3,"Be8r6Sgxcs3sL08I":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.290","createdTime":1669682067571,"modifiedTime":1669953788694,"lastModifiedBy":"Be8r6Sgxcs3sL08I"},"folder":null,"sort":0,"_id":"bYWTuqPdGe949Lcf"}
{"name":"Giant Slayer Longsword","type":"weapon","img":"icons/weapons/swords/sword-guard-flanged-purple.webp","effects":[],"folder":null,"sort":0,"flags":{"core":{"sourceId":"Compendium.dnd5e.items.SXjs8JghAPBv7d6j"},"midi-qol":{"onUseMacroName":"[postActiveEffects]ItemMacro","criticalThreshold":"20","fumbleThreshold":null,"effectActivation":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Dragon Slayer Longsword","type":"script","author":"QwT9izJ4aW8QVTjo","img":"icons/svg/dice-target.svg","scope":"global","command":"if (![\"mwak\"].includes(args[0].item.data.actionType)) return {}; // melee weapon attack\nif (args[0].hitTargets.length < 1) return {}; // hit \nif (!args[0].isCritical) return {}; // critical\nactor = await fromUuid(args[0].actorUuid);\nlet target = await fromUuid(args[0].hitTargetUuids[0]);\nconst isGiant = [\"giant\"].some(type => (target?.actor.data.data.details.type?.value || \"\").toLowerCase().includes(type)); // is giant?\nconsole.error(target.actor.data.data.details.type)\nif (!isGiant) return {};\nconst damageRoll = await (new Roll(`1d1*999`)).roll()\nnew MidiQOL.DamageOnlyWorkflow(actor, token, damageRoll.total, null, target ? [target] : [], damageRoll, {flavor: \"Giant Slayer\", itemCardId: args[0].itemCardId})","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"rest-recovery":{"data":{"recovery":{"enabled":false}}},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"cf":{"id":"temp_bnv1ahmj4k"}},"_id":"cIqscUcDPcGHpahb","system":{"description":{"value":"<p><em>(Requires attunement)</em></p>\n<p>You gain a +1 bonus to attack and damage rolls made with this magic weapon.</p>\n<p>When you hit a dragon with this weapon, the dragon takes an extra 3d6 damage of the weapon's type. For the purpose of this weapon, \"dragon\" refers to any creature with the dragon type, including dragon turtles and wyverns.</p>","chat":"","unidentified":""},"source":"DMG pg. 166","quantity":1,"weight":3,"price":8000,"attunement":2,"equipped":true,"rarity":"","identified":true,"activation":{"type":"action","cost":1,"condition":""},"duration":{"value":0,"units":""},"target":{"value":0,"width":null,"units":"","type":""},"range":{"value":5,"long":0,"units":"ft"},"uses":{"value":0,"max":"0","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"mwak","attackBonus":"1","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["1d8 + @mod +1","slashing"]],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"weaponType":"martialM","baseItem":"","properties":{"amm":false,"hvy":false,"fin":false,"fir":false,"foc":false,"lgt":false,"lod":false,"rch":false,"rel":false,"ret":false,"spc":false,"thr":false,"two":false,"ver":true,"ada":false,"mgc":true,"sil":false,"nodam":false,"fulldam":false,"halfdam":false},"proficient":true,"attributes":{"spelldc":10}},"ownership":{"default":0,"QwT9izJ4aW8QVTjo":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.290","createdTime":null,"modifiedTime":1668439882070,"lastModifiedBy":"Be8r6Sgxcs3sL08I"}}
{"name":"Summon Shadowspawn","type":"spell","system":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>You call forth a shadowy spirit. It manifests in an unoccupied space that you can see within range. This corporeal form uses the @creature[Shadow Spirit|TCE] stat block. When you cast the spell, choose an emotion: Fury, Despair, or Fear. The creature resembles a misshapen biped marked by the chosen emotion, which determines certain traits in its stat block. The creature disappears when it drops to 0 hit points or when the spell ends.</p><div class=\"rd__spc-inline-post\"></div><p>The creature is an ally to you and your companions. In combat, the creature shares your initiative count, but it takes its turn immediately after yours. It obeys your verbal commands (no action required by you). If you don't issue any, it takes the @action[Dodge] action and uses its move to avoid danger.</p></div><div class=\"rd__b  rd__b--3\"><div class=\"rd__b  rd__b--3\"><span class=\"rd__h rd__h--3\" data-title-index=\"7\"> <span class=\"entry-title-inner\">At Higher Levels.</span></span> <p>When you cast this spell using a spell slot of 4th level or higher, use the higher level wherever the spell's level appears in the stat block.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__spc-inline-post\"></div></div>","chat":"","unidentified":""},"source":"TCE","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"hour"},"target":{"value":0,"width":null,"units":"","type":""},"range":{"value":90,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":null,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":3,"school":"con","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":true},"materials":{"value":"tears inside a gem worth at least 300 gp","consumed":false,"cost":300,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"none","formula":""}},"img":"icons/magic/unholy/silhouette-evil-horned-giant.webp","flags":{"plutonium":{"page":"spells.html","source":"TCE","hash":"summon%20shadowspawn_tce","propDroppable":"spell"},"rest-recovery":{"data":{"recovery":{"enabled":false}}},"midi-qol":{"effectActivation":false,"onUseMacroName":"[postActiveEffects]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"itemacro":{"macro":{"name":"Summon Shadowspawn","type":"script","scope":"global","command":"const item = actor.items.getName(\"Summon Shadowspawn\");\nconst [{spellLevel: level}] = args;\nconst multiatk = Math.floor(level/2)\nconst summonerDc = actor.system.attributes.spelldc;\nconst summonerAttack = summonerDc - 8;\nconst hp = 35 + 15 * (level - 3);\nconst sourceActor = token?.actor ?? game.user.character;\nconst number = sourceActor.getRollData().details.level;\n\n/* Prompt the user for which type of celestial to summon */\nconst buttonData = {\n  buttons: [{\n    label: 'Fury',\n    value: {\n      token: { name: \"Fury\" },\n      actor: { name: \"Fury\" },\n      actor: {\n        'system.attributes.hp': { value: hp, max: hp }},\n      embedded: {\n        Item: {\n          \"Heated Body (Metal Only)\": warpgate.CONST.DELETE,\n          \"Weight of Sorrow (Despair Only)\": warpgate.CONST.DELETE,\n          \"Dreadful Scream\": {\n\t\t'system.save': {'dc': `${summonerDc}`}},\n          \"Chilling Rend\": {\n             'system.damage.parts': [[`1d12 + 3 + ${level}`, \"cold\"]],\n             'system.attackBonus': `- @mod - @prof + ${summonerAttack}`,\n             },\n        }\n      }\n    }\n  }, {\n    label: 'Despair',\n    value: {\n      token: { name: \"Despair\" },\n      actor: { name: \"Despair\" },\n      actor: {\n        'system.attributes.hp': { value: hp, max: hp }},\n      embedded: {\n        Item: {\n          \"Terror Frenzy (Fury Only)\": warpgate.CONST.DELETE,\n          \"Shadow Stealth (Fear Only)\": warpgate.CONST.DELETE,\n          \"Dreadful Scream\": {\n\t\t'system.save': {'dc': `${summonerDc}`}},\n          \"Chilling Rend\": {\n             'system.damage.parts': [[`1d12 + 3 + ${level}`, \"cold\"]],\n             'system.attackBonus': `- @mod - @prof + ${summonerAttack}`,\n             },\n        }\n      }\n    }\n  },{\n    label: 'Fear',\n    value: {\n      actor: { name: \"Fear\" },\n      actor: {\n        'system.attributes.hp': { value: hp, max: hp }},\n      token: { name: \"Fear\" },\n      embedded: {\n        Item: {\n          \"Terror Frenzy (Fury Only)\": warpgate.CONST.DELETE,\n          \"Weight of Sorrow (Despair Only)\": warpgate.CONST.DELETE,\n          \"Dreadful Scream\": {\n\t\t'system.save': {'dc': `${summonerDc}`}},\n          \"Chilling Rend\": {\n             'system.damage.parts': [[`1d12 + 3 + ${level}`, \"cold\"]],\n             'system.attackBonus': `- @mod - @prof + ${summonerAttack}`,\n             },\n\n        }\n      }\n    }\n  }\n  ],\n  title: 'Which Construct?'\n};\n\nconst celestial = await warpgate.buttonDialog(buttonData);\n\nconst callbacks = {\n    post: async (location, tokenDoc, updates, iteration) => {\n        await myEffectFunction(tokenDoc);\n    }\n}\n\n/* Craft the updates that are common to all celestials */\nconst updates = foundry.utils.mergeObject({\n  token: { \"displayName\": CONST.TOKEN_DISPLAY_MODES.HOVER },\n  actor: {\n    'system.attributes.ac.natural': 11 + level,\n    'system.details.cr': number,\n  },\n  embedded: {\n    Item: {\n      \"Multiattack\": {\n        name: `${multiatk}x Multiattack`\n\t},\n      },\n    }\n }, celestial);\nasync function preSpawn(location, updates, iteration) {\n   await new Sequence()\n    .effect()\n      .file(\"jb2a.divine_smite.caster.blueyellow\")\n      .atLocation(location)\n      .scaleToObject(3)\n      .waitUntilFinished(-500)\n      .fadeIn(100)\n    .effect()\n      .file(\"jb2a.explosion.blueyellow.0\")\n      .atLocation(location)\n      .scaleToObject(4)\n  .play()\n  }\n\n  await warpgate.spawn(\"Shadow Spirit\", updates, {pre:preSpawn});","author":"Be8r6Sgxcs3sL08I","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"core":{"sourceId":"Item.k6agEEgTBOlMpVZv"},"cf":{"id":"temp_6q1ztzxb2o4"}},"effects":[],"ownership":{"default":0,"Be8r6Sgxcs3sL08I":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.291","createdTime":1671301377426,"modifiedTime":1671332569407,"lastModifiedBy":"Be8r6Sgxcs3sL08I"},"folder":null,"sort":0,"_id":"cTjqu8wp2XkJcA09"}
{"name":"Summon Aberration","type":"spell","system":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>You call forth an aberrant spirit. It manifests in an unoccupied space that you can see within range. This corporeal form uses the @creature[Aberrant Spirit|TCE] stat block. When you cast the spell, choose Beholderkin, Slaad, or Star Spawn. The creature resembles an aberration of that kind, which determines certain traits in its stat block. The creature disappears when it drops to 0 hit points or when the spell ends.</p><div class=\"rd__spc-inline-post\"></div><p>The creature is an ally to you and your companions. In combat, the creature shares your initiative count, but it takes its turn immediately after yours. It obeys your verbal commands (no action required by you). If you don't issue any, it takes the @action[Dodge] action and uses its move to avoid danger.</p></div><div class=\"rd__b  rd__b--3\"><div class=\"rd__b  rd__b--3\"><span class=\"rd__h rd__h--3\" data-title-index=\"3\"> <span class=\"entry-title-inner\">At Higher Levels.</span></span> <p>When you cast this spell using a spell slot of 5th level or higher, use the higher level wherever the spell's level appears in the stat block.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__spc-inline-post\"></div></div>","chat":"","unidentified":""},"source":"TCE","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"hour"},"target":{"value":0,"width":null,"units":"","type":""},"range":{"value":90,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":null,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":4,"school":"con","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":true},"materials":{"value":"a pickled tentacle and an eyeball in a platinum-inlaid vial worth at least 400 gp","consumed":false,"cost":400,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"none","formula":""}},"img":"icons/magic/unholy/silhouette-evil-horned-giant.webp","flags":{"plutonium":{"page":"spells.html","source":"TCE","hash":"summon%20aberration_tce","propDroppable":"spell"},"rest-recovery":{"data":{"recovery":{"enabled":false}}},"midi-qol":{"effectActivation":false,"onUseMacroName":"[postActiveEffects]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"itemacro":{"macro":{"name":"Summon Aberration","type":"script","scope":"global","command":"const item = actor.items.getName(\"Summon Aberration\");\nconst [{spellLevel: level}] = args;\nconst multiatk = Math.floor(level/2)\nconst summonerDc = actor.system.attributes.spelldc;\nconst summonerAttack = summonerDc - 8;\nconst hp = 40 + 10 * (level - 4);\nconst sourceActor = token?.actor ?? game.user.character;\nconst number = sourceActor.getRollData().details.level;\n\n/* Prompt the user for which type of celestial to summon */\nconst buttonData = {\n  buttons: [{\n    label: 'Beholderkin',\n    value: {\n      token: { name: \"Beholderkin\" },\n      token: { img: \"modules/GMmacros/img/beholderkin.webp\" },\n      actor: { name: \"Beholderkin\" },\n      actor: { img: \"modules/GMmacros/img/beholderkin.webp\"},\n      actor: {\n        'system.attributes.hp': { value: hp, max: hp }},\n      embedded: {\n        Item: {\n          \"Regeneration (Slaad Only)\": warpgate.CONST.DELETE,\n          \"Whispering Aura (Star Spawn Only)\": warpgate.CONST.DELETE,\n          \"Claws (Slaad Only)\": warpgate.CONST.DELETE,\n          \"Psychic Slam (Star Spawn Only)\": warpgate.CONST.DELETE,\n\n          \"Eye Ray (Beholderkin Only)\": {\n             'system.damage.parts': [[`1d8 + 3 + ${level}`, \"psychic\"]],\n             'system.attackBonus': `- @mod - @prof + ${summonerAttack}`,\n             },\n        }\n      }\n    }\n  }, {\n    label: 'Slaad',\n    value: {\n      token: { name: \"Slaad\" },\n      token: { img: \"modules/GMmacros/img/slaad.png\"},\n      actor: { name: \"Slaad\" },\n      actor: { img: \"modules/GMmacros/img/slaad.png\"},\n      actor: {\n        'system.attributes.hp': { value: hp, max: hp }},\n      embedded: {\n        Item: {\n          \"Whispering Aura (Star Spawn Only)\": warpgate.CONST.DELETE,\n          \"Eye Ray (Beholderkin Only)\": warpgate.CONST.DELETE,\n          \"Psychic Slam (Star Spawn Only)\": warpgate.CONST.DELETE,\n\n          \"Claws (Slaad Only)\": {\n             'system.damage.parts': [[`1d10 + 3 + ${level}`, \"slashing\"]],\n             'system.attackBonus': `- @mod - @prof + ${summonerAttack}`\n             },\n        }\n      }\n    }\n  },{\n    label: 'Star Spawn',\n    value: {\n      actor: { name: \"Star Spawn\" },\n      actor: { img: \"modules/GMmacros/img/Starspawn.png\" },\n      actor: {\n        'system.attributes.hp': { value: hp, max: hp }},\n      token: { name: \"Star Spawn\" },\n      token: { img: \"modules/GMmacros/img/Starspawn.png\" },\n      embedded: {\n        Item: {\n          \"Regeneration (Slaad Only)\": warpgate.CONST.DELETE,\n          \"Eye Ray (Beholderkin Only)\": warpgate.CONST.DELETE,\n          \"Claws (Slaad Only)\": warpgate.CONST.DELETE,\n\n          \"Psychic Slam (Star Spawn Only)\": {\n             'system.damage.parts': [[`1d8 + 3 + ${level}`, \"psychic\"]],\n             'system.attackBonus': `- @mod - @prof + ${summonerAttack}`,\n             },\n\n        }\n      }\n    }\n  }\n  ],\n  title: 'Which Undead?'\n};\n\nconst celestial = await warpgate.buttonDialog(buttonData);\n\nconst callbacks = {\n    post: async (location, tokenDoc, updates, iteration) => {\n        await myEffectFunction(tokenDoc);\n    }\n}\n\n/* Craft the updates that are common to all celestials */\nconst updates = foundry.utils.mergeObject({\n  token: { \"displayName\": CONST.TOKEN_DISPLAY_MODES.HOVER },\n  actor: {\n    'system.attributes.ac.natural': 11 + level,\n    'system.details.cr': number,\n  },\n  embedded: {\n    Item: {\n      \"Multiattack\": {\n        name: `${multiatk}x Multiattack`\n\t},\n      },\n    }\n }, celestial);\nasync function preSpawn(location, updates, iteration) {\n   await new Sequence()\n    .effect()\n      .file(\"jb2a.divine_smite.caster.blueyellow\")\n      .atLocation(location)\n      .scaleToObject(3)\n      .waitUntilFinished(-500)\n      .fadeIn(100)\n    .effect()\n      .file(\"jb2a.explosion.blueyellow.0\")\n      .atLocation(location)\n      .scaleToObject(4)\n  .play()\n  }\n\n  await warpgate.spawn(\"Aberrant Spirit\", updates, {pre:preSpawn});","author":"Be8r6Sgxcs3sL08I","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"core":{"sourceId":"Item.xiH2QoaSc4KnNUDJ"},"cf":{"id":"temp_6q1ztzxb2o4"}},"effects":[],"ownership":{"default":0,"Be8r6Sgxcs3sL08I":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.291","createdTime":1671301377042,"modifiedTime":1671322859920,"lastModifiedBy":"Be8r6Sgxcs3sL08I"},"folder":null,"sort":0,"_id":"dD8gEYLtMN3sX85o"}
{"_id":"e8HUctJp1VHZN4CV","name":"Potion of Fire Breath","type":"consumable","img":"icons/consumables/potions/bottle-bulb-corked-glowing-red.webp","data":{"description":{"value":"<p><em>After drinking this potion, you can use a bonus action to exhale a cone of fire of 15 feet from you (3 charges). The target must make a DC 14 Dexterity saving throw, taking 4d6 fire damage on a failed save, or half as much damage on a successful one. The effect ends after you exhale the fire three times or when 1 hour has passed.</em></p>\n<p><em>This potion's orange liquid flickers, and smoke fills the top of the container and wafts out whenever it is opened.</em></p>","chat":"","unidentified":""},"source":"DMG pg. 188","quantity":1,"weight":0.1,"price":300,"attunement":0,"equipped":false,"rarity":"uncommon","identified":true,"activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"hour"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":null,"long":null,"units":"touch"},"uses":{"value":1,"max":"1","per":"charges","autoDestroy":true,"autoUse":true},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"consumableType":"potion","attributes":{"spelldc":10}},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"1uVBPOTvhVPb6a7S":3},"flags":{"dynamiceffects":{"equipActive":true,"alwaysActive":false,"effects":[{"modSpecKey":"data.traits.dr.value","value":"fire","mode":"+","targetSpecific":false,"id":1,"itemId":"AENCWgyRd4Kp5gxG","active":true,"_targets":[]}]},"core":{"sourceId":"Compendium.Midi-SRD.MIDI SRD Items.KJKIdlYFwfpjWZPs"},"scene-packer":{"hash":"8fda54229ce8b873fc16ea8dd69e799b8a6c3b24","sourceId":"Item.kh594jBYxzZiBiNf"},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"playSaveAudio":false,"clip":"","volume":100}},"rest-recovery":{"data":{"recovery":{"enabled":false}}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Potion of Fire Breath","type":"script","author":"1uVBPOTvhVPb6a7S","img":"icons/svg/dice-target.svg","scope":"global","command":"const weaponData = {\n      name: \"Fire Breath\",\n      type: \"weapon\",\n      img: \"icons/creatures/abilities/dragon-fire-breath-orange.webp\",\n      data: {\n        equipped: true,\n        activation: { type: \"bonus\", cost: 1, condition: \"\",},\n        target: { value: 15, type: \"cone\", units: \"ft\", },\n        actionType: \"save\",\n\tuses: { value: 3, max: 3 },\n\tsave: { ability: \"dex\", dc: 14, scaling: \"flat\"},\n        damage: { parts: [[`4d6`, \"fire\"]], versatile: \"\" },\n\t}\n}\nawait actor.createEmbeddedDocuments(\"Item\", [weaponData]);","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"cf":{"id":"temp_bnv1ahmj4k"}}}
{"_id":"eUs1fgUWJjnGBORK","name":"Crown of Madness","type":"spell","img":"modules/plutonium/media/icon/spell/phb-crown-of-madness.webp","data":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>One humanoid of your choice that you can see within range must succeed on a Wisdom saving throw or become @condition[charmed] by you for the duration. While the target is @condition[charmed] in this way, a twisted crown of jagged iron appears on its head, and a madness glows in its eyes.</p><div class=\"rd__spc-inline-post\"></div><p>The @condition[charmed] target must use its action before moving on each of its turns to make a melee attack against a creature other than itself that you mentally choose. The target can act normally on its turn if you choose no creature or if none are within its reach.</p><p>On your subsequent turns, you must use your action to maintain control over the target, or the spell ends. Also, the target can make a Wisdom saving throw at the end of each of its turns. On a success, the spell ends.</p></div>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":0,"width":null,"units":"","type":""},"range":{"value":120,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"save","attackBonus":null,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"wis","dc":null,"scaling":"spell"},"level":2,"school":"enc","components":{"value":"","vocal":true,"somatic":true,"material":false,"ritual":false,"concentration":true},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"none","formula":""}},"effects":[{"_id":"urf91jgrd4qfofo8","changes":[{"key":"flags.midi-qol.OverTime","mode":0,"value":"turn=end,\nsaveAbility=wis,\nsaveDC=@attributes.spelldc","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"modules/dfreds-convenient-effects/images/charmed.svg","label":"Charmed","tint":null,"transfer":false,"flags":{"core":{"statusId":"Convenient Effect: Charmed"},"isConvenient":true,"convenientDescription":"No active effects","dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":false},"dnd5e-helpers":{"rest-effect":"Ignore"},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"selectedKey":"flags.midi-qol.OverTime"}],"folder":null,"sort":0,"permission":{"default":0,"QwT9izJ4aW8QVTjo":3},"flags":{"srd5e":{"page":"spells.html","source":"PHB","hash":"crown%20of%20madness_phb","propDroppable":"spell"},"scene-packer":{"hash":"3ce9004b8b6fda8be4cf426cdb6cb1ea0a86196d","sourceId":"Item.TJ2iW1iitdpJRWw4"},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"playSaveAudio":false,"clip":"","volume":100}},"midi-qol":{"effectActivation":false,"forceCEOff":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"core":{"sourceId":"Item.TJ2iW1iitdpJRWw4"},"cf":{"id":"temp_lpjg4hxkuum"}}}
{"name":"Spiritual Weapon","type":"spell","img":"modules/plutonium/media/icon/spell/phb-spiritual-weapon.webp","effects":[],"flags":{"srd5e":{"page":"spells.html","source":"PHB","hash":"spiritual%20weapon_phb","propDroppable":"spell"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"criticalThreshold":"20","onUseMacroName":"[postActiveEffects]ItemMacro","effectActivation":false,"forceCEOff":false},"itemacro":{"macro":{"data":{"_id":null,"name":"Spiritual Weapon","type":"script","author":"rbM5nB1AbUwbj4yJ","img":"icons/svg/dice-target.svg","scope":"global","command":"// need de Warp Gate and sequencer\n// also needs a Spiritual Weapon NPC actor\nconst summonType = \"Spiritual Weapon\";\nconst modificador = actor.data.data.abilities.wis.value\nconst cer = actor.data.data.details.level\nconst updates = {\n  actor: {\n      'data.abilities.wis' : {value: modificador},\n      'data.details.cr' : cer\n  }\n}\n\nChatMessage.create({ content: `An Spiritual Weapon has been summoned!` });\n\nasync function myEffectFunction(template) {\n//prep summoning area\nlet effect = '';\n\neffect = 'modules/automated-evocations/assets/animations/ring_CIRCLE_01.webm';\n\nnew Sequence()\n    .sound()\n        .file(\"sound/Weapon-Spell/melee_hit.mp3\")\n    .effect()\n        .file(effect)\n        .atLocation(template)\n        .center()\n        .JB2A()\n        .scale(1.0)\n        .wait(700)\n    .effect()\n          .file(\"modules/automated-evocations/assets/animations/electric_blast_01.webm\")\n          .atLocation(template)\n          .center()\n          .randomRotation()\n          .scale(.3)\n          .repeats(6, 100, 170, 250, 320, 400)\n    .play()\n}\n\nasync function postEffects(template, token) {\n//bring in our minion\nnew Sequence()\n    .animation()\n        .on(token)\n            .fadeIn(500)\n    .play()\n}\n\nconst callbacks = {\n    pre: async (template) => {\n        myEffectFunction(template);\n        await warpgate.wait(500);\n    },\n    post: async (template, token) => {\n    postEffects(template,token);\n    await warpgate.wait(500);\n    }\n};\n\nconst options = {controllingActor: actor};\n\nwarpgate.spawn(summonType, updates, callbacks, options);","folder":null,"sort":0,"permission":{"default":0},"flags":{}},"name":"Spiritual Weapon","type":"script","scope":"global","command":"// need de Warp Gate and sequencer\n// also needs a Spiritual Weapon NPC actor\nconst actorD = game.actors.get(args[0].actor._id);\nconst spellLevel = args[0].spellLevel;\nconst summonType = \"Spiritual Weapon\";\nconst modificador = actor.data.data.abilities.wis.value\nconst cer = actor.data.data.details.level\nconst updates = {\n  token : {\n\t'name': `Spt Wp nvl ${spellLevel}`,\n\t'displayName': 50\n  },\n  actor: {\n      'data.abilities.wis' : {value: modificador},\n      'data.details.cr' : cer\n  }\n}\n\nChatMessage.create({ content: `An Spiritual Weapon has been summoned!` });\n\nasync function myEffectFunction(template) {\n//prep summoning area\nlet effect = '';\n\neffect = 'modules/automated-evocations/assets/animations/ring_CIRCLE_01.webm';\n\nnew Sequence()\n    .sound()\n        .file(\"sound/Weapon-Spell/melee_hit.mp3\")\n    .effect()\n        .file(effect)\n        .atLocation(template)\n        .center()\n        .JB2A()\n        .scale(1.0)\n        .wait(700)\n    .effect()\n          .file(\"modules/automated-evocations/assets/animations/electric_blast_01.webm\")\n          .atLocation(template)\n          .center()\n          .randomRotation()\n          .scale(.3)\n          .repeats(6, 100, 170, 250, 320, 400)\n    .play()\n}\n\nasync function postEffects(template, token) {\n//bring in our minion\nnew Sequence()\n    .animation()\n        .on(token)\n            .fadeIn(500)\n    .play()\n}\n\nconst callbacks = {\n    pre: async (template) => {\n        myEffectFunction(template);\n        await warpgate.wait(500);\n    },\n    post: async (template, token) => {\n    postEffects(template,token);\n    await warpgate.wait(500);\n    }\n};\n\nconst options = {controllingActor: actor};\n\nwarpgate.spawn(summonType, updates, callbacks, options);","author":"Be8r6Sgxcs3sL08I","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"siftoolkit":{"SIFData":{"alpha":50,"coneOrigin":1,"ignoreDuration":false,"loopAnimations":true,"texture":"","useTexture":false}},"core":{"sourceId":"Item.qjLXWsYbKlzxWD3Z"},"rest-recovery":{"data":{"recovery":{"enabled":false}}},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false,"autoFailFriendly":false,"offHandWeapon":false},"cf":{"id":"temp_6q1ztzxb2o4"}},"system":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>You create a floating, spectral weapon within range that lasts for the duration or until you cast this spell again. When you cast the spell, you can make a melee spell attack against a creature within 5 feet of the weapon. On a hit, the target takes force damage equal to [[/r 1d8]] + your spellcasting ability modifier.</p><div class=\"rd__spc-inline-post\"></div><p>As a bonus action on your turn, you can move the weapon up to 20 feet and repeat the attack against a creature within 5 feet of it.</p><p>The weapon can take whatever form you choose. Clerics of deities who are associated with a particular weapon (as St. Cuthbert is known for his mace and Thor for his hammer) make this spell's effect resemble that weapon.</p></div><div class=\"rd__b  rd__b--3\"><div class=\"rd__b  rd__b--3\"><span class=\"rd__h rd__h--3\" data-title-index=\"114\"> <span class=\"entry-title-inner help-subtle\">At Higher Levels.</span></span> <p>When you cast this spell using a spell slot of 3rd level or higher, the damage increases by [[/r 1d8]] for every two slot levels above 2nd.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__spc-inline-post\"></div></div>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":null,"width":null,"units":"none","type":""},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":0,"max":"0","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"wis","actionType":"other","attackBonus":"0","chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"wis"},"level":2,"school":"evo","components":{"value":"","vocal":true,"somatic":true,"material":false,"ritual":false,"concentration":false},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"none","formula":""}},"ownership":{"default":0,"rbM5nB1AbUwbj4yJ":3,"Be8r6Sgxcs3sL08I":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.291","createdTime":1668361539041,"modifiedTime":1671249825024,"lastModifiedBy":"Be8r6Sgxcs3sL08I"},"folder":null,"sort":0,"_id":"fmUoQ6xN3NnPhMql"}
{"_id":"hJtxGFRQtTrzrnHd","name":"Chromatic Orb","type":"spell","img":"modules/GMmacros/img/ChromaticOrb.png","effects":[{"_id":"5dvypjBUJh2hekYB","changes":[{"key":"macro.itemMacro","mode":0,"value":"@item.level","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"modules/plutonium/media/icon/spell/phb-chromatic-orb.webp","label":"Chromatic Orb","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":false},"dnd5e-helpers":{"rest-effect":"Ignore"},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"origin":null}],"folder":null,"sort":0,"flags":{"srd5e":{"page":"spells.html","source":"PHB","hash":"chromatic%20orb_phb","propDroppable":"spell"},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"clip":"","volume":100}},"itemacro":{"macro":{"data":{"_id":null,"name":"Chromatic Orb","type":"script","author":"QwT9izJ4aW8QVTjo","img":"icons/svg/dice-target.svg","scope":"global","command":"async function wait(ms) {\n  return new Promise(resolve => {\n    setTimeout(resolve, ms);\n  });\n}\nconst damage_types = [\"acid\", \"cold\", \"fire\", \"lightning\", \"poison\", \"thunder\"];\n\n(async () => {\n  if (args[0].hitTargets.length === 0) return {};\n  let actorD = game.actors.get(args[0].actor._id);\n  let tokenD = canvas.tokens.get(args[0].tokenId);\n  let damage_type = await choose(damage_types, 'Choose Damage Type : ');\n  let target = canvas.tokens.get(args[0].hitTargets[0].id);\n  let numDice = 2 + args[0].spellLevel\n  if (args[0].isCritical) numDice = numDice * 2;\n  let damageRoll = new Roll(`${numDice}d8`).evaluate({ async: false });\n  new MidiQOL.DamageOnlyWorkflow(actorD, tokenD, damageRoll.total, damage_type, [target], damageRoll, { flavor: `(${CONFIG.DND5E.damageTypes[damage_type]})`, itemCardId: args[0].itemCardId, useOther: false });\n})();\n\nasync function choose(options = [], prompt = ``) {\n  let value = await new Promise((resolve) => {\n\n    let dialog_options = (options[0] instanceof Array)\n      ? options.map(o => `<option value=\"${o[0]}\">${o[1]}</option>`).join(``)\n      : options.map(o => `<option value=\"${o}\">${o}</option>`).join(``);\n\n    let content = `<form><div class=\"form-group\"><label for=\"choice\">${prompt}</label><select id=\"choice\">${dialog_options}</select></div></form>`;\n\n    new Dialog({\n      content,\n      buttons: { OK: { label: `OK`, callback: async (html) => { resolve(html.find('#choice').val()); } } }\n    }).render(true);\n  });\n  return value;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"midi-qol":{"criticalThreshold":"20","onUseMacroName":"[postActiveEffects]ItemMacro","fumbleThreshold":null,"effectActivation":false},"core":{"sourceId":"Item.FSWHquxHRK30GnwD"},"autoanimations":{"killAnim":false,"animLevel":false,"options":{"ammo":false,"loops":1,"loopDelay":250,"enableCustomExplosion":false,"customExplosion":""},"override":true,"allSounds":{"item":{"enableAudio":false},"explosion":{"audioExplodeEnabled":false}},"sourceToken":{"enable":false},"targetToken":{"enable":false},"animType":"t6","animName":"firebolt","color":"purple","explosion":true,"exAnimLevel":false,"explodeVariant":"explosion","explodeColor":"purple","explodeRadius":5,"explodeDelay":0},"cf":{"id":"temp_lpjg4hxkuum"},"rest-recovery":{"data":{"recovery":{"enabled":false}}},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false}},"system":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>You hurl a 4-inch-diameter sphere of energy at a creature that you can see within range. You choose acid, cold, fire, lightning, poison, or thunder for the type of orb you create, and then make a ranged spell attack against the target. If the attack hits, the creature takes [[/r 3d8]] damage of the type you chose.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__b  rd__b--3\"><div class=\"rd__b  rd__b--3\"><span class=\"rd__h rd__h--3\" data-title-index=\"24\"> <span class=\"entry-title-inner help-subtle\">At Higher Levels.</span></span> <p>When you cast this spell using a spell slot of 2nd level or higher, the damage increases by [[/r 1d8]] for each slot level above 1st.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__spc-inline-post\"></div></div>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":0,"width":null,"units":"","type":""},"range":{"value":90,"long":null,"units":"ft"},"uses":{"value":0,"max":"0","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"rsak","attackBonus":"0","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":1,"school":"evo","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":false},"materials":{"value":"a diamond worth at least 50 gp","consumed":false,"cost":50,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"level","formula":"1d8"}},"ownership":{"default":0,"QwT9izJ4aW8QVTjo":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.291","createdTime":null,"modifiedTime":1671317372383,"lastModifiedBy":"Be8r6Sgxcs3sL08I"}}
{"name":"Sleep","type":"spell","img":"modules/GMmacros/img/phb-sleep.webp","effects":[],"folder":null,"sort":0,"flags":{"srd5e":{"page":"spells.html","source":"PHB","hash":"sleep_phb"},"core":{"sourceId":"Compendium.plutonium.spells.AlbiBe8uZFPEeakZ"},"midi-qol":{"onUseMacroName":"[postActiveEffects]ItemMacro","effectActivation":false,"forceCEOff":true},"autoanimations":{"killAnim":false,"override":false,"animType":"t1","animName":"","bards":{"bardAnim":"a1","bardTarget":true,"bardTargetAnim":"a1","bardTargetColor":"a1","bardSelf":true,"marker":true,"markerColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","hmAnim":"a1","color":"n1","spellOptions":{"spellLoops":1},"uaStrikeType":"physical","dtvar":"dt1","divineSmite":{"dsEnable":false,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"a1"},"explosion":false,"explodeVariant":"ev1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":0.25},"item":{"enableAudio":false,"file":"","delay":100,"volume":0.25}},"selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"teleDist":30},"itemacro":{"macro":{"data":{"_id":null,"name":"Sleep","type":"script","author":"RtW728LVc3YeOwN6","img":"icons/svg/dice-target.svg","scope":"global","command":"// HP Pool Effect\n// Works with items like the sleep spell that apply an effect to targets whose total hp don't exceed a rolled value, in ascending order\n// Requires MidiQOL and DFred's Convenient Effects to work\n// The item should reference this as an On Use macro\n// The item also needs to have a damage formula whose type is set to \"No Damage\"\n// \"Don't Apply Convenient Effect\" should be checked on the item\n// The DFred's Convenient Effects module should have an effect that matches the item's name\n\nconst workflow = args[0];\n\nif(!workflow?.damageTotal || !workflow?.failedSaves || !workflow?.item) {\n    ui.notifications.warn(\"No valid workflow found.\")\n    return;\n}\n\nlet hpPool = workflow.damageTotal;\nconst effectTargets = [];\n\nworkflow.failedSaves\n    .sort((target1, target2) => target1.actor.data.data.attributes.hp.value - target2.actor.data.data.attributes.hp.value)\n    .some(target => {\n        const targetHp = target.actor.data.data.attributes.hp.value;\n        if(hpPool >= targetHp) {\n            hpPool -= targetHp;\n            effectTargets.push(target);\n            return false;\n        } \n        else return true;\n    });\n    \neffectTargets.forEach(target => {\n    // Probably could be rewritten to apply effects from the item itself or some other source\n    const effectName = workflow.item.name;\n    const uuid = target.actor.uuid;\n    game.dfreds.effectInterface.addEffect({ effectName: effectName, uuid })\n});","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"playSaveAudio":false,"clip":"","volume":100}},"scene-packer":{"hash":"ec20c258192b364edf6e616ed5f7c3dd29d01c8f","sourceId":"Item.VfKTcRYSSuDj9Dhm"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"rest-recovery":{"data":{"recovery":{"enabled":false}}},"cf":{"id":"temp_6q1ztzxb2o4"}},"_id":"hhJeL6b81aopAeqs","system":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>This spell sends creatures into a magical slumber. Roll [[/r 5d8]]; the total is how many hit points of creatures this spell can affect. Creatures within 20 feet of a point you choose within range are affected in ascending order of their current hit points (ignoring <a href=\"https://5e.tools/conditionsdiseases.html#unconscious_phb\">unconscious</a> creatures).</p><div class=\"rd__spc-inline-post\"></div><p>Starting with the creature that has the lowest current hit points, each creature affected by this spell falls <a href=\"https://5e.tools/conditionsdiseases.html#unconscious_phb\">unconscious</a> until the spell ends, the sleeper takes damage, or someone uses an action to shake or slap the sleeper awake. Subtract each creature's hit points from the total before moving on to the creature with the next lowest hit points. A creature's hit points must be equal to or less than the remaining total for that creature to be affected.</p><p>Undead and creatures immune to being <a href=\"https://5e.tools/conditionsdiseases.html#charmed_phb\">charmed</a> aren't affected by this spell.</p></div><div class=\"rd__b  rd__b--3\"><div class=\"rd__b  rd__b--3\"><span class=\"rd__h rd__h--3\" data-title-index=\"7472\"> <span class=\"entry-title-inner\">At Higher Levels.</span></span> <p>When you cast this spell using a spell slot of 2nd level or higher, roll an additional [[/r 2d8]] for each slot level above 1st.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__spc-inline-post\"></div></div>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":20,"width":null,"units":"ft","type":"sphere"},"range":{"value":90,"long":null,"units":"ft"},"uses":{"value":0,"max":"0","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[["5d8","midi-none"]],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":1,"school":"enc","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":false},"materials":{"value":"a pinch of fine sand, rose petals, or a cricket","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"always","prepared":true},"scaling":{"mode":"level","formula":"2d8"}},"ownership":{"default":0,"RtW728LVc3YeOwN6":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.290","createdTime":null,"modifiedTime":1669931353122,"lastModifiedBy":"Be8r6Sgxcs3sL08I"}}
{"_id":"kooHw4Bs0e8Wzqu8","name":"#[CF_tempEntity]","type":"weapon","img":"icons/svg/item-bag.svg","effects":[],"folder":null,"sort":0,"flags":{"cf":{"id":"temp_bnv1ahmj4k","folderPath":[],"color":"#cbd723","fontColor":"#FFFFFF","name":"Item","children":[],"icon":"","sorting":"a","contents":["e8HUctJp1VHZN4CV","MtJ2H7j2NA83zJIV","cIqscUcDPcGHpahb"],"version":"2.4.5"}},"system":{"description":{"value":"","chat":"","unidentified":""},"source":"","quantity":1,"weight":0,"price":0,"attunement":0,"equipped":false,"rarity":"","identified":true,"activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null,"recovery":""},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":null,"attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"weaponType":"simpleM","baseItem":"","properties":{},"proficient":true},"ownership":{"default":0,"QwT9izJ4aW8QVTjo":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.290","createdTime":null,"modifiedTime":1668439882070,"lastModifiedBy":"Be8r6Sgxcs3sL08I"}}
{"name":"Banishing Smite","type":"spell","img":"modules/plutonium/media/icon/spell/phb-banishing-smite.webp","effects":[{"_id":"KFr4G5i4TJlAOZdz","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro.Banishing Smite","priority":20},{"key":"flags.midi-qol.banishingSmite.level","mode":5,"value":"5","priority":20}],"disabled":false,"duration":{"startTime":null,"rounds":10,"seconds":null,"combat":null,"turns":null,"startRound":null,"startTurn":null},"icon":"modules/plutonium/media/icon/spell/phb-banishing-smite.webp","label":"Banishing Smite","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":["1Hit:mwak","1Hit:rwak"],"transfer":false,"durationExpression":""},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false,"displayTemp":false},"core":{"statusId":""},"dnd5e-helpers":{"rest-effect":"Ignore"}},"tint":null,"origin":null}],"folder":null,"sort":0,"flags":{"srd5e":{"page":"spells.html","source":"PHB","hash":"banishing%20smite_phb"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"itemacro":{"macro":{"data":{"_id":null,"name":"Banishing Smite","type":"script","author":"WpiVAovmlZrRTFMX","img":"icons/svg/dice-target.svg","scope":"global","command":"// v1.0. Requires midi-qol and ATL.\nif (![\"mwak\",\"rwak\"].includes(args[0].item.data.actionType)) return {}; \nfor (let tokenUuid of args[0].hitTargetUuids) {\n    const target = await fromUuid(tokenUuid);\n    const targetActor = target.actor;\n    if (!targetActor) continue;\n\n}\nlet spellLevel = 5;\nif (args[0].isCritical) spellLevel = spellLevel * 2;\nreturn{damageRoll: `${spellLevel}d10[force]`, flavor: \"Banishing Smite: se o alvo ficar com 50HP ou menos, ele  banido por 1 min\"}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"midi-qol":{"onUseMacroName":"","effectActivation":false},"core":{"sourceId":"Item.ifF2F2jHDU2MLnte"},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"playSaveAudio":false,"clip":"","volume":100}},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"autoFailFriendly":false,"offHandWeapon":false,"ignoreTotalCover":false},"cf":{"id":"temp_lpjg4hxkuum"},"scene-packer":{"hash":"a4dbbcd91964ff0a54db4cd382b1dcd490a34b31","sourceId":"Item.O0DjEGjHV6ge0Ui9"},"rest-recovery":{"data":{"recovery":{"enabled":false}}}},"_id":"lPp5ru8rQbrI48yz","system":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>The next time you hit a creature with a weapon attack before this spell ends, your weapon crackles with force, and the attack deals an extra [[/r 5d10]] force damage to the target. Additionally, if this attack reduces the target to 50 hit points or fewer, you banish it. If the target is native to a different plane of existence than the one you're on, the target disappears, returning to its home plane. If the target is native to the plane you're on, the creature vanishes into a harmless demiplane. While there, the target is <a href=\"https://5e.tools/conditionsdiseases.html#incapacitated_phb\" data-plut-hover=\"{&quot;page&quot;:&quot;conditionsdiseases.html&quot;,&quot;source&quot;:&quot;PHB&quot;,&quot;hash&quot;:&quot;incapacitated_phb&quot;}\">incapacitated</a>. It remains there until the spell ends, at which point the target reappears in the space it left or in the nearest unoccupied space if that space is occupied.</p><div class=\"rd__spc-inline-post\"></div></div>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"0","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":5,"school":"abj","components":{"value":"","vocal":true,"somatic":false,"material":false,"ritual":false,"concentration":true},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"none","formula":""},"attunement":0},"ownership":{"default":0,"WpiVAovmlZrRTFMX":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.291","createdTime":null,"modifiedTime":1671422759331,"lastModifiedBy":"Be8r6Sgxcs3sL08I"}}
{"name":"Illusory Dragon","type":"spell","system":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>By gathering threads of shadow material from the Shadowfell, you create a Huge shadowy dragon in an unoccupied space that you can see within range. The illusion lasts for the spell's duration and occupies its space, as if it were a creature.</p><div class=\"rd__spc-inline-post\"></div><p>When the illusion appears, any of your enemies that can see it must succeed on a Wisdom saving throw or become @condition[frightened] of it for 1 minute. If a @condition[frightened] creature ends its turn in a location where it doesn't have line of sight to the illusion, it can repeat the saving throw, ending the effect on itself on a success.</p><p>As a bonus action on your turn, you can move the illusion up to 60 feet. At any point during its movement, you can cause it to exhale a blast of energy in a 60-foot cone originating from its space. When you create the dragon, choose a damage type: acid, cold, fire, lightning, necrotic, or poison. Each creature in the cone must make an Intelligence saving throw, taking [[/r 7d6]] damage of the chosen damage type on a failed save, or half as much damage on a successful one.</p><p>The illusion is tangible because of the shadow stuff used to create it, but attacks miss it automatically, it succeeds on all saving throws, and it is immune to all damage and conditions. A creature that uses an action to examine the dragon can determine that it is an illusion by succeeding on an Intelligence (@skill[Investigation]) check against your spell save DC. If a creature discerns the illusion for what it is, the creature can see through it and has advantage on saving throws against its breath.</p></div>","chat":"","unidentified":""},"source":"XGE","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":null,"width":null,"units":"none","type":""},"range":{"value":120,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"cha","actionType":"other","attackBonus":null,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"cha"},"level":8,"school":"ill","components":{"value":"","vocal":false,"somatic":true,"material":false,"ritual":false,"concentration":true},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"always","prepared":true},"scaling":{"mode":"none","formula":""}},"img":"icons/creatures/eyes/humanoid-single-purple-blue.webp","flags":{"plutonium":{"page":"spells.html","source":"XGE","hash":"illusory%20dragon_xge","propDroppable":"spell"},"rest-recovery":{"data":{"recovery":{"enabled":false}}},"midi-qol":{"effectActivation":false,"onUseMacroName":"[postActiveEffects]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"itemacro":{"macro":{"name":"Illusory Dragon","type":"script","scope":"global","command":"const summonType = \"Illusory Dragon\";\n\nasync function myEffectFunction(template) {\nlet effect = '';\neffect = 'modules/GMmacros/videos-gifs-animated/assets_animations_ring_CIRCLE_01.webm';\nnew Sequence()\n    .effect()\n        .file(effect)\n        .atLocation(template)\n        .center()\n        .JB2A()\n        .scale(1.0)\n        .wait(700)\n    .play()\n}\nconst callbacks = {\n    pre: async (template) => {\n        myEffectFunction(template);\n        await warpgate.wait(500);\n    },\n};\n\n\nlet dialog = new Promise((resolve, reject) => {\n    new Dialog({\n        title: 'Choose a damage type',\n        content: `\n          <form class=\"flexcol\">\n            <div class=\"form-group\">\n              <select id=\"element\">\n                <option value=\"acid\">Acid</option>\n                <option value=\"cold\">Cold</option>\n                <option value=\"fire\">Fire</option>\n                <option value=\"lightning\">Lightning</option>\n                <option value=\"necrotic\">Necrotic</option>\n                <option value=\"poison\">Poison</option>\n              </select>\n            </div>\n          </form>\n        `,\n        //select element type\n        buttons: {\n            yes: {\n                icon: '<i class=\"fas fa-bolt\"></i>',\n                label: 'Select',\n                callback: async (html) => {\n                let element = html.find('#element').val();\n\t\tconst updates = {\n\t\t\tactor: {\n        \t\t'name' :  `${element} Illusory Dragon`},\n\t\t\tembedded: { \n\t\t\t  Item: {\n\t \t\t\t\"Breath\" : {\n\t\t\t\t    'name': `${element} Breath`,\n\t  \t\t\t    'data.damage.parts': [[`7d6`,`${element}`]],\n\t\t\t\t    'system.save': {'dc': `${summonerDc}`},\n\t\t\t\t}\n \t\t\t       }\n\t\t    \t}\n\t\t}\n\t\tconst options = {controllingActor: actor};\n\t\twarpgate.spawn(summonType, updates, callbacks, options);\n                resolve();\n                },\n            },\n        }\n    }).render(true);\n})","author":"Be8r6Sgxcs3sL08I","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"core":{"sourceId":"Actor.CQaWddu2rSc1igDg.Item.wSWXBJnc53RP9HKM"},"cf":{"id":"temp_6q1ztzxb2o4"}},"effects":[],"ownership":{"default":0,"Xvz9L40UsVHWsWpn":3,"Be8r6Sgxcs3sL08I":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.291","createdTime":1671212940358,"modifiedTime":1671301239879,"lastModifiedBy":"Be8r6Sgxcs3sL08I"},"folder":null,"sort":0,"_id":"mVcBzgAJ6loHEVL5"}
{"name":"#[CF_tempEntity]","type":"weapon","flags":{"cf":{"id":"temp_6q1ztzxb2o4","name":"Magias_itemmacro","color":"#49a437","fontColor":"#FFFFFF","icon":"","sorting":"m","contents":["KaLnVaBNHOpDLEHF","7LHvzm1F8aJpLzbf","bYWTuqPdGe949Lcf","mVcBzgAJ6loHEVL5","F6j4KmRGUvKWZ9kI","hhJeL6b81aopAeqs","fmUoQ6xN3NnPhMql","KQjwLGNJuplCajT4","qwh83wilynnJSo17","s5sdlfsd2CLnLwIq","HqWYW8sSHhfaMWHf","dD8gEYLtMN3sX85o","KwnLL3GIQygdgMzJ","4WGIAGrMAQCxKNqw","0cnrVDKRTr0KmUW3","2biaBQmZTkKSAhrl","cTjqu8wp2XkJcA09","1BtolCJNJcPR9w1r"],"children":[],"folderPath":[],"version":"2.5.5"}},"img":"icons/svg/item-bag.svg","system":{"description":{"value":"","chat":"","unidentified":""},"source":"","quantity":1,"weight":0,"price":0,"attunement":0,"equipped":false,"rarity":"","identified":true,"activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null,"recovery":""},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":null,"attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"weaponType":"simpleM","baseItem":"","properties":{},"proficient":true},"effects":[],"folder":null,"sort":0,"ownership":{"default":0,"Be8r6Sgxcs3sL08I":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.291","createdTime":1668365380840,"modifiedTime":1671425291865,"lastModifiedBy":"Be8r6Sgxcs3sL08I"},"_id":"q8Yh36j3bvfOl3p4"}
{"name":"Summon Celestial","type":"spell","system":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>You call forth a celestial spirit. It manifests in an angelic form in an unoccupied space that you can see within range. This corporeal form uses the Celestial Spirit stat block. When you cast the spell, choose Avenger or Defender. Your choice determines the creature's attack in its stat block. The creature disappears when it drops to 0 hit points or when the spell ends.</p><p>The creature is an ally to you and your companions. In combat, the creature shares your initiative count, but it takes its turn immediately after yours. It obeys your verbal commands (no action required by you). If you don't issue any, it takes the Dodge action and uses its move to avoid danger.</p></div><div class=\"rd__b  rd__b--3\"><div class=\"rd__b  rd__b--3\"><p><span class=\"entry-title-inner\"><strong>At Higher Levels.</strong> </span>When you cast this spell using a spell slot of 6th level or higher, use the higher level wherever the spell's level appears in the stat block.</p><div class=\"rd__spc-inline-post\"><p></p></div></div><div class=\"rd__spc-inline-post\"><p></p></div></div>","chat":"","unidentified":""},"source":"TCE","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"hour"},"target":{"value":0,"width":null,"units":"","type":""},"range":{"value":90,"long":null,"units":"ft"},"uses":{"value":0,"max":"0","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":null,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":5,"school":"con","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":true},"materials":{"value":"a golden reliquary worth at least 500 gp","consumed":true,"cost":500,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"none","formula":""},"attunement":null},"img":"https://assets.forge-vtt.com/6148732b96e0aff7127b447b/Icons/Spell_Icons/Energy/T_Icon_Energy_29.webp","flags":{"srd5e":{"page":"spells.html","source":"TCE","hash":"summon%20celestial_tce","propDroppable":"spell"},"enhancedcombathud":{"set1p":false,"set2p":false,"set3p":false},"midi-qol":{"effectActivation":false,"onUseMacroName":"[postActiveEffects]ItemMacro"},"enhanced-terrain-layer":{"multiple":1,"min":null,"max":null,"environment":"","elevation":null,"depth":null},"core":{"sourceId":"Item.yJcANXDIxsxgwEM0"},"rest-recovery":{"data":{"recovery":{"enabled":false}}},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"itemacro":{"macro":{"name":"Summon Celestial","type":"script","scope":"global","command":"const item = actor.items.getName(\"Summon Celestial\");\nconst [{spellLevel: level}] = args;\nconst summonerDc = actor.system.attributes.spelldc;\nconst summonerAttack = summonerDc - 8;\nconst sourceActor = token?.actor ?? game.user.character;\nconst number = sourceActor.getRollData().details.level;\n\n/* Prompt the user for which type of celestial to summon */\nconst buttonData = {\n  buttons: [{\n    label: 'Celestial Avenger',\n    value: {\n      token: { name: \"Celestial Avenger\" },\n      token: { img: \"https://assets.forge-vtt.com/6148732b96e0aff7127b447b/Creature_Tokens/Spirits_Heroes/Dwarf_Veteran_Ranger_Bow_Spirits_01.png\" },\n      actor: { name: \"Celestial Avenger\" },\n      actor: { img: \"https://assets.forge-vtt.com/6148732b96e0aff7127b447b/Creature_Images/Dwarf_Spirit_Archer.webp\" },\n      embedded: {\n        Item: {\n          \"Radiant Mace (Defender Only)\": warpgate.CONST.DELETE,\n          \"Radiant Mace - Healing (Defender Only)\": warpgate.CONST.DELETE,\n        }\n      }\n    }\n  }, {\n    label: 'Celestial Defender',\n    value: {\n      actor: { name: \"Celestial Defender\" },\n      actor: { img: \"https://assets.forge-vtt.com/6148732b96e0aff7127b447b/Creature_Images/Dwarf_Spirit_Warrior.webp\" },\n      token: { name: \"Celestial Defender\" },\n      token: { img: \"https://assets.forge-vtt.com/6148732b96e0aff7127b447b/Creature_Tokens/Spirits_Heroes/Dwarf_Veteran_Fighter_Axe_Spirits_01.png\" },\n      embedded: {\n        Item: {\n          \"Radiant Bow (Avenger Only)\": warpgate.CONST.DELETE\n        }\n      }\n    }\n  }\n  ],\n  title: 'Which Celestial?'\n};\n\nconst celestial = await warpgate.buttonDialog(buttonData);\nconst hp = 40 + 10 * (level - 4);\n\nconst callbacks = {\n    post: async (location, tokenDoc, updates, iteration) => {\n        await myEffectFunction(tokenDoc);\n    }\n}\n\n/* Craft the updates that are common to all celestials */\nconst updates = foundry.utils.mergeObject({\n  token: { \"displayName\": CONST.TOKEN_DISPLAY_MODES.HOVER },\n  actor: {\n    'system.attributes.ac.natural': 11 + level,\n    'system.attributes.hp': { value: hp, max: hp },\n    'system.details.cr': number,\n  },\n  embedded: {\n    Item: {\n      \"Multiattack\": {\n        name: `Multiattack (${Math.floor(level / 2)} attacks)`\n      },\n      \"Radiant Bow (Avenger Only)\": {\n        'system.damage.parts': [[`2d6 + 2 + ${level}`, \"radiant\"]],\n        'system.attackBonus': `- @mod - @prof + ${summonerAttack}`,\n      },\n      \"Healing Touch\": {\n        'system.damage.parts': [[`2d8 + ${level}`, \"healing\"]]\n      }\n    }\n  }\n}, celestial);\nasync function preSpawn(location, updates, iteration) {\n   await new Sequence()\n    .effect()\n      .file(\"jb2a.divine_smite.caster.blueyellow\")\n      .atLocation(location)\n      .scaleToObject(3)\n      .waitUntilFinished(-500)\n      .fadeIn(100)\n    .effect()\n      .file(\"jb2a.explosion.blueyellow.0\")\n      .atLocation(location)\n      .scaleToObject(4)\n  .play()\n  }\n\n  await warpgate.spawn(\"Celestial Spirit\", updates, {pre:preSpawn});","author":"Be8r6Sgxcs3sL08I","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"cf":{"id":"temp_6q1ztzxb2o4"},"exportSource":{"world":"known-world-2","system":"dnd5e","coreVersion":"10.291","systemVersion":"2.0.3"}},"effects":[],"ownership":{"default":0,"Be8r6Sgxcs3sL08I":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.291","createdTime":1671243328780,"modifiedTime":1671322823121,"lastModifiedBy":"Be8r6Sgxcs3sL08I"},"folder":null,"sort":0,"_id":"qwh83wilynnJSo17"}
{"name":"Summon Undead","type":"spell","system":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>You call forth an undead spirit. It manifests in an unoccupied space that you can see within range. This corporeal form uses the @creature[Undead Spirit|TCE] stat block. When you cast the spell, choose the creature's form: Ghostly, Putrid, or Skeletal. The spirit resembles an undead creature with the chosen form, which determines certain traits in its stat block. The creature disappears when it drops to 0 hit points or when the spell ends.</p><div class=\"rd__spc-inline-post\"></div><p>The creature is an ally to you and your companions. In combat, the creature shares your initiative count, but it takes its turn immediately after yours. It obeys your verbal commands (no action required by you). If you don't issue any, it takes the @action[Dodge] action and uses its move to avoid danger.</p></div><div class=\"rd__b  rd__b--3\"><div class=\"rd__b  rd__b--3\"><span class=\"rd__h rd__h--3\" data-title-index=\"1\"> <span class=\"entry-title-inner\">At Higher Levels.</span></span> <p>When you cast this spell using a spell slot of 4th level or higher, use the higher level wherever the spell's level appears in the stat block.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__spc-inline-post\"></div></div>","chat":"","unidentified":""},"source":"TCE","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"hour"},"target":{"value":0,"width":null,"units":"","type":""},"range":{"value":90,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":null,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":3,"school":"nec","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":true},"materials":{"value":"a gilded skull worth at least 300 gp","consumed":false,"cost":300,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"none","formula":""}},"img":"icons/magic/unholy/hand-fire-skeleton-pink.webp","flags":{"plutonium":{"page":"spells.html","source":"TCE","hash":"summon%20undead_tce","propDroppable":"spell"},"rest-recovery":{"data":{"recovery":{"enabled":false}}},"midi-qol":{"effectActivation":false,"onUseMacroName":"[postActiveEffects]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"itemacro":{"macro":{"name":"Summon Undead","type":"script","scope":"global","command":"const item = actor.items.getName(\"Summon Undead\");\nconst [{spellLevel: level}] = args;\nconst multiatk = Math.floor(level/2)\nconst summonerDc = actor.system.attributes.spelldc;\nconst summonerAttack = summonerDc - 8;\nconst hpske = 20 + 10 * (level - 3);\nconst hp = 30 + 10 * (level - 3);\nconst sourceActor = token?.actor ?? game.user.character;\nconst number = sourceActor.getRollData().details.level;\n\n/* Prompt the user for which type of celestial to summon */\nconst buttonData = {\n  buttons: [{\n    label: 'Ghostly',\n    value: {\n      token: { name: \"Ghostly\" },\n      token: { img: \"systems/dnd5e/tokens/undead/Ghost.webp\" },\n      actor: { name: \"Ghostly\" },\n      actor: { img: \"systems/dnd5e/tokens/undead/Ghost.webp\"},\n      actor: {\n        'system.attributes.hp': { value: hp, max: hp }},\n      embedded: {\n        Item: {\n          \"Rotting Claw (Putrid Only)\": warpgate.CONST.DELETE,\n          \"Grave Bolt (Skeletal Only)\": warpgate.CONST.DELETE,\n          \"Festering Aura (Putrid Only)\": warpgate.CONST.DELETE,\n          \"Deathly Touch (Ghostly Only)\": {\n             'system.damage.parts': [[`1d8 + 3 + ${level}`, \"necrotic\"]],\n             'system.attackBonus': `- @mod - @prof + ${summonerAttack}`,\n\t     'save': {'dc': `${summonerDc}`},\n             },\n        }\n      }\n    }\n  }, {\n    label: 'Putrid',\n    value: {\n      token: { name: \"Putrid\" },\n      token: { img: \"modules/GMmacros/img/FleshGolem.png\"},\n      actor: { name: \"Putrid\" },\n      actor: { img: \"modules/GMmacros/img/FleshGolem.png\"},\n      actor: {\n        'system.attributes.hp': { value: hp, max: hp }},\n      embedded: {\n        Item: {\n          \"Grave Bolt (Skeletal Only)\": warpgate.CONST.DELETE,\n          \"Deathly Touch (Ghostly Only)\": warpgate.CONST.DELETE,\n          \"Incorporeal Passage (Ghostly Only)\": warpgate.CONST.DELETE,\n          \"Rotting Claw (Putrid Only)\": {\n             'system.damage.parts': [[`1d6 + 3 + ${level}`, \"necrotic\"]],\n             'system.attackBonus': `- @mod - @prof + ${summonerAttack}`,\n\t     'system.save': {'dc': `${summonerDc}`},\n             },\n        }\n      }\n    }\n  },{\n    label: 'Skeletal',\n    value: {\n      actor: { name: \"Skeletal\" },\n      actor: { img: \"modules/GMmacros/img/Skeleton.png\" },\n      actor: {\n        'system.attributes.hp': { value: hpske, max: hpske }},\n      token: { name: \"Skeletal\" },\n      token: { img: \"modules/GMmacros/img/Skeleton.png\" },\n      embedded: {\n        Item: {\n          \"Deathly Touch (Ghostly Only)\": warpgate.CONST.DELETE,\n          \"Festering Aura (Putrid Only)\": warpgate.CONST.DELETE,\n          \"Incorporeal Passage (Ghostly Only)\": warpgate.CONST.DELETE,\n          \"Rotting Claw (Putrid Only)\": warpgate.CONST.DELETE,\n          \"Grave Bolt (Skeletal Only)\": {\n             'system.damage.parts': [[`2d4 + 3 + ${level}`, \"necrotic\"]],\n             'system.attackBonus': `- @mod - @prof + ${summonerAttack}`,\n             },\n\n        }\n      }\n    }\n  }\n  ],\n  title: 'Which Undead?'\n};\n\nconst celestial = await warpgate.buttonDialog(buttonData);\n\nconst callbacks = {\n    post: async (location, tokenDoc, updates, iteration) => {\n        await myEffectFunction(tokenDoc);\n    }\n}\n\n/* Craft the updates that are common to all celestials */\nconst updates = foundry.utils.mergeObject({\n  token: { \"displayName\": CONST.TOKEN_DISPLAY_MODES.HOVER },\n  actor: {\n    'system.attributes.ac.natural': 11 + level,\n    'system.attributes.spelldc': 15,\n    'system.details.cr': number,\n  },\n  embedded: {\n    Item: {\n      \"Multiattack\": {\n        name: `${multiatk}x Multiattack`\n\t},\n      },\n    }\n }, celestial);\nasync function preSpawn(location, updates, iteration) {\n   await new Sequence()\n    .effect()\n      .file(\"jb2a.divine_smite.caster.blueyellow\")\n      .atLocation(location)\n      .scaleToObject(3)\n      .waitUntilFinished(-500)\n      .fadeIn(100)\n    .effect()\n      .file(\"jb2a.explosion.blueyellow.0\")\n      .atLocation(location)\n      .scaleToObject(4)\n  .play()\n  }\n\n  await warpgate.spawn(\"Undead Spirit\", updates, {pre:preSpawn});","author":"Be8r6Sgxcs3sL08I","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"core":{"sourceId":"Item.SHAWDr29xjRVqN4Y"},"cf":{"id":"temp_6q1ztzxb2o4"}},"effects":[],"ownership":{"default":0,"Be8r6Sgxcs3sL08I":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.291","createdTime":1671296360062,"modifiedTime":1671322839455,"lastModifiedBy":"Be8r6Sgxcs3sL08I"},"folder":null,"sort":0,"_id":"s5sdlfsd2CLnLwIq"}
{"_id":"sdpD323b7JkaEliH","name":"Mind Sliver","type":"spell","img":"modules/GMmacros/img/mind_sliver.png","effects":[],"folder":null,"sort":0,"flags":{"srd5e":{"page":"spells.html","source":"TCE","hash":"mind%20sliver_tce"},"core":{"sourceId":"Compendium.plutonium.spells.UcSRbOtAiMYTScHV"},"midi-qol":{"onUseMacroName":"","effectActivation":false,"forceCEOff":false},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"playSaveAudio":false,"clip":"","volume":100}},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"autoanimations":{"killAnim":false,"below":false,"override":false,"targetToken":{"enable":false},"sourceToken":{"enable":false},"allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":0.25},"item":{"enableAudio":false,"file":"","delay":100,"volume":0.25}},"autoOverride":{"enable":false},"version":4,"audio":{"a01":{"enable":false,"file":"","delay":100,"volume":0.25},"e01":{"enable":false,"file":"","delay":100,"volume":0.25}}},"cf":{"id":"temp_0ayrgs4kykof"},"rest-recovery":{"data":{"recovery":{"enabled":false}}}},"system":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>You drive a disorienting spike of psychic energy into the mind of one creature you can see within range. The target must succeed on an Intelligence saving throw or take [[/r 1d6]] psychic damage and subtract [[/r 1d4]] from the next saving throw it makes before the end of your next turn.</p><div class=\"rd__spc-inline-post\"></div><p>This spell's damage increases by [[/r 1d6]] when you reach certain levels: 5th level ([[/r 2d6]]), 11th level ([[/r 3d6]]), and 17th level ([[/r 4d6]]).</p></div>","chat":"","unidentified":""},"source":"TCE","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"round"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":0,"max":"0","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"save","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[["1d6","psychic"]],"versatile":""},"formula":"","save":{"ability":"int","dc":null,"scaling":"spell"},"level":0,"school":"enc","components":{"value":"","vocal":true,"somatic":false,"material":false,"ritual":false,"concentration":false},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"always","prepared":true},"scaling":{"mode":"cantrip","formula":"1d6"},"attunement":null},"ownership":{"default":0,"QwT9izJ4aW8QVTjo":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.290","createdTime":null,"modifiedTime":1668365291301,"lastModifiedBy":"Be8r6Sgxcs3sL08I"}}
{"name":"Favored Foe","type":"spell","img":"modules/GMmacros/img/construct-iron-stomping-yellow.webp","effects":[{"_id":"r2eUwnMZ09JTn0vN","changes":[],"disabled":false,"duration":{"startTime":null,"seconds":600,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"modules/plutonium/media/icon/spell/phb-hunters-mark.jpg","label":"Favored Foe","transfer":false,"flags":{"dae":{"stackable":false,"macroRepeat":"none","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"origin":null}],"folder":null,"sort":0,"flags":{"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"modules/jb2a_patreon/Library/1st_Level/Hunters_Mark/HuntersMark_02_Regular_Purple_Pulse_200x200.webm","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"autoanimations":{"killAnim":false,"animLevel":false,"override":false,"animType":"t4","animName":"","bards":{"bardAnim":"a1","bardTarget":true,"bardTargetAnim":"a1","bardTargetColor":"a1","bardSelf":true,"marker":true,"markerColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","hmAnim":"a1","rangedOptions":{"rangeDmgType":""},"color":"n1","spellOptions":{"spellLoops":1},"uaStrikeType":"physical","dtvar":"dt1","divineSmite":{"dsEnable":false,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"a1"},"explosion":false,"exAnimLevel":false,"explodeVariant":"ev1","impactVar":"a1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":0.25},"item":{"enableAudio":false,"file":"","delay":100,"volume":0.25}},"selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"teleDist":30,"templates":{"tempType":"a1","tempAnim":"","tempColor":"","tempLoop":1,"customAnim":false,"customPath":""}},"itemacro":{"macro":{"data":{"_id":null,"name":"Favored Foe","type":"script","author":"05k4ub2VgC3VLxAg","img":"icons/svg/dice-target.svg","scope":"global","command":"// Sample Hunters mark onUse macro\nif (args[0].hitTargets.length === 0) return;\nif (args[0].tag === \"OnUse\") {\n    // Sample Hunters mark\n    let targetUuid = args[0].hitTargets[0].uuid;\n    let actor = await MidiQOL.MQfromActorUuid(args[0].actorUuid); // actor who cast the spell\n\n    if (!actor || !targetUuid) {\n      console.error(\"Favored Foe: no token/target selected\");\n      return;\n    }\n    // create an active effect, \n    //  one change showing the hunter's mark icon on the caster\n    //  the second setting the flag for the macro to be called when damaging an opponent\n \n    const effectData = {\n      changes: [\n        {key: \"flags.midi-qol.huntersMark\", mode: 5, value: targetUuid, priority: 20}, // who is marked\n        // {key: \"flags.dnd5e.DamageBonusMacro\", mode: 0, value: `ItemMacro.${args[0].item.name}`, priority: 20} // macro to apply the damage\n        {key: \"flags.dnd5e.DamageBonusMacro\", mode: 0, value: `ItemMacro.${args[0].item.name}`, priority: 20} // macro to apply the damage\n      ],\n\n      origin: args[0].itemUuid, //flag the effect as associated to the spell being cast\n      disabled: false,\n      duration: args[0].item.effects[0].duration,\n      icon: args[0].item.img,\n      label: args[0].item.name\n    }\n    effectData.duration.startTime = game.time.worldTime;\n    await actor.createEmbeddedDocuments(\"ActiveEffect\", [effectData]);\n} else if (args[0].tag === \"DamageBonus\") {\n    // only weapon attacks\n    if (![\"mwak\",\"rwak\",\"msak\",\"rsak\"].includes(args[0].item.data.actionType)) return {};\n    let targetUuid = args[0].hitTargets[0].uuid;\n    // only on the marked target\n    if (targetUuid !== getProperty(args[0].actor.flags, \"midi-qol.huntersMark\")) return {};\n    let damageType = args[0].item.data.damage.parts[0][1];\n    const diceMult = args[0].isCritical ? 2: 1;\n    return {damageRoll: `${diceMult}d4[${damageType}]`, flavor: \"Favored Foe Damage\"}\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"midi-qol":{"onUseMacroName":"[postActiveEffects]ItemMacro","effectActivation":false},"core":{"sourceId":"Item.Wrs8AYcI7g6WEatd"},"rest-recovery":{"data":{"recovery":{"enabled":false}}},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false,"autoFailFriendly":false,"offHandWeapon":false}},"_id":"t9Eo1ok2LjAy3UYw","system":{"description":{"value":"<p>This 1st-level feature replaces the Favored Enemy feature and works with the Foe Slayer feature. You gain no benefit from the replaced feature and don't qualify for anything in the game that requires it.</p>\n<p>When you hit a creature with an attack roll, you can call on your mystical bond with nature to mark the target as your favored enemy for 1 minute or until you lose your concentration (as if you were concentrating on a spell).</p>\n<p>The first time on each of your turns that you hit the favored enemy and deal damage to it, including when you mark it, you increase that damage by 1d4.</p>\n<p>You can use this feature to mark a favored enemy a number of times equal to your proficiency bonus, and you regain all expended uses when you finish a long rest.</p>\n<p><strong>TROCAR NA MACRO: This feature's extra damage increases when you reach certain levels in this class: to 1d6 at 6th level and to 1d8 at 14th level.</strong></p>","chat":"","unidentified":""},"source":"","activation":{"type":"special","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":"0","per":"","recovery":""},"consume":{"type":"charges","target":"","amount":1},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":1,"school":"abj","components":{"value":"","vocal":false,"somatic":false,"material":false,"ritual":false,"concentration":true},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"innate","prepared":true},"scaling":{"mode":"none","formula":""}},"ownership":{"default":0,"05k4ub2VgC3VLxAg":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.291","createdTime":null,"modifiedTime":1671296510825,"lastModifiedBy":"Be8r6Sgxcs3sL08I"}}
{"name":"Sunburst","type":"spell","img":"modules/plutonium/media/icon/spell/phb-sunburst.webp","effects":[],"folder":null,"sort":0,"flags":{"srd5e":{"page":"spells.html","source":"PHB","hash":"sunburst_phb","propDroppable":"spell"},"scene-packer":{"hash":"3623b05668ff3e72c48106cd500e9576974246a0","sourceId":"Item.HdkOguA2zxSwfQTV"},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"playSaveAudio":false,"clip":"","volume":100}},"itemacro":{"macro":{"data":{"_id":null,"name":"Sunburst","type":"script","author":"WpiVAovmlZrRTFMX","img":"icons/svg/dice-target.svg","scope":"global","command":"let targetList = args[0].targets;\nif(targetList.length === 0) return {};\nfor(let target of targetList) {\nlet undead = [\"undead\", \"ooze\"].some(type => (target?.actor.data.data.details.type?.value || \"\").toLowerCase().includes(type));\nif (undead) {\n\tlet effectData = {\n          label : \"Sunburst\",\n          icon : \"modules/GMmacros/img/phb-blinding-smite.webp\",\n\t  flags: {dae: {specialDuration: [\"isSave\"]}},\n          changes: [{value: \"1\", mode: CONST.ACTIVE_EFFECT_MODES.CUSTOM, priority: 20, key:\"flags.midi-qol.disadvantage.ability.save.con\"}],\n            }\n        await MidiQOL.socket().executeAsGM(\"createEffects\", {actorUuid: target.uuid, effects: [effectData]});\n} else {return{}}\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"midi-qol":{"effectActivation":false,"onUseMacroName":"[preSave]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"autoFailFriendly":false,"autoSaveFriendly":false,"offHandWeapon":false,"ignoreTotalCover":false},"core":{"sourceId":"Item.T8qdNAZnW1AYqrTb"},"cf":{"id":"temp_lpjg4hxkuum"},"rest-recovery":{"data":{"recovery":{"enabled":false}}}},"_id":"teAxDaqg2FQYxMbz","system":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>Brilliant sunlight flashes in a 60-foot radius centered on a point you choose within range. Each creature in that light must make a Constitution saving throw. On a failed save, a creature takes [[/r 12d6]] radiant damage and is @condition[blinded] for 1 minute. On a successful save, it takes half as much damage and isn't @condition[blinded] by this spell. Undead and oozes have disadvantage on this saving throw.</p><div class=\"rd__spc-inline-post\"></div><p>A creature @condition[blinded] by this spell makes another Constitution saving throw at the end of each of its turns. On a successful save, it is no longer @condition[blinded].</p><p>This spell dispels any darkness in its area that was created by a spell.</p></div>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"cover":null,"target":{"value":60,"width":null,"units":"ft","type":"radius"},"range":{"value":150,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"save","attackBonus":null,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["12d6","radiant"]],"versatile":""},"formula":"","save":{"ability":"con","dc":null,"scaling":"spell"},"level":8,"school":"evo","components":{"vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":false,"value":""},"materials":{"value":"fire and a piece of sunstone","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"none","formula":""},"attunement":null},"ownership":{"default":0,"WpiVAovmlZrRTFMX":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":null,"modifiedTime":1684689406303,"lastModifiedBy":"Be8r6Sgxcs3sL08I"}}
{"name":"Staggering Smite","type":"spell","img":"modules/GMmacros/img/phb-staggering-smite.webp","effects":[{"_id":"ZjGlyQjY319huydD","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro.Staggering Smite","priority":20}],"disabled":false,"duration":{"startTime":null,"rounds":10,"seconds":null,"combat":null,"turns":null,"startRound":null,"startTurn":null},"icon":"modules/plutonium/media/icon/spell/phb-staggering-smite.webp","label":"Staggering Smite","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":["1Hit:mwak","1Hit:rwak"],"transfer":false,"durationExpression":""},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false,"displayTemp":false},"core":{"statusId":""},"dnd5e-helpers":{"rest-effect":"Ignore"}},"tint":null,"origin":null}],"folder":null,"sort":0,"flags":{"srd5e":{"page":"spells.html","source":"PHB","hash":"staggering%20smite_phb"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"onUseMacroName":"","effectActivation":false},"itemacro":{"macro":{"data":{"_id":null,"name":"Staggering Smite","type":"script","author":"WpiVAovmlZrRTFMX","img":"icons/svg/dice-target.svg","scope":"global","command":"if (![\"mwak\"].includes(args[0].itemData.data.actionType)) return {}; // melee weapon attack\nconst uuid = game.user.targets.first().actor.uuid;\nconst targets = Array.from(game.user.targets);\nconst hasEffectApplied = game.dfreds.effectInterface.hasEffectApplied('Staggering Smit', uuid);\nconst wait = async (ms) => new Promise((resolve)=> setTimeout(resolve, ms));\n\nlet effectData = {\n       \t\t\tlabel : \"Staggering Smite\",\n       \t\t\ticon : \"modules/GMmacros/img/phb-staggering-smite.webp\",\n        \t\tchanges: [{value: 1, mode: CONST.ACTIVE_EFFECT_MODES.OVERRIDE, priority: 20, key:\"flags.midi-qol.disadvantage.skill.all\"},{value: 1, mode: CONST.ACTIVE_EFFECT_MODES.OVERRIDE, priority: 20, key:\"flags.midi-qol.disadvantage.attack.all\"}], \n\t\t\tduration: {rounds: 1}, \n\t\t\tflags:{dae: {specialDuration: [\"turnEnd\"]}}\n\t\t\t}\n\n\nfor (const target of targets) {\nawait game.MonksTokenBar.requestRoll(targets,{request:'save:wis', silent: true});\nawait wait(5000)\n\nconst listMessages = game.messages.contents\nconst lastMessage = listMessages[listMessages.length - 1];\nconst spellDC = actor.data.data.attributes.spelldc\nlet tokenid = 'token'+target.id;\nlet saveRoll = lastMessage.data.flags[\"monks-tokenbar\"][tokenid].total\n\nif (saveRoll < spellDC) {\nif (!hasEffectApplied) {\n  await game.dfreds.effectInterface.addEffect({ effectName: 'Staggering Smit', uuid});\n  } \n}\n}\nlet spellLevel = 4;\nif (args[0].isCritical) spellLevel = spellLevel * 2;\nreturn{damageRoll: `${spellLevel}d6[psychic]`, flavor: \"Staggering Smite\"};","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.4zmIP1GW897LasOh"},"exportSource":{"world":"criador","system":"dnd5e","coreVersion":"0.8.8","systemVersion":"1.3.6"},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"playSaveAudio":false,"clip":"","volume":100}},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"autoFailFriendly":false,"offHandWeapon":false,"ignoreTotalCover":false},"cf":{"id":"temp_lpjg4hxkuum"},"scene-packer":{"hash":"ed6ae6abff20410cd92a6ca5931c34cda251ce77","sourceId":"Item.gHeRRVA4bQKCFs8H"},"rest-recovery":{"data":{"recovery":{"enabled":false}}}},"_id":"z6fVJ1qxhuuTsorE","system":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>The next time you hit a creature with a melee weapon attack during this spell's duration, your weapon pierces both body and mind, and the attack deals an extra [[/r 4d6]] psychic damage to the target. The target must make a Wisdom saving throw. On a failed save, it has disadvantage on attack rolls and ability checks, and can't take reactions, until the end of its next turn.</p><div class=\"rd__spc-inline-post\"></div></div>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"0","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":4,"school":"evo","components":{"value":"","vocal":true,"somatic":false,"material":false,"ritual":false,"concentration":true},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"none","formula":""},"attunement":0},"ownership":{"default":0,"QwT9izJ4aW8QVTjo":3,"WpiVAovmlZrRTFMX":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.291","createdTime":null,"modifiedTime":1671422793000,"lastModifiedBy":"Be8r6Sgxcs3sL08I"}}
{"name":"Holy Weapon","type":"spell","system":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>You imbue a weapon you touch with holy power. Until the spell ends, the weapon emits bright light in a 30-foot radius and dim light for an additional 30 feet. In addition, weapon attacks made with it deal an extra [[/r 2d8]] radiant damage on a hit. If the weapon isn't already a magic weapon, it becomes one for the duration.</p><div class=\"rd__spc-inline-post\"></div><p>As a bonus action on your turn, you can dismiss this spell and cause the weapon to emit a burst of radiance. Each creature of your choice that you can see within 30 feet of the weapon must make a Constitution saving throw. On a failed save, a creature takes [[/r 4d8]] radiant damage, and it is @condition[blinded] for 1 minute. On a successful save, a creature takes half as much damage and isn't @condition[blinded]. At the end of each of its turns, a @condition[blinded] creature can make a Constitution saving throw, ending the effect on itself on a success.</p></div>","chat":"","unidentified":""},"source":"XGE","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"hour"},"cover":null,"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":"touch"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":null,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":5,"school":"evo","components":{"vocal":true,"somatic":true,"material":false,"ritual":false,"concentration":true,"value":""},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"none","formula":""}},"img":"icons/weapons/swords/sword-gold-holy.webp","flags":{"plutonium":{"page":"spells.html","source":"XGE","hash":"holy%20weapon_xge","propDroppable":"spell"},"rest-recovery":{"data":{"recovery":{"enabled":false}}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"itemacro":{"macro":{"name":"Holy Weapon","type":"script","scope":"global","command":"const version = \"10.0.17\";\n\ntry {\n    let targetActor = game.user.targets.values().next().value.actor;\n    const targets = Array.from(game.user.targets);\n    let target = game.user.targets.first().actor.uuid;\n    const lastArg = args[args.length - 1];\n    let weapons = targetActor.items.filter(i => i.type === `weapon`);\n    let weapon_content = ``;\n    for (let weapon of weapons) {\n        weapon_content += `<option value=${weapon.id}>${weapon.name}</option>`;\n    }\n    if (args[0] === \"on\") {\n        let content = `\n    <div class=\"form-group\">\n    <label>Weapons : </label>\n    <select name=\"weapons\">\n        ${weapon_content}\n    </select>\n    </div>`;\n\n        new Dialog({\n            title: \"Choose a weapon\",\n            content,\n            buttons:\n            {\n                Ok:\n                {\n                    label: `Ok`,\n                    callback: (html) => {\n                        let itemId = html.find('[name=weapons]')[0].value;\n                        let weaponItem = targetActor.items.get(itemId);\n                        let copy_item = duplicate(weaponItem.toObject(false));\n                        DAE.setFlag(targetActor, `holy weapon`, {\n                            \"_id\" : itemId,\n                            \"system.damage\" : copy_item.system.damage,\n                            \"system.ability\": copy_item.system.ability,\n                            \"system.properties.mgc\": copy_item.system.properties.mgc,\n                            \"name\": copy_item.name\n                        }).then(() => {\n                            copy_item.system.damage.parts.push([\"2d8\",\"radiant\"]);\n                            copy_item.system.properties.mgc = true;\n                            copy_item.name = `${copy_item.name} (Holy weapon)`;\n                            targetActor.updateEmbeddedDocuments(\"Item\", [copy_item]);\n                            ChatMessage.create({content: copy_item.name + \" is empowered with holy weapon\"});\n                        });\n                    }\n                },\n                Cancel:\n                {\n                    label: `Cancel`\n                }\n            }\n        }).render(true);\n    }\n\n    if (args[0] === \"off\") {\n        const flag = DAE.getFlag(targetActor, `holy weapon`);\n        await targetActor.updateEmbeddedDocuments(\"Item\", [flag]);\n        DAE.unsetFlag(targetActor, `holy weapon`);\n        ChatMessage.create({content: flag.name + \" returns to normal\"});\n    }\n} catch (err)  {\n    console.error(`Shillelagh ${version}`, err);\n} \nconsole.log(copy_item.system.damage.parts)","author":"Be8r6Sgxcs3sL08I","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"core":{"sourceId":"Actor.YPh5XDISqV1e9Zth.Item.AuGguvaVm4gCkO1X"},"cf":{"id":"temp_6q1ztzxb2o4"}},"effects":[{"label":"Holy Weapon","icon":"icons/weapons/swords/sword-gold-holy.webp","changes":[{"key":"macro.itemMacro","mode":0,"value":"","priority":20}],"transfer":false,"_id":"eAp3LldHPCPoFKeY","disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"origin":null,"tint":null,"flags":{"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"ownership":{"default":0,"l056gHuKc3178tdK":3,"Be8r6Sgxcs3sL08I":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1669682067571,"modifiedTime":1684720846019,"lastModifiedBy":"Be8r6Sgxcs3sL08I"},"folder":null,"sort":0,"_id":"bYWTuqPdGe949Lcf"}
{"name":"Sunbeam","ownership":{"default":0,"Be8r6Sgxcs3sL08I":3},"type":"spell","system":{"description":{"value":"<p>A beam of brilliant light flashes out from your hand in a 5-foot-wide, 60-foot-long line. Each creature in the line must make a Constitution saving throw. On a failed save, a creature takes 6d8 radiant damage and is Blinded until your next turn. On a successful save, it takes half as much damage and isn't blinded by this spell. Undead and oozes have disadvantage on this saving throw.</p><p>You can create a new line of radiance as your action on any turn until the spell ends.</p><p>For the Duration, a mote of brilliant radiance shines in your hand. It sheds bright light in a 30-foot radius and dim light for an additional 30 feet. This light is sunlight.</p>","chat":"","unidentified":""},"source":"PHB pg. 279","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"cover":null,"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"0","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":0,"scaling":"spell"},"level":6,"school":"evo","components":{"vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":true,"value":""},"materials":{"value":"A magnifying glass","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"none","formula":""}},"flags":{"core":{"sourceId":"Compendium.dnd5e.spells.2RC0EyvBLPH88PZF"},"itemacro":{"macro":{"name":"Sunbeam","type":"script","scope":"global","command":"const lastArg = args[args.length - 1];\nlet tactor;\nif (lastArg.tokenId) tactor = canvas.tokens.get(lastArg.tokenId).actor;\nelse tactor = game.actors.get(lastArg.actorId);\nconst target = canvas.tokens.get(lastArg.tokenId)\nlet item = args[1];  //passed by @item in the DAE field\n\nif (args[0] === \"on\") {\n    \n        const updates = {\n        //apply sunlight to token    \n        token: {\n                \"brightLight\": 30,\n                \"dimLight\": 60,\n                \"lightAlpha\": .1,\n                \"lightAngle\": 360,\n                \"lightColor\":\"#ffd700\",\n                \"lightAnimation\":{\n                    \"intensity\":3,\n                    \"speed\":1,\n                    \"type\": \"sunburst\"\n                },\n        },\n        embedded: {\n            //create Sunbeam (attack) part of this spell\n            Item: {\n                \"Sunbeam (attack)\": { \n                    \"type\": \"spell\",\n                    \"img\": item.img,\n                    \n                    \"data\": {\n                        \"damage\":{\n                            \"parts\":[\n                             [\"6d8\"\n                             ,\"radiant\"]\n                             ]\n                        },\n                        \"preparation\": {\n                            \"mode\":\"atwill\"    \n                        \n                        },\n                        \"activation\":{\n                            \"type\": \"action\",\n                            \"cost\": 1,\n                        },\n                        \"target\":{\n                            \"value\":60,\n                            \"units\":\"ft\",\n                            \"type\":\"line\"\n                        },\n                        \"description\": {\n                            \"value\": `A beam of brilliant light flashes out from your hand in a 5-foot-wide, 60-foot-long line. Each creature in the line must make a Constitution saving throw. On a failed save, a creature takes 6d8 radiant damage and is Blinded until your next turn. On a successful save, it takes half as much damage and isnt blinded by this spell. Undead and oozes have disadvantage on this saving throw.`\n                        },\n                        \"level\": 6,\n                        \"school\": \"evo\",\n                        \"save\": {\n                            \"ability\": \"con\",\n                        },\n                    \n                        \"actionType\": \"save\",\n                    },  \n            \n                    \"flags\": {\n                            \"favtab\": {\n                               \"isFavorite\": true\n                            },\n\n                    },\n                    //Here we assign the macro used by Sunbeam (attack)\n                    'flags.midi-qol.onUseMacroName': 'ItemMacro',\n                    'flags.itemacro.macro.data.name': \"Attack\",\n                    'flags.itemacro.macro.data.type': \"script\",\n                    'flags.itemacro.macro.data.scope': \"global\",\n                    'flags.itemacro.macro.data.command': `const actorD = game.actors.get(args[0].actor._id);\nconst tokenD = canvas.tokens.get(args[0].tokenId);\nconst itemD = args[0].item;\n\n//Let's fancy up the template with an animation\nlet template = canvas.templates.get(args[0].templateId);\nlet texture = \"modules/jb2a_patreon/Library/2nd_Level/Scorching_Ray/ScorchingRay_01_Regular_Yellow_60ft_2800x400.webm\";\nlet opacity = 1;\n\nlet updates = [{ \"_id\": args[0].templateId, \"texture\": texture, \"flags.tokenmagic.templateData.opacity\": opacity }]\nawait canvas.scene.updateEmbeddedDocuments(\"MeasuredTemplate\", updates);\n\n//some TMFX to burn the targets\nlet param =\n        [{\n            filterType: \"xfire\",\n            filterId: \"meleeBurn\",\n            autoDestroy: true,\n            time: 0,\n            color: 0xFFDF00,\n            blend: 1,\n            amplitude: 1,\n            dispersion: 0,\n            chromatic: false,\n            scaleX: 1,\n            scaleY: 1,\n            inlay: false,\n            animated:\n            {\n                time:\n                {\n                    loopDuration: 500,\n                    loops: 4,\n                    active: true,\n                    speed: -0.0015,\n                    animType: \"move\"\n                }\n            }\n        }];\n\nawait TokenMagic.addUpdateFiltersOnTargeted(param);\n\n//Adding CUB Blindness\nfor (let targets of args[0].failedSaves) {\n        let target = canvas.tokens.get(targets._id);\n        let effectData = {\n            duration: {rounds: 1},\n            changes: [{ \n                \"key\": \"macro.CE\",\n                \"mode\": 0,\n                \"value\": \"Blinded\",\n                \"priority\": 20\n            }]\n        };\n        await target.actor.createEmbeddedEntity(\"ActiveEffect\", effectData);\n}\n\n//remove template after 3 seconds because I'm too lazy to do it manually\nawait warpgate.wait(3000)\nlet sunbeamTemplate = canvas.templates.get(args[0].templateId);\nif(sunbeamTemplate) await sunbeamTemplate.delete()\n`\n                },\n            },\n        }\n\n        \n        \n    }\n\n    //update the token and create the necessary attack spell\n    await warpgate.mutate(token.document, updates);\n    ui.notifications.info(`Sunbeam (attack) has been added to your At-Will spells.`);\n    ChatMessage.create({ content: `${tactor.name} shines like the sun!` });\n    await tactor.items.getName(\"Sunbeam (attack)\").roll();\n    \n}\nif (args[0] === \"off\") {\n    \n    //Concentration broke or time expired, let's revert the token and remove the attack spell item\n    await warpgate.revert(token.document)\n    ChatMessage.create({ content: `${tactor.name} dims.` });\n    \n}","author":"Be8r6Sgxcs3sL08I","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"rest-recovery":{"data":{"recovery":{"enabled":false}}},"midi-qol":{"effectActivation":false,"onUseMacroName":""},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false,"autoSaveFriendly":false},"cf":{"id":"temp_6q1ztzxb2o4"}},"img":"icons/magic/light/beams-rays-orange-purple-large.webp","effects":[{"label":"Sunbeam","icon":"icons/magic/light/beams-rays-orange-purple-large.webp","changes":[{"key":"macro.itemMacro","mode":0,"value":"@item","priority":20}],"transfer":false,"_id":"lthhL9HVGyLVZtEB","disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"origin":null,"tint":null,"flags":{"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1661787234059,"modifiedTime":1684722744071,"lastModifiedBy":"Be8r6Sgxcs3sL08I"},"folder":null,"sort":0,"_id":"HqWYW8sSHhfaMWHf"}
