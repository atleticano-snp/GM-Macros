{"name":"Banishing Smite","type":"spell","img":"modules/plutonium/media/icon/spell/phb-banishing-smite.webp","data":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>The next time you hit a creature with a weapon attack before this spell ends, your weapon crackles with force, and the attack deals an extra [[/r 5d10]] force damage to the target. Additionally, if this attack reduces the target to 50 hit points or fewer, you banish it. If the target is native to a different plane of existence than the one you're on, the target disappears, returning to its home plane. If the target is native to the plane you're on, the creature vanishes into a harmless demiplane. While there, the target is <a href=\"https://5e.tools/conditionsdiseases.html#incapacitated_phb\" data-plut-hover=\"{&quot;page&quot;:&quot;conditionsdiseases.html&quot;,&quot;source&quot;:&quot;PHB&quot;,&quot;hash&quot;:&quot;incapacitated_phb&quot;}\">incapacitated</a>. It remains there until the spell ends, at which point the target reappears in the space it left or in the nearest unoccupied space if that space is occupied.</p><div class=\"rd__spc-inline-post\"></div></div>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[["5d10","force"]],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":5,"school":"abj","components":{"value":"","vocal":true,"somatic":false,"material":false,"ritual":false,"concentration":true},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"none","formula":""}},"effects":[{"_id":"KFr4G5i4TJlAOZdz","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro.Banishing Smite","priority":"20"},{"key":"flags.midi-qol.searingSmite.level","mode":5,"value":"5","priority":"20"}],"disabled":false,"duration":{"startTime":null,"rounds":10},"icon":"modules/plutonium/media/icon/spell/phb-banishing-smite.webp","label":"Banishing Smite","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":["1Hit:mwak","1Hit:rwak"],"transfer":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["flags.dnd5e.DamageBonusMacro","data.abilities.cha.dc"]}],"folder":null,"sort":0,"permission":{"default":0,"rbM5nB1AbUwbj4yJ":3},"flags":{"srd5e":{"page":"spells.html","source":"PHB","hash":"banishing%20smite_phb"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"itemacro":{"macro":{"data":{"_id":null,"name":"Banishing Smite","type":"script","author":"rbM5nB1AbUwbj4yJ","img":"icons/svg/dice-target.svg","scope":"global","command":"// v1.0. Requires midi-qol and ATL.\nif (![\"mwak\",\"rwak\"].includes(args[0].item.data.actionType)) return {}; \nfor (let tokenUuid of args[0].hitTargetUuids) {\n    const target = await fromUuid(tokenUuid);\n    const targetActor = target.actor;\n    if (!targetActor) continue;\n\n}\nconst spellLevel = actor.data.flags[\"midi-qol\"].banishingSmite.level;\nreturn{damageRoll: `${spellLevel}d10[force]`, flavor: \"Banishing Smite: se o alvo tiver 50HP ou menos, ele é banido por 1min\"}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"midi-qol":{"onUseMacroName":""},"core":{"sourceId":"Item.ifF2F2jHDU2MLnte"}},"_id":"1BLEFUuZtc3hkpnW"}
{"_id":"55JX2QYxe22OdtVC","name":"Mind Sliver","type":"spell","img":"modules/plutonium/media/icon/scroll-unfurled.svg","data":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>You drive a disorienting spike of psychic energy into the mind of one creature you can see within range. The target must succeed on an Intelligence saving throw or take [[/r 1d6]] psychic damage and subtract [[/r 1d4]] from the next saving throw it makes before the end of your next turn.</p><div class=\"rd__spc-inline-post\"></div><p>This spell's damage increases by [[/r 1d6]] when you reach certain levels: 5th level ([[/r 2d6]]), 11th level ([[/r 3d6]]), and 17th level ([[/r 4d6]]).</p></div>","chat":"","unidentified":""},"source":"TCE","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"round"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"save","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[["1d6","psychic"]],"versatile":""},"formula":"","save":{"ability":"int","dc":null,"scaling":"spell"},"level":0,"school":"enc","components":{"value":"","vocal":true,"somatic":false,"material":false,"ritual":false,"concentration":false},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"always","prepared":true},"scaling":{"mode":"cantrip","formula":"1d6"}},"effects":[{"_id":"qIVEDq8yB9LlCEgZ","changes":[{"key":"data.bonuses.abilities.save","mode":2,"value":"-1d4","priority":"20"}],"disabled":false,"duration":{"startTime":null,"rounds":1},"icon":"modules/plutonium/media/icon/scroll-unfurled.svg","label":"Mind Sliver","transfer":false,"flags":{"dae":{"stackable":false,"macroRepeat":"none","specialDuration":["isSave"],"transfer":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"data.bonuses.abilities.save"}],"folder":null,"sort":0,"permission":{"default":0,"4tdSgqYFa8LtE5cs":3,"XaHraXd0L5EoLNNo":3,"05k4ub2VgC3VLxAg":3},"flags":{"srd5e":{"page":"spells.html","source":"TCE","hash":"mind%20sliver_tce"},"core":{"sourceId":"Compendium.plutonium.spells.UcSRbOtAiMYTScHV"},"midi-qol":{"onUseMacroName":""},"autoanimations":{"killAnim":false,"override":false,"animType":"t1","animName":"","bards":{"bardAnim":"a1","bardTarget":true,"bardTargetAnim":"a1","bardTargetColor":"a1","bardSelf":true,"marker":true,"markerColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","hmAnim":"a1","color":"n1","spellOptions":{"spellLoops":1},"uaStrikeType":"physical","dtvar":"dt1","divineSmite":{"dsEnable":false,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"a1"},"explosion":false,"explodeVariant":"ev1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":0.25},"item":{"enableAudio":false,"file":"","delay":100,"volume":0.25}},"selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"teleDist":30}}}
{"_id":"BvU3MCmn58F6dTd8","name":"Gift of Alacrity","type":"spell","img":"modules/plutonium/media/icon/spell/egw-gift-of-alacrity.webp","data":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>You touch a willing creature. For the duration, the target can add [[/r 1d8]] to its initiative rolls.</p><div class=\"rd__spc-inline-post\"></div></div>","chat":"","unidentified":""},"source":"EGW","activation":{"type":"minute","cost":1,"condition":""},"duration":{"value":8,"units":"hour"},"target":{"value":null,"width":null,"units":"touch","type":""},"range":{"value":null,"long":null,"units":"touch"},"uses":{"value":0,"max":"1","per":"lr"},"consume":{"type":"","target":"","amount":null},"ability":"cha","actionType":"util","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"1d8","save":{"ability":"","dc":null,"scaling":"cha"},"level":1,"school":"div","components":{"value":"","vocal":true,"somatic":true,"material":false,"ritual":false,"concentration":false},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"innate","prepared":true},"scaling":{"mode":"none","formula":""}},"effects":[{"_id":"OwMoEzA7O4KTf5hq","changes":[{"key":"data.attributes.init.mod","mode":2,"value":"1d8","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"modules/plutonium/media/icon/spell/egw-gift-of-alacrity.webp","label":"Gift of Alacrity","transfer":false,"flags":{"dae":{"stackable":false,"macroRepeat":"none","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"data.attributes.init.mod"}],"folder":null,"sort":0,"permission":{"default":0,"XaHraXd0L5EoLNNo":3,"05k4ub2VgC3VLxAg":3},"flags":{"srd5e":{"page":"spells.html","source":"EGW","hash":"gift%20of%20alacrity_egw"},"core":{"sourceId":"Item.cDZVJXsJjGY7F6P4"},"midi-qol":{"onUseMacroName":""},"autoanimations":{"killAnim":false,"override":false,"animType":"t1","animName":"","bards":{"bardAnim":"a1","bardTarget":true,"bardTargetAnim":"a1","bardTargetColor":"a1","bardSelf":true,"marker":true,"markerColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","hmAnim":"a1","color":"n1","spellOptions":{"spellLoops":1},"uaStrikeType":"physical","dtvar":"dt1","divineSmite":{"dsEnable":false,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"a1"},"explosion":false,"explodeVariant":"ev1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":0.25},"item":{"enableAudio":false,"file":"","delay":100,"volume":0.25}},"selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"teleDist":30,"animLevel":false,"rangedOptions":{"rangeDmgType":""},"exAnimLevel":false,"impactVar":"a1","templates":{"tempType":"a1","tempAnim":"","tempColor":"","tempLoop":1,"customAnim":false,"customPath":""}},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}}}}
{"name":"Toll the Dead","type":"spell","img":"modules/plutonium/media/icon/spell/xge-toll-the-dead.webp","data":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>You point at one creature you can see within range, and the sound of a dolorous bell fills the air around it for a moment. The target must succeed on a Wisdom saving throw or take [[/r 1d8]] necrotic damage. If the target is missing any of its hit points, it instead takes [[/r 1d12]] necrotic damage.</p><div class=\"rd__spc-inline-post\"></div><p>The spell's damage increases by one die when you reach 5th level ([[/r 2d8]] or [[/r 2d12]]), 11th level ([[/r 3d8]] or [[/r 3d12]]), and 17th level ([[/r 4d8]] or [[/r 4d12]]).</p></div>","chat":"","unidentified":""},"source":"XGE","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":"(floor((@details.level + 1) / 6) + 1)d12[if injured]"},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":0,"school":"nec","components":{"value":"","vocal":true,"somatic":true,"material":false,"ritual":false,"concentration":false},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"always","prepared":true},"scaling":{"mode":"none","formula":""}},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"05k4ub2VgC3VLxAg":3},"flags":{"srd5e":{"page":"spells.html","source":"XGE","hash":"toll%20the%20dead_xge"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"itemacro":{"macro":{"data":{"_id":null,"name":"Toll the Dead","type":"script","author":"05k4ub2VgC3VLxAg","img":"icons/svg/dice-target.svg","scope":"global","command":"//Midi-qol on use. Remove damage on item card. Let the macro handle it.\nif (args[0].failedSaves.length > 0) {\n    let target = canvas.tokens.get(args[0].failedSaves[0]._id);\n    let actorD = game.actors.get(args[0].actor._id);\n    let tokenD = canvas.tokens.get(args[0].tokenId).actor;\n    let level;\n    let damageRoll;\n    actorD.data.type === \"character\" ? level = actorD.data.data.details.level : level = tokenD.data.data.details.cr;\n    let numDice = 1 + (Math.floor((level + 1) / 6));\n    target.actor.data.data.attributes.hp.max != target.actor.data.data.attributes.hp.value ? damageRoll = new Roll(`${numDice}d12`).roll() : damageRoll = new Roll(`${numDice}d8`).roll({ async: false });\n    game.dice3d?.showForRoll(damageRoll);\n    new MidiQOL.DamageOnlyWorkflow(actorD, tokenD, damageRoll.total, \"necrotic\", [target], damageRoll, { itemCardId: args[0].itemCardId });\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"midi-qol":{"onUseMacroName":"ItemMacro"},"autoanimations":{"killAnim":false,"animLevel":false,"override":false,"animType":"t1","animName":"","bards":{"bardAnim":"a1","bardTarget":true,"bardTargetAnim":"a1","bardTargetColor":"a1","bardSelf":true,"marker":true,"markerColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","hmAnim":"a1","rangedOptions":{"rangeDmgType":""},"color":"n1","spellOptions":{"spellLoops":1},"uaStrikeType":"physical","dtvar":"dt1","divineSmite":{"dsEnable":false,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"a1"},"explosion":false,"exAnimLevel":false,"explodeVariant":"ev1","impactVar":"a1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":0.25},"item":{"enableAudio":false,"file":"","delay":100,"volume":0.25}},"selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"teleDist":30,"templates":{"tempType":"a1","tempAnim":"","tempColor":"","tempLoop":1,"customAnim":false,"customPath":""}},"core":{"sourceId":"Item.soA50ZpnbA9gvACg"}},"_id":"CmKvMQ3StPUHaMzS"}
{"name":"Searing Smite DPS","type":"spell","img":"modules/plutonium/media/icon/spell/phb-searing-smite.webp","data":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>The next time you hit a creature with a melee weapon attack during the spell's duration, your weapon flares with white-hot intensity, and the attack deals an extra [[/r 1d6]] fire damage to the target and causes the target to ignite in flames. At the start of each of its turns until the spell ends, the target must make a Constitution saving throw. On a failed save, it takes [[/r 1d6]] fire damage. On a successful save, the spell ends. If the target or a creature within 5 feet of it uses an action to put out the flames, or if some other effect douses the flames (such as the target being submerged in water), the spell ends.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__b  rd__b--3\"><div class=\"rd__b  rd__b--3\"><span class=\"rd__h rd__h--3\" data-title-index=\"1\"> <span class=\"entry-title-inner\">At Higher Levels.</span></span> <p>When you cast this spell using a spell slot of 2nd level or higher, the initial extra damage dealt by the attack increases by [[/r 1d6]] for each slot level above 1st.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__spc-inline-post\"></div></div>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"creature"},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":"99","chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":0,"school":"evo","components":{"value":"","vocal":true,"somatic":false,"material":false,"ritual":false,"concentration":true},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"atwill","prepared":true},"scaling":{"mode":"level","formula":"1d6"}},"effects":[{"_id":"K2LptfpFYiORVnaN","changes":[{"key":"macro.itemMacro","mode":0,"value":"@attributes.spelldc","priority":"20"}],"disabled":false,"duration":{"startTime":null,"rounds":10},"icon":"modules/plutonium/media/icon/spell/phb-searing-smite.webp","label":"Searing Smite DPS","transfer":false,"flags":{"dae":{"stackable":"count","macroRepeat":"startEveryTurn","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"macro.itemMacro"}],"folder":null,"sort":0,"permission":{"default":0,"rbM5nB1AbUwbj4yJ":3},"flags":{"srd5e":{"page":"spells.html","source":"PHB","hash":"searing%20smite_phb"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"onUseMacroName":""},"itemacro":{"macro":{"data":{"_id":null,"name":"Searing Smite DPS","type":"script","author":"1Tf72cAwvdgu6AOn","img":"icons/svg/dice-target.svg","scope":"global","command":"//\nconst lastArg = args[args.length - 1];\nlet ttoken = await fromUuid(lastArg.tokenUuid);\nconst tactor = ttoken?.actor;\nconst item = await fromUuid(lastArg.origin);\nif (args[0] === \"on\") {\n  const sourceActor = item.parent;\n  console.error(actor, tactor, args)\n\n  const combatTime = game.combat.round + game.combat.turn / 100;\n  const lastTime = getProperty(sourceActor.data.flags, \"midi-qol.woundedTime\");\n  lastArg.canWound = !game.combat || (combatTime !== lastTime);\n  if (game.combat && lastArg.canWound) {\n    let combatTime = game.combat.round + game.combat.turn / 100;\n    let lastTime = getProperty(sourceActor.data.flags, \"midi-qol.woundedTime\");\n    if (combatTime !== lastTime) {\n      setProperty(sourceActor.data.flags, \"midi-qol.woundedTime\", combatTime)\n    }\n  } \n  if (!lastArg.canWound) {\n    console.error(\"The effect \", lastArg.efData, lastArg.efData._id)\n    const stacks = getProperty(lastArg.efData, \"flags.dae.stacks\") || 1;\n    const label = lastArg.efData.label.replace(/\\s+\\(\\d*\\)/, \"\") +` (${stacks - 1})`;\n    console.error(\"Undoing stacks\", stacks, label);\n    Hooks.once(\"midi-qol.RollComplete\", () => {\n    tactor.updateEmbeddedDocuments(\"ActiveEffect\", [{ _id: lastArg.efData._id, \"flags.dae.stacks\": stacks - 1, \"label\": label }]);\n    });\n  }\n} else if (args[0] === \"each\") {\n  const woundCount = getProperty(lastArg.efData, \"flags.dae.stacks\");\n  if (!woundCount) return;\n  const saveType = \"con\";\n  const DC = args[1];\n  const flavor = `${CONFIG.DND5E.abilities[saveType]} DC${DC} ${item?.name || \"\"}`;\n  let save = (await tactor.rollAbilitySave(saveType, { flavor, fastForward: true })).total;\n  console.error(\"Save is \", save, DC)\n  if (save >= DC) {\n    const effectsToDelete = tactor.effects.filter(ef => ef.data.origin === lastArg.origin).map(ef => ef.id);\n    ChatMessage.create({content: \"Save was made\"});\n    await MidiQOL.socket().executeAsGM(\"removeEffects\", { actorUuid: tactor.uuid, effects: [lastArg.effectId] })\n  } else {\n    let damageRoll = new Roll(`${woundCount}d6[fire]`).roll(); // could be argument\n    new MidiQOL.DamageOnlyWorkflow(tactor, ttoken, damageRoll.total, \"fire\", [ttoken], damageRoll, { flavor: `Failed Save for ${item.name}`, itemData: item?.toObject(), itemCardId: \"new\", useOther: true })\n  }\n} else if (args[0] === \"off\") {\n  // do any clean up\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.pa5CAKQuaNsAzkBa"},"exportSource":{"world":"criador","system":"dnd5e","coreVersion":"0.8.8","systemVersion":"1.3.6"}},"_id":"CuvuMsChBq49VEGC"}
{"name":"Searing Smite","type":"spell","img":"modules/plutonium/media/icon/spell/phb-searing-smite.webp","data":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>The next time you hit a creature with a melee weapon attack during the spell's duration, your weapon flares with white-hot intensity, and the attack deals an extra [[/r 1d6]] fire damage to the target and causes the target to ignite in flames. At the start of each of its turns until the spell ends, the target must make a Constitution saving throw. On a failed save, it takes [[/r 1d6]] fire damage. On a successful save, the spell ends. If the target or a creature within 5 feet of it uses an action to put out the flames, or if some other effect douses the flames (such as the target being submerged in water), the spell ends.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__b  rd__b--3\"><div class=\"rd__b  rd__b--3\"><span class=\"rd__h rd__h--3\" data-title-index=\"1\"> <span class=\"entry-title-inner\">At Higher Levels.</span></span> <p>When you cast this spell using a spell slot of 2nd level or higher, the initial extra damage dealt by the attack increases by [[/r 1d6]] for each slot level above 1st.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__spc-inline-post\"></div></div>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":1,"school":"evo","components":{"value":"","vocal":true,"somatic":false,"material":false,"ritual":false,"concentration":true},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"level","formula":"1d6"}},"effects":[{"_id":"ejvUFGCPHZz2tLNd","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro.Searing Smite","priority":"20"},{"key":"flags.midi-qol.searingSmite.level","mode":5,"value":"@item.level","priority":"20"}],"disabled":false,"duration":{"startTime":null,"rounds":10},"icon":"modules/plutonium/media/icon/spell/phb-searing-smite.webp","label":"Searing Smite","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":["1Hit:mwak","1Hit:rwak"],"transfer":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["flags.dnd5e.DamageBonusMacro","data.abilities.cha.dc"]}],"folder":null,"sort":0,"permission":{"default":0,"rbM5nB1AbUwbj4yJ":3},"flags":{"srd5e":{"page":"spells.html","source":"PHB","hash":"searing%20smite_phb"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"onUseMacroName":""},"itemacro":{"macro":{"data":{"_id":null,"name":"Searing Smite","type":"script","author":"1Tf72cAwvdgu6AOn","img":"icons/svg/dice-target.svg","scope":"global","command":"// v1.0. Requires midi-qol and ATL.\nif (![\"mwak\",\"rwak\"].includes(args[0].item.data.actionType)) return {}; \nfor (let tokenUuid of args[0].hitTargetUuids) {\n    const target = await fromUuid(tokenUuid);\n    const targetActor = target.actor;\n    if (!targetActor) continue;\n\n    // create the dim light effect on the target\n}\nconst spellLevel = actor.data.flags[\"midi-qol\"].searingSmite.level;\nreturn{damageRoll: `${spellLevel}d6[fire]`, flavor: \"Searing Smite\"}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.pa5CAKQuaNsAzkBa"},"exportSource":{"world":"criador","system":"dnd5e","coreVersion":"0.8.8","systemVersion":"1.3.6"}},"_id":"FDNEFViPKk73fKB2"}
{"name":"Magic Missile","type":"spell","img":"systems/dnd5e/icons/spells/fire-arrows-magenta-1.jpg","data":{"description":{"value":"<p>You create three glowing darts of magical force. Each dart hits a creature of your choice that you can see within range. A dart deals 1d4 + 1 force damage to its target. The darts all strike simultaneously, and you can direct them to hit one creature or several.</p><p><strong>Higher Levels. </strong>When you cast this spell using a spell slot of 2nd level or higher, the spell creates one more dart for each slot level above 1st.</p>","chat":"","unidentified":""},"source":"PHB pg. 257","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":120,"long":0,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"level":1,"school":"evo","components":{"value":"","vocal":true,"somatic":true,"material":false,"ritual":false,"concentration":false},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"level","formula":""}},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"05k4ub2VgC3VLxAg":3},"flags":{"core":{"sourceId":"Compendium.dnd5e.spells.41JIhpDyM9Anm7cs"},"itemacro":{"macro":{"data":{"_id":null,"name":"Magic Missile","type":"script","author":"05k4ub2VgC3VLxAg","img":"icons/svg/dice-target.svg","scope":"global","command":"// Item macro, Midi-qol On Use. This handles damage, so remove it from the spell card.\n// Based on macros from Crymic and Caewok\n// https://gitlab.com/crymic/foundry-vtt-macros/-/blob/master/5e/Spells/Level%201/Magic%20Missile.js\n// https://github.com/caewok/Foundry-Macros/blob/main/spells/Level%201/Magic%20Missile/RandomMagicMissileAnimation.js\n// This version rolls damage for each missile.\n// Make sure that target is not set to 1 on the spell details\n\n(async()=>{\n    async function wait(ms) {\n    return new Promise(resolve => {\n        setTimeout(resolve, ms);\n    });\n    }\n\n    function isEmpty(str) {\n        const is_empty = (!str || /^\\s*$/.test(str));\n        //console.log(\"isEmpty? \" + is_empty);\n        return is_empty;\n    }\n\n    async function MagicMissilesAnimation(args1, args2, args3) {\n        console.log(\"JB2A RandomMagicMissile|args\", args1, args2, args3);\n\n        const the_caster = canvas.tokens.get(args1);\n        const the_target = canvas.tokens.get(args2);\n        const color = args3 ?? \"Blue\";\n\n        if (!canvas.fxmaster) ui.notifications.error(\"This macro depends on the FXMaster module. Make sure it is installed and enabled\");\n\n        const file = \"modules/jb2a_patreon/Library/1st_Level/Magic_Missile/\";\n        const mmA = `${file}MagicMissile_01_Regular_${color}_30ft_01_1600x400.webm`;\n        const mmB = `${file}MagicMissile_01_Regular_${color}_30ft_02_1600x400.webm`;\n        const mmC = `${file}MagicMissile_01_Regular_${color}_30ft_03_1600x400.webm`;\n        const mmD = `${file}MagicMissile_01_Regular_${color}_30ft_04_1600x400.webm`;\n        const mmE = `${file}MagicMissile_01_Regular_${color}_30ft_05_1600x400.webm`;\n        const mmF = `${file}MagicMissile_01_Regular_${color}_30ft_06_1600x400.webm`;\n        const mmG = `${file}MagicMissile_01_Regular_${color}_30ft_07_1600x400.webm`;\n        const mmH = `${file}MagicMissile_01_Regular_${color}_30ft_08_1600x400.webm`;\n        const mmI = `${file}MagicMissile_01_Regular_${color}_30ft_09_1600x400.webm`;\n\n        const mmAA = `${file}MagicMissile_01_Regular_${color}_60ft_01_2800x400.webm`;\n        const mmBB = `${file}MagicMissile_01_Regular_${color}_60ft_02_2800x400.webm`;\n        const mmCC = `${file}MagicMissile_01_Regular_${color}_60ft_03_2800x400.webm`;\n        const mmDD = `${file}MagicMissile_01_Regular_${color}_60ft_04_2800x400.webm`;\n        const mmEE = `${file}MagicMissile_01_Regular_${color}_60ft_05_2800x400.webm`;\n        const mmFF = `${file}MagicMissile_01_Regular_${color}_60ft_06_2800x400.webm`;\n        const mmGG = `${file}MagicMissile_01_Regular_${color}_60ft_07_2800x400.webm`;\n        const mmHH = `${file}MagicMissile_01_Regular_${color}_60ft_08_2800x400.webm`;\n        const mmII = `${file}MagicMissile_01_Regular_${color}_60ft_09_2800x400.webm`;\n\n        function random_item(items) {\n        return(items[Math.floor(Math.random()*items.length)]);\n        }\n\n        const itemsA = [mmA, mmB, mmC, mmD, mmE, mmF, mmG, mmH, mmI];\n        const itemsB = [mmAA, mmBB, mmCC, mmDD, mmEE, mmFF, mmGG, mmHH, mmII];\n        const sleepNow = (delay) => new Promise((resolve) => setTimeout(resolve, delay))\n\n        async function Cast() {\n            let ray = new Ray(the_caster.center, the_target.center);\n            let anDeg = -(ray.angle * 57.3);\n            let anDist = ray.distance;\n\n        // not using these; just placeholders\n            let anFile = random_item(itemsA);\n            let anFileSize = 600;\n            let anchorX = 0.125;\n            \n            // set based on distance\n            switch(true){\n            case (anDist<=1800):\n                    anFileSize = 1200;\n                    anFile = random_item(itemsA);\n                    anchorX = 0.125;\n                    break;\n            default:\n                    anFileSize = 2400;\n                    anFile = random_item(itemsB);\n                    anchorX = 0.071;\n                    break;\n            }\n\n            let anScale = anDist / anFileSize;\n            let anScaleY = anScale;\n            if (anDist<=600){anScaleY = 0.6}\n            if (anDist>=700 && anDist <=1200){anScaleY = 0.8}\n            if (anDist>=1300 && anDist <=1800){anScaleY = 0.6}\n            if (anDist>=1900){anScaleY = anScale}\n\n            let spellAnim = \n            {\n                file: anFile,\n                position: the_caster.center,\n                anchor: {\n                    x: anchorX,\n                    y: 0.5\n                },\n                angle: anDeg,\n                scale: {\n                    x: anScale,\n                    y: anScaleY\n                }\n            }; \n\n            canvas.fxmaster.playVideo(spellAnim);\n            await sleepNow(80);\n            game.socket.emit('module.fxmaster', spellAnim);\n            await sleepNow(50);\n        }\n\n        Cast ()\n    }\n\n    const COLOR = \"Blue\";\n        \n    const actorD = game.actors.get(args[0].actor._id);\n    const tokenD = canvas.tokens.get(args[0].tokenId);\n    let level = 2 + Number(args[0].spellLevel);\n    if (args[0].targets.length === 1){\n        let target = canvas.tokens.get(args[0].targets[0]._id);\n        let damageRoll = new Roll(`(${level}d4 +${level})`).roll();\n        game.dice3d?.showForRoll(damageRoll);\n        new MidiQOL.DamageOnlyWorkflow(actorD, tokenD, damageRoll.total, \"force\", [target], damageRoll, {itemCardId: args[0].itemCardId});\n        let damage_target = `<div class=\"midi-qol-flex-container\"><div>hits</div><div class=\"midi-qol-target-npc midi-qol-target-name\" id=\"${target.id}\"> ${target.name}</div><div><img src=\"${target.data.img}\" width=\"30\" height=\"30\" style=\"border:0px\"></div></div>`;\n        await wait(1000);\n\n        let damage_results = `<div><div class=\"midi-qol-nobox\">${damage_target}</div></div>`;\n\n        const chatMessage = await game.messages.get(args[0].itemCardId);\n        let content = await duplicate(chatMessage.data.content);\n\n        const searchString =  /<div class=\"midi-qol-hits-display\">[\\s\\S]*<div class=\"end-midi-qol-hits-display\">/g;\n        const replaceString = `<div class=\"midi-qol-hits-display\"><div class=\"end-midi-qol-hits-display\">${damage_results}`;\n\n        content = await content.replace(searchString, replaceString);\n        await chatMessage.update({ content: content });\n        \n        for(let i = 0; i < level; i++) {\n            await MagicMissilesAnimation(args[0].tokenId, args[0].targets[0]._id, COLOR);\n        }\n    }\n    if (args[0].targets.length > 1){\n        let targetList = \"\";\n        let all_targets = args[0].targets;\n\n        for (let target of all_targets) {\n            targetList += `<tr><td>${target.name}</td><td><input type=\"number\" id=\"target\" min=\"0\" max=\"${level}\" name=\"${target._id}\"></td></tr>`;\n        }\n        let the_content = `<p>You have currently <b>${level}</b> total Magic Missle bolts.</p><form class=\"flexcol\"><table width=\"100%\"><tbody><tr><th>Target</th><th>Number Bolts</th></tr>${targetList}</tbody></table></form>`;\n        new Dialog({\n            title: \"Magic Missle Damage\",\n            content: the_content,\n            buttons: {\n                one: {\n                    label: \"Damage\", callback: async (html) => {\n                        let spentTotal = 0;\n                        let selected_targets = html.find('input#target');\n                        for(let get_total of selected_targets){\n                            spentTotal += Number(get_total.value);\n                        }\n                        if (spentTotal > level) return ui.notifications.error(`The spell fails, You assigned more bolts then you have.`);\n                        let damage_target = [];\n                        let allDamageRolls = [];\n\n                        for (let selected_target of selected_targets) {\n                            let damageNum = selected_target.value;\n                            if (!isEmpty(damageNum)) {\n                                let damageRoll = new Roll(`${damageNum}d4 +${damageNum}`).roll();\n                                game.dice3d?.showForRoll(damageRoll);\n\n                                let target_id = selected_target.name;\n                                let get_target = canvas.tokens.get(target_id);\n\n                                new MidiQOL.DamageOnlyWorkflow(actorD, tokenD, damageRoll.total, \"force\", [get_target], damageRoll, { itemCardId: args[0].itemCardId });\n\n                                let damageRoll_Render = await damageRoll.render();\n                                allDamageRolls.push(damageRoll_Render);\n\n                                damage_target.push(`<div class=\"midi-qol-flex-container\"><div>hits</div><div class=\"midi-qol-target-npc midi-qol-target-name\" id=\"${get_target.id}\"> ${get_target.name}</div><div><img src=\"${get_target.data.img}\" width=\"30\" height=\"30\" style=\"border:0px\"></div><div> for ${damageRoll.total} damage</div></div>`);\n\n                                for(let i = 0; i < damageNum; i++) {\n\t\t\t\t\t\t\t\t\tawait MagicMissilesAnimation(args[0].tokenId, target_id, COLOR);\n\t\t\t\t\t\t\t\t}\n                            }\n                        }\n                        let damage_list = damage_target.join('');\n                        await wait(1000);\n                        let damage_results = `<div><div class=\"midi-qol-nobox\">${damage_list}</div></div>`;\n                        let chatMessage = await game.messages.get(args[0].itemCardId);\n                        let content = await duplicate(chatMessage.data.content);\n                        const searchString =  /<div class=\"midi-qol-hits-display\">[\\s\\S]*<div class=\"end-midi-qol-hits-display\">/g;\n                        const replaceString = `<div class=\"midi-qol-hits-display\"><div class=\"end-midi-qol-hits-display\">${damage_results}`;\n                        content = await content.replace(searchString, replaceString);\n\n                        let damage_rolls = allDamageRolls.join('<div style=\"text-align:center\">(Force)</div>');\n                        const rollSearchString = /<div class=\"midi-qol-other-roll\">[\\s\\S]*<div class=\"end-midi-qol-other-roll\">/g;\n                        const rollReplaceString = `<div class=\"midi-qol-other-roll\"><div style=\"text-align:center\">(Force)</div>${damage_rolls}<div class=\"end-midi-qol-other-roll\">`;\n                        content = await content.replace(rollSearchString, rollReplaceString);\n\n                        await chatMessage.update({ content: content });\n                    }\n                }\n            }\n        }).render(true);\n    }\n})();","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"midi-qol":{"onUseMacroName":"ItemMacro"},"autoanimations":{"killAnim":false,"override":false,"animType":"t1","animName":"","bards":{"bardAnim":"a1","bardTarget":true,"bardTargetAnim":"a1","bardTargetColor":"a1","bardSelf":true,"marker":true,"markerColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","hmAnim":"a1","color":"a1","spellOptions":{"spellLoops":1},"uaStrikeType":"physical","dtvar":"dt1","divineSmite":{"dsEnable":false,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"a1"},"explosion":false,"explodeVariant":"ev1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":0.25},"item":{"enableAudio":false,"file":"","delay":100,"volume":0.25}},"selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"teleDist":30,"templates":{"tempType":"a1","tempAnim":"","tempColor":"","tempLoop":1,"customAnim":false,"customPath":""}}},"_id":"GORyPeb9dp6AYa66"}
{"name":"Absorb Elements","type":"spell","img":"modules/GMmacros/img/xge-absorb-elements.jpg","data":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>The spell captures some of the incoming energy, lessening its effect on you and storing it for your next melee attack. You have resistance to the triggering damage type until the start of your next turn. Also, the first time you hit with a melee attack on your next turn, the target takes an extra [[/r 1d6]] damage of the triggering type, and the spell ends.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__b  rd__b--3\"><div class=\"rd__b  rd__b--3\"><span class=\"rd__h rd__h--3\" data-title-index=\"1\"> <span class=\"entry-title-inner\">At Higher Levels.</span></span> <p>When you cast this spell using a spell slot of 2nd level or higher, the extra damage increases by [[/r 1d6]] for each slot level above 1st.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__spc-inline-post\"></div></div>","chat":"","unidentified":""},"source":"XGE","activation":{"type":"reaction","cost":1,"condition":"which you take when you take acid, cold, fire, lightning, or thunder damage"},"duration":{"value":1,"units":"round"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":"99","chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":1,"school":"abj","components":{"value":"","vocal":false,"somatic":true,"material":false,"ritual":false,"concentration":false},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"level","formula":"1d6"}},"effects":[{"_id":"5AH4ZVPW1gwCfkTn","changes":[{"key":"flags.midi-qol.absorbElements.level","mode":5,"value":"@item.level","priority":"20"}],"disabled":false,"duration":{"startTime":null,"turns":1},"icon":"modules/plutonium/media/icon/spell/xge-absorb-elements.webp","label":"Absorb Elements","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"data.abilities.cha.dc"}],"folder":null,"sort":0,"permission":{"default":0,"rbM5nB1AbUwbj4yJ":3},"flags":{"srd5e":{"page":"spells.html","source":"XGE","hash":"absorb%20elements_xge"},"core":{"sourceId":"Item.ERyugXcdX5YZwy71"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"onUseMacroName":"ItemMacro"},"itemacro":{"macro":{"data":{"_id":null,"name":"Absorb Elements","type":"script","author":"1Tf72cAwvdgu6AOn","img":"icons/svg/dice-target.svg","scope":"global","command":"const lastArg = args[args.length - 1];\nlet tactor;\nif (lastArg.tokenId) tactor = canvas.tokens.get(lastArg.tokenId).actor;\nelse tactor = game.actors.get(lastArg.actorId);\ntactor.deleteEmbeddedEntity(\"ActiveEffect\", lastArg.effectId);\n(async ()=>{\n  let element = await getContent();\n  if(!element) return;\n  const spellLevel = actor.data.flags[\"midi-qol\"].absorbElements.level\n\n// fazer uma função que cria o efeito no PJ\nfor (let tokenUuid of args[0].hitTargetUuids) {\n    const target = await fromUuid(tokenUuid);\n    const targetActor = target.actor;\n    if (!targetActor) continue;\nlet bsEffect1 = new ActiveEffect({\nlabel: \"Absorb Elements - resistance\", icon: \"modules/plutonium/media/icon/spell/xge-absorb-elements.webp\", changes: [{value: `${element}`, mode: CONST.ACTIVE_EFFECT_MODES.ADD, priority: 20, key:\" data.traits.dr.value\"}], duration: {rounds: 1}});\nlet bsEffect2 = new ActiveEffect({\nlabel: \"Absorb Elements - Attack\", icon: \"modules/plutonium/media/icon/spell/xge-absorb-elements.webp\", changes: [{value: `${spellLevel}d6[${element}]`, mode: CONST.ACTIVE_EFFECT_MODES.CUSTOM, priority: 20, key:\"data.bonuses.mwak.damage\"}], duration: {rounds: 1}, flags: {specialDuration: [\"1Hit:mwak\"]}});\n\n//Aplicar no PJ\nawait MidiQOL.socket().executeAsGM(\"createEffects\", {actorUuid: targetActor.uuid, effects: [bsEffect1.toObject()]})\nawait MidiQOL.socket().executeAsGM(\"createEffects\", {actorUuid: targetActor.uuid, effects: [bsEffect2.toObject()]})\nawait tactor.deleteEmbeddedEntity(\"ActiveEffect\", lastArg.effectId)\n}\n})();\n\nasync function getContent()\n{\n  let value = await new Promise((resolve)=>{\n    new Dialog({\n      title : `OOC Chat Dialog`, \n      buttons : { OK : {label : `Ok`, callback : (html)=> {const val = html.find('#element')[0]?.value; resolve(val);}}},\n        content: `\n          <form class=\"flexcol\">\n            <div class=\"form-group\">\n              <select id=\"element\">\n                <option value=\"acid\">Acid</option>\n                <option value=\"cold\">Cold</option>\n                <option value=\"fire\">Fire</option>\n                <option value=\"lightning\">Lightning</option>\n                <option value=\"thunder\">Thunder</option>\n              </select>\n            </div>\n          </form>\n        `,\n    }).render(true);\n  });\n  return value;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"exportSource":{"world":"criador","system":"dnd5e","coreVersion":"0.8.8","systemVersion":"1.3.6"}},"_id":"IZJMmIYiNAPazBu7"}
{"name":"Staggering Smite","type":"spell","img":"modules/plutonium/media/icon/spell/phb-staggering-smite.webp","data":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>The next time you hit a creature with a melee weapon attack during this spell's duration, your weapon pierces both body and mind, and the attack deals an extra [[/r 4d6]] psychic damage to the target. The target must make a Wisdom saving throw. On a failed save, it has disadvantage on attack rolls and ability checks, and can't take reactions, until the end of its next turn.</p><div class=\"rd__spc-inline-post\"></div></div>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":4,"school":"evo","components":{"value":"","vocal":true,"somatic":false,"material":false,"ritual":false,"concentration":true},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"none","formula":""}},"effects":[{"_id":"ZjGlyQjY319huydD","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro.Staggering Smite","priority":"20"},{"key":"flags.midi-qol.staggeringSmite.level","mode":5,"value":"4","priority":"20"}],"disabled":false,"duration":{"startTime":null,"rounds":10},"icon":"modules/plutonium/media/icon/spell/phb-staggering-smite.webp","label":"Staggering Smite","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":["1Hit:mwak","1Hit:rwak"],"transfer":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["flags.dnd5e.DamageBonusMacro","data.abilities.cha.dc"]}],"folder":null,"sort":0,"permission":{"default":0,"rbM5nB1AbUwbj4yJ":3},"flags":{"srd5e":{"page":"spells.html","source":"PHB","hash":"staggering%20smite_phb"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"onUseMacroName":""},"itemacro":{"macro":{"data":{"_id":null,"name":"Staggering Smite","type":"script","author":"1Tf72cAwvdgu6AOn","img":"icons/svg/dice-target.svg","scope":"global","command":"//branding\n// v1.0. Requires midi-qol and ATL.\nif (![\"mwak\",\"rwak\"].includes(args[0].item.data.actionType)) return {}; \nfor (let tokenUuid of args[0].hitTargetUuids) {\n    const target = await fromUuid(tokenUuid);\n    const targetActor = target.actor;\n    if (!targetActor) continue;\n    // create effect\n    let bsEffect = new ActiveEffect({label: \"Staggering Smite\", icon: \"modules/plutonium/media/icon/spell/phb-staggering-smite.webp\", changes: [{value: 1, mode: CONST.ACTIVE_EFFECT_MODES.OVERRIDE, priority: 20, key:\"flags.midi-qol.disadvantage.skill.all\"},{value: 1, mode: CONST.ACTIVE_EFFECT_MODES.OVERRIDE, priority: 20, key:\"flags.midi-qol.disadvantage.attack.all\"}], duration: {rounds: 1}, flags:{dae: {specialDuration: [\"turnEnd\"]}}})\n    await MidiQOL.socket().executeAsGM(\"createEffects\", {actorUuid: targetActor.uuid, effects: [bsEffect.toObject()]})\n}\nconst spellLevel = actor.data.flags[\"midi-qol\"].staggeringSmite.level;\nreturn{damageRoll: `${spellLevel}d6[psychic]`, flavor: \"Staggering Smite\"}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.4zmIP1GW897LasOh"},"exportSource":{"world":"criador","system":"dnd5e","coreVersion":"0.8.8","systemVersion":"1.3.6"}},"_id":"Rm0KWQHmDqvtaIqK"}
{"name":"Blinding Smite","type":"spell","img":"modules/plutonium/media/icon/spell/phb-blinding-smite.webp","data":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>The next time you hit a creature with a melee weapon attack during this spell's duration, your weapon flares with bright light, and the attack deals an extra [[/r 3d8]] radiant damage to the target. Additionally, the target must succeed on a Constitution saving throw or be <a href=\"https://5e.tools/conditionsdiseases.html#blinded_phb\" data-plut-hover=\"{&quot;page&quot;:&quot;conditionsdiseases.html&quot;,&quot;source&quot;:&quot;PHB&quot;,&quot;hash&quot;:&quot;blinded_phb&quot;}\">blinded</a> until the spell ends.</p><div class=\"rd__spc-inline-post\"></div><p>A creature <a href=\"https://5e.tools/conditionsdiseases.html#blinded_phb\" data-plut-hover=\"{&quot;page&quot;:&quot;conditionsdiseases.html&quot;,&quot;source&quot;:&quot;PHB&quot;,&quot;hash&quot;:&quot;blinded_phb&quot;}\">blinded</a> by this spell makes another Constitution saving throw at the end of each of its turns. On a successful save, it is no longer <a href=\"https://5e.tools/conditionsdiseases.html#blinded_phb\" data-plut-hover=\"{&quot;page&quot;:&quot;conditionsdiseases.html&quot;,&quot;source&quot;:&quot;PHB&quot;,&quot;hash&quot;:&quot;blinded_phb&quot;}\">blinded</a>.</p></div>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":3,"school":"evo","components":{"value":"","vocal":true,"somatic":false,"material":false,"ritual":false,"concentration":true},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"none","formula":""}},"effects":[{"_id":"bUvjVVw3euakm0xu","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro.Blinding Smite","priority":"20"},{"key":"flags.midi-qol.blindingSmite.level","mode":5,"value":"3","priority":"20"},{"key":"flags.midi-qol.blindingDC.level","mode":5,"value":"@attributes.spelldc","priority":"20"}],"disabled":false,"duration":{"startTime":null,"rounds":10},"icon":"modules/plutonium/media/icon/spell/phb-blinding-smite.webp","label":"Blinding Smite","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":["1Hit:mwak","1Hit:rwak"],"transfer":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["flags.dnd5e.DamageBonusMacro","data.abilities.cha.dc","data.abilities.cha.dc"]}],"folder":null,"sort":0,"permission":{"default":0,"rbM5nB1AbUwbj4yJ":3},"flags":{"srd5e":{"page":"spells.html","source":"PHB","hash":"blinding%20smite_phb"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"onUseMacroName":""},"itemacro":{"macro":{"data":{"_id":null,"name":"Blinding Smite","type":"script","author":"1Tf72cAwvdgu6AOn","img":"icons/svg/dice-target.svg","scope":"global","command":"// require the Blinding_GM macro as Execute As GM\n\nlet target = canvas.tokens.get(args[0].hitTargets[0]?._id);\nconst spellDC = actor.data.flags[\"midi-qol\"].blindingDC.level;\nlet saveType = \"con\";\nif (args[0].hitTargets.length === 0) return {};\n\telse {\n\tlet flavor = `${CONFIG.DND5E.abilities[saveType]} DC${spellDC}`;\n   \tlet save = (await target.actor.rollAbilitySave(saveType, { flavor, fastForward: true })).total;\n\t  if (save < spellDC) {\t\n\tfor (let tokenUuid of args[0].hitTargetUuids) {\n\tconst ttarget = await fromUuid(tokenUuid);\n\tconst targetActor = ttarget.actor;\n\tif (!targetActor) continue;\n\tlet bsEffect = new ActiveEffect({label: \"Blinding Smite\", icon: \"modules/plutonium/media/icon/spell/phb-blinding-smite.webp\", changes: \t\t[{value: `\"Blinding_GM\" @token ${spellDC}`, mode: CONST.ACTIVE_EFFECT_MODES.OVERRIDE, priority: 20, key:\"macro.execute\"}], duration: \t\t{rounds: \t10}, flags:{dae: {macroRepeat: \"endEveryTurn\"}}})\n\tawait MidiQOL.socket().executeAsGM(\"createEffects\", {actorUuid: targetActor.uuid, effects: [bsEffect.toObject()]})\n\t\tlet Cub_Condition = game.macros.getName(\"Cub_Condition\");\n    \tawait Cub_Condition.execute(target.id, \"Blinded\", \"add\");\n                // create effect\n\t} \n\t}\n\t}\nconst spellLevel = actor.data.flags[\"midi-qol\"].blindingSmite.level;\nreturn{damageRoll: `${spellLevel}d8[radiant]`, flavor: \"Blinding Smite\"};\n\n/* Blinding_GM macro.\nconst spellDC = args[2];\nconst lastArg = args[args.length - 1];\nlet tactor;\nif (lastArg.tokenId) tactor = canvas.tokens.get(lastArg.tokenId).actor;\nelse tactor = game.actors.get(lastArg.actorId);\n\nlet saveType = \"con\";\nlet flavor = `${CONFIG.DND5E.abilities[saveType]} DC${spellDC}`;\nlet save = (await tactor.rollAbilitySave(saveType, { flavor, fastForward: true })).total;\nif (save >= spellDC) {\ngame.cub.hasCondition(\"Blinded\", tactor) ? await game.cub.removeCondition(\"Blinded\", tactor) : game.cub.removeCondition(\"Blinded\", tactor)\ntactor.deleteEmbeddedEntity(\"ActiveEffect\", lastArg.effectId)\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.rf69h6xNdtAnObgs"},"exportSource":{"world":"criador","system":"dnd5e","coreVersion":"0.8.8","systemVersion":"1.3.6"}},"_id":"ScSfRehRFuQwnLw4"}
{"name":"Thunderous Smite","type":"spell","img":"modules/plutonium/media/icon/spell/phb-thunderous-smite.webp","data":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>The first time you hit with a melee weapon attack during this spell's duration, your weapon rings with thunder that is audible within 300 feet of you, and the attack deals an extra [[/r 2d6]] thunder damage to the target. Additionally, if the target is a creature, it must succeed on a Strength saving throw or be pushed 10 feet away from you and knocked <a href=\"https://5e.tools/conditionsdiseases.html#prone_phb\" data-plut-hover=\"{&quot;page&quot;:&quot;conditionsdiseases.html&quot;,&quot;source&quot;:&quot;PHB&quot;,&quot;hash&quot;:&quot;prone_phb&quot;}\">prone</a>.</p><div class=\"rd__spc-inline-post\"></div></div>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":1,"school":"evo","components":{"value":"","vocal":true,"somatic":false,"material":false,"ritual":false,"concentration":true},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"none","formula":""}},"effects":[{"_id":"rZnn6dJ2qCXaajTU","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro.Thunderous Smite","priority":"20"},{"key":"flags.midi-qol.thunderousSmite.level","mode":5,"value":"2","priority":"20"},{"key":"flags.midi-qol.thunderousDC.level","mode":0,"value":"@attributes.spelldc","priority":"20"}],"disabled":false,"duration":{"startTime":null,"rounds":10},"icon":"modules/plutonium/media/icon/spell/phb-thunderous-smite.webp","label":"Thunderous Smite","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":["1Hit:mwak","1Hit:rwak"],"transfer":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["flags.dnd5e.DamageBonusMacro","data.abilities.cha.dc","data.abilities.cha.dc"]}],"folder":null,"sort":0,"permission":{"default":0,"rbM5nB1AbUwbj4yJ":3},"flags":{"srd5e":{"page":"spells.html","source":"PHB","hash":"thunderous%20smite_phb"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"onUseMacroName":""},"itemacro":{"macro":{"data":{"_id":null,"name":"Thunderous Smite","type":"script","author":"rbM5nB1AbUwbj4yJ","img":"icons/svg/dice-target.svg","scope":"global","command":"let target = canvas.tokens.get(args[0].hitTargets[0]?._id);\nconst spellDC = actor.data.flags[\"midi-qol\"].thunderousDC.level;\nlet saveType = \"str\";\nif (args[0].hitTargets.length === 0) return {};\n\telse {\n\tlet flavor = `${CONFIG.DND5E.abilities[saveType]} DC${spellDC}`;\n   \tlet save = (await target.actor.rollAbilitySave(saveType, { flavor, fastForward: true })).total;\n\t  if (save < spellDC) {\t\n\t\tlet Cub_Condition = game.macros.getName(\"Cub_Condition\");\n    \t\tCub_Condition.execute(target.id, \"Prone\", \"add\");\n\t\t}\n\t}\nconst spellLevel = actor.data.flags[\"midi-qol\"].thunderousSmite.level;\nreturn{damageRoll: `${spellLevel}d6[thunder]`, flavor: \"Thunderous Smite\"};","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.y4OxsSifV43KWiLH"},"exportSource":{"world":"criador","system":"dnd5e","coreVersion":"0.8.8","systemVersion":"1.3.6"}},"_id":"aaeskIUemAzM1EJ1"}
{"_id":"bHqnrEq8Oo1PhRqw","name":"Sleep","type":"spell","img":"modules/plutonium/media/icon/spell/phb-sleep.jpg","data":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>This spell sends creatures into a magical slumber. Roll [[/r 5d8]]; the total is how many hit points of creatures this spell can affect. Creatures within 20 feet of a point you choose within range are affected in ascending order of their current hit points (ignoring <a href=\"https://5e.tools/conditionsdiseases.html#unconscious_phb\">unconscious</a> creatures).</p><div class=\"rd__spc-inline-post\"></div><p>Starting with the creature that has the lowest current hit points, each creature affected by this spell falls <a href=\"https://5e.tools/conditionsdiseases.html#unconscious_phb\">unconscious</a> until the spell ends, the sleeper takes damage, or someone uses an action to shake or slap the sleeper awake. Subtract each creature's hit points from the total before moving on to the creature with the next lowest hit points. A creature's hit points must be equal to or less than the remaining total for that creature to be affected.</p><p>Undead and creatures immune to being <a href=\"https://5e.tools/conditionsdiseases.html#charmed_phb\">charmed</a> aren't affected by this spell.</p></div><div class=\"rd__b  rd__b--3\"><div class=\"rd__b  rd__b--3\"><span class=\"rd__h rd__h--3\" data-title-index=\"7472\"> <span class=\"entry-title-inner\">At Higher Levels.</span></span> <p>When you cast this spell using a spell slot of 2nd level or higher, roll an additional [[/r 2d8]] for each slot level above 1st.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__spc-inline-post\"></div></div>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":20,"width":null,"units":"ft","type":"sphere"},"range":{"value":90,"long":null,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[["5d8","midi-none"]],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":1,"school":"enc","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":false},"materials":{"value":"a pinch of fine sand, rose petals, or a cricket","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"always","prepared":true},"scaling":{"mode":"level","formula":"2d8"}},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"4tdSgqYFa8LtE5cs":3,"XaHraXd0L5EoLNNo":3,"05k4ub2VgC3VLxAg":3},"flags":{"srd5e":{"page":"spells.html","source":"PHB","hash":"sleep_phb"},"core":{"sourceId":"Compendium.plutonium.spells.AlbiBe8uZFPEeakZ"},"midi-qol":{"onUseMacroName":"ItemMacro"},"autoanimations":{"killAnim":false,"override":false,"animType":"t1","animName":"","bards":{"bardAnim":"a1","bardTarget":true,"bardTargetAnim":"a1","bardTargetColor":"a1","bardSelf":true,"marker":true,"markerColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","hmAnim":"a1","color":"n1","spellOptions":{"spellLoops":1},"uaStrikeType":"physical","dtvar":"dt1","divineSmite":{"dsEnable":false,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"a1"},"explosion":false,"explodeVariant":"ev1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":0.25},"item":{"enableAudio":false,"file":"","delay":100,"volume":0.25}},"selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"teleDist":30},"itemacro":{"macro":{"data":{"_id":null,"name":"Sleep","type":"script","author":"05k4ub2VgC3VLxAg","img":"icons/svg/dice-target.svg","scope":"global","command":"let sleepHp = args[0].damageTotal;\n\nif(!sleepHp) {\n  ui.notifications.error(\"No arguments passed to Sleep macro\");\n  return;\n}\nconsole.log(`starting Sleep macro with sleepHp[${sleepHp}]`);\n\n// Get Targets\nlet targets = args[0].targets\nlet newTargets = targets.map(a => canvas.tokens.get(a._id))\n\n// Sort targets by HP ascending\nnewTargets = newTargets.sort(function(a, b) {\n  const hpValueOfA = a.actor.data.data.attributes.hp.value;\n  const HpValueOfB = b.actor.data.data.attributes.hp.value;\n  return hpValueOfA - HpValueOfB;\n});\n\nlet remainingSleepHp = sleepHp;\nconst condition = \"Unconscious\";\nfor(let target of newTargets) {\n  // Skip targets already unconscious\n  if(await game.cub.hasCondition(condition, target.actor)) {\n    console.log(`${target.actor.name} is already asleep, skipping it.`);\n    continue;\n  }\n\n  let targetHpValue = target.actor.data.data.attributes.hp.value;\n  if(remainingSleepHp > targetHpValue) {\n    remainingSleepHp -= targetHpValue;\n    console.log(`${target.actor.name} with hp ${targetHpValue} falls asleep, remaining hp from dice ${remainingSleepHp}.`);\n    // Apply unconscious condition to target\n    game.cub.addCondition(condition, target.actor);\n  } else {\n    console.log(`${target.actor.name} with hp ${targetHpValue} resists asleep, skipping remaining targets.`);\n    break;\n  }\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}}}}
{"name":"Ensnaring Strike","type":"spell","img":"modules/plutonium/media/icon/spell/phb-ensnaring-strike.webp","data":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>The next time you hit a creature with a weapon attack before this spell ends, a writhing mass of thorny vines appears at the point of impact, and the target must succeed on a Strength saving throw or be <a href=\"https://5e.tools/conditionsdiseases.html#restrained_phb\" data-plut-hover=\"{&quot;page&quot;:&quot;conditionsdiseases.html&quot;,&quot;source&quot;:&quot;PHB&quot;,&quot;hash&quot;:&quot;restrained_phb&quot;}\">restrained</a> by the magical vines until the spell ends. A Large or larger creature has advantage on this saving throw. If the target succeeds on the save, the vines shrivel away.</p><div class=\"rd__spc-inline-post\"></div><p>While <a href=\"https://5e.tools/conditionsdiseases.html#restrained_phb\" data-plut-hover=\"{&quot;page&quot;:&quot;conditionsdiseases.html&quot;,&quot;source&quot;:&quot;PHB&quot;,&quot;hash&quot;:&quot;restrained_phb&quot;}\">restrained</a> by this spell, the target takes [[/r 1d6]] piercing damage at the start of each of its turns. A creature <a href=\"https://5e.tools/conditionsdiseases.html#restrained_phb\" data-plut-hover=\"{&quot;page&quot;:&quot;conditionsdiseases.html&quot;,&quot;source&quot;:&quot;PHB&quot;,&quot;hash&quot;:&quot;restrained_phb&quot;}\">restrained</a> by the vines or one that can touch the creature can use its action to make a Strength check against your spell save DC. On a success, the target is freed.</p></div><div class=\"rd__b  rd__b--3\"><div class=\"rd__b  rd__b--3\"><span class=\"rd__h rd__h--3\" data-title-index=\"2\"> <span class=\"entry-title-inner\">At Higher Levels.</span></span> <p>If you cast this spell using a spell slot of 2nd level or higher, the damage increases by [[/r 1d6]] for each slot level above 1st.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__spc-inline-post\"></div></div>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"save","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":1,"school":"con","components":{"value":"","vocal":true,"somatic":false,"material":false,"ritual":false,"concentration":true},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"level","formula":"1d6"}},"effects":[{"_id":"QjokgzRRv5cJRCYE","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro.Ensnaring Strike","priority":"20"},{"key":"flags.midi-qol.ensnaringStrike.level","mode":5,"value":"@item.level","priority":"20"},{"key":"flags.midi-qol.ensnaringDC.level","mode":5,"value":"@attributes.spelldc","priority":"20"}],"disabled":false,"duration":{"startTime":null,"rounds":10},"icon":"modules/plutonium/media/icon/spell/phb-ensnaring-strike.webp","label":"Ensnaring Strike","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":["1Hit:mwak","1Hit:rwak"],"transfer":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["flags.dnd5e.DamageBonusMacro","data.abilities.cha.dc","data.abilities.cha.dc"]}],"folder":null,"sort":0,"permission":{"default":0,"rbM5nB1AbUwbj4yJ":3},"flags":{"srd5e":{"page":"spells.html","source":"PHB","hash":"ensnaring%20strike_phb"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"core":{"sourceId":"Item.iUIt6MO3Ioq2z59k"},"midi-qol":{"onUseMacroName":""},"itemacro":{"macro":{"data":{"_id":null,"name":"Ensnaring Strike","type":"script","author":"1Tf72cAwvdgu6AOn","img":"icons/svg/dice-target.svg","scope":"global","command":"let target = canvas.tokens.get(args[0].hitTargets[0]?._id);\nconst spellDC = actor.data.flags[\"midi-qol\"].ensnaringDC.level;\nlet saveType = \"str\";\nif (args[0].hitTargets.length === 0) return {};\n\telse {\n\tlet flavor = `${CONFIG.DND5E.abilities[saveType]} DC${spellDC}`;\n   \tlet save = (await target.actor.rollAbilitySave(saveType, { flavor, fastForward: true })).total;\n\t  if (save < spellDC) {\t\n\t\tlet Cub_Condition = game.macros.getName(\"Cub_Condition\");\n    \t\tCub_Condition.execute(target.id, \"Restrained\", \"add\");\n\t\t} else {return {}}\n\t}\nconst spellLevel = actor.data.flags[\"midi-qol\"].ensnaringStrike.level;\nreturn{damageRoll: `${spellLevel}d6[thunder]`, flavor: \"Ensnaring Strike\"};","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"exportSource":{"world":"criador","system":"dnd5e","coreVersion":"0.8.8","systemVersion":"1.3.6"}},"_id":"fnUPiji5677xaQPf"}
{"name":"Wrathful Smite","type":"spell","img":"modules/plutonium/media/icon/spell/phb-wrathful-smite.webp","data":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>The next time you hit with a melee weapon attack during this spell's duration, your attack deals an extra [[/r 1d6]] psychic damage. Additionally, if the target is a creature, it must make a Wisdom saving throw or be <a href=\"https://5e.tools/conditionsdiseases.html#frightened_phb\" data-plut-hover=\"{&quot;page&quot;:&quot;conditionsdiseases.html&quot;,&quot;source&quot;:&quot;PHB&quot;,&quot;hash&quot;:&quot;frightened_phb&quot;}\">frightened</a> of you until the spell ends. As an action, the creature can make a Wisdom check against your spell save DC to steel its resolve and end this spell.</p><div class=\"rd__spc-inline-post\"></div></div>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":1,"school":"evo","components":{"value":"","vocal":true,"somatic":false,"material":false,"ritual":false,"concentration":true},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"none","formula":""}},"effects":[{"_id":"GJRQbsQVtQ5CJMe9","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro.Wrathful Smite","priority":"20"},{"key":"flags.midi-qol.wrathfulSmite.level","mode":5,"value":"1","priority":"20"},{"key":"flags.midi-qol.wrathfulDC.level","mode":0,"value":"@attributes.spelldc","priority":"20"}],"disabled":false,"duration":{"startTime":null,"rounds":10},"icon":"modules/plutonium/media/icon/spell/phb-wrathful-smite.webp","label":"Wrathful Smite","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":["1Hit:mwak","1Hit:rwak"],"transfer":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["data.abilities.cha.dc","data.abilities.cha.dc","data.abilities.cha.dc"]}],"folder":null,"sort":0,"permission":{"default":0,"rbM5nB1AbUwbj4yJ":3},"flags":{"srd5e":{"page":"spells.html","source":"PHB","hash":"wrathful%20smite_phb"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"onUseMacroName":""},"itemacro":{"macro":{"data":{"_id":null,"name":"Wrathful Smite","type":"script","author":"rbM5nB1AbUwbj4yJ","img":"icons/svg/dice-target.svg","scope":"global","command":"let target = canvas.tokens.get(args[0].hitTargets[0]?._id);\nconst spellDC = actor.data.flags[\"midi-qol\"].wrathfulDC.level;\nlet saveType = \"wis\";\nif (args[0].hitTargets.length === 0) return {};\n\telse {\n\tlet flavor = `${CONFIG.DND5E.abilities[saveType]} DC${spellDC}`;\n   \tlet save = (await target.actor.rollAbilitySave(saveType, { flavor, fastForward: true })).total;\n\t  if (save < spellDC) {\t\n\t\tlet Cub_Condition = game.macros.getName(\"Cub_Condition\");\n    \t\tCub_Condition.execute(target.id, \"Frightened\", \"add\");\n\t\t}\n\t}\nconst spellLevel = actor.data.flags[\"midi-qol\"].wrathfulSmite.level;\nreturn{damageRoll: `${spellLevel}d6[psychic]`, flavor: \"Wrathful Smite\"};","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.umH5y4Dyea4HzJbx"},"exportSource":{"world":"criador","system":"dnd5e","coreVersion":"0.8.8","systemVersion":"1.3.6"}},"_id":"jD2lHVU7nAZfvKH5"}
{"_id":"o33meOJU3csZaCbN","name":"Divine Smite","type":"spell","img":"systems/dnd5e/icons/skills/light_05.jpg","data":{"description":{"value":"<p>Starting at 2nd Level, when you hit a creature with a melee weapon Attack, you can expend one spell slot to deal radiant damage to the target, in addition to the weapon’s damage.</p>\n                                                                                                                <p>The extra damage is 2d8 for a 1st-level spell slot, plus 1d8 for each Spell Level higher than 1st, to a maximum of 5d8.</p>\n                                                                                                                <p>The damage increases by 1d8 if the target is an Undead or a fiend, to a maximum of 6d8.</p>\n                                                                                                                <p> </p>\n                                                                                                                <p>This item uses the \"item macro\" feature where the macro that does the rolling is bound to the item. If you want to edit the macro you need to have the item macros module installed, but it is not required to just use the item.</p>","chat":"","unidentified":""},"source":"","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":5,"long":5,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":1,"school":"con","components":{"value":"","vocal":false,"somatic":false,"material":false,"ritual":false,"concentration":false},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"always","prepared":false},"scaling":{"mode":"none","formula":""},"spellType":{"value":"","_deprecated":true},"time":{"value":"","_deprecated":true},"damageType":{"value":"","_deprecated":true},"concentration":{"value":null,"_deprecated":true},"ritual":{"value":null,"_deprecated":true},"attributes":{"spelldc":10}},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"NeG597KOgANJAOdY":3},"flags":{"dynamiceffects":{"effects":[{"modSpecKey":"macro.itemMacro","value":"@target @item.level @item","mode":"+","targetSpecific":false,"id":1,"itemId":"0u1wiqpT0znKtx4g","active":true,"_targets":[]},{"modSpecKey":"macro.tokenMagic","value":"fumes","mode":"+","targetSpecific":false,"id":2,"itemId":"0u1wiqpT0znKtx4g","active":true,"_targets":[],"label":"Macro TokenMagic"}],"equipActive":false,"alwaysActive":false},"betterRolls5e":{"quickDamage":{"context":{"0":""},"value":{"0":true},"altValue":{"0":true}},"critRange":{"value":""},"critDamage":{"value":""},"quickDesc":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickOther":{"value":true,"altValue":true},"quickFlavor":{"value":true,"altValue":true},"quickVersatile":{"value":false,"altValue":false}},"favtab":{"isFavourite":true,"isFavorite":true},"itemacro":{"macro":{"data":{"_id":null,"name":"Divine Smite","type":"script","author":"g4WGw0lAZ3nIhapn","img":"icons/svg/dice-target.svg","scope":"global","command":"let target = canvas.tokens.get(args[0].hitTargets[0]?._id);\nlet improvedDivineSmite = args[0].actor.items.find(i=> i.name ===\"Improved Divine Smite\");\nlet numDice = 1 + args[0].spellLevel;\nif (improvedDivineSmite) numDice += 1;\nlet undead = [\"undead\", \"fiend\"].some(type => (target?.actor.data.data.details.type?.value || \"\").toLowerCase().includes(type));\nif (undead) numDice += 1;\nif (args[0].isCritical) numDice = numDice * 2;\nlet damageRoll = new Roll(`${numDice}d8`).roll();\nif (args[0].isCritical) damageRoll = MidiQOL.doCritModify(damageRoll)\nnew MidiQOL.DamageOnlyWorkflow(actor, token, damageRoll.total, \"radiant\", target ? [target] : [], damageRoll, {flavor: \"Divine Smite - Damage Roll (Radiant)\", itemCardId: args[0].itemCardId})","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"mess":{"templateTexture":""},"dae":{"alwaysActive":false,"activeEquipped":false},"midi-qol":{"onUseMacroName":"ItemMacro"},"core":{"sourceId":"Item.pJKe8oNZdJSKtbcu"},"autoanimations":{"killAnim":false,"override":true,"animType":"t3","animName":"1 Handed Slashing","bards":{"bardAnim":"a1","bardTarget":true,"bardSelf":true,"marker":true,"markerColor":"a1","bardTargetAnim":"a1","bardTargetColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","hmAnim":"a1","color":"n1","spellOptions":{"spellLoops":1},"uaStrikeType":"physical","dtvar":"dt1","explosion":false,"explodeVariant":"ev1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":25},"item":{"enableAudio":false,"file":"","delay":100,"volume":25}},"selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"teleDist":30,"animLevel":false,"divineSmite":{"dsEnable":true,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"blue yellow"},"exAnimLevel":false,"impactVar":"a1","templates":{"tempType":"a1","tempAnim":"","tempColor":"","tempLoop":1,"customAnim":false,"customPath":""}}}}
{"name":"Favored Foe","type":"spell","img":"modules/plutonium/media/icon/spell/phb-hunters-mark.jpg","data":{"description":{"value":"<p>This 1st-level feature replaces the Favored Enemy feature and works with the Foe Slayer feature. You gain no benefit from the replaced feature and don't qualify for anything in the game that requires it.</p>\n<p>When you hit a creature with an attack roll, you can call on your mystical bond with nature to mark the target as your favored enemy for 1 minute or until you lose your concentration (as if you were concentrating on a spell).</p>\n<p>The first time on each of your turns that you hit the favored enemy and deal damage to it, including when you mark it, you increase that damage by 1d4.</p>\n<p>You can use this feature to mark a favored enemy a number of times equal to your proficiency bonus, and you regain all expended uses when you finish a long rest.</p>\n<p><strong>TROCAR NA MACRO: This feature's extra damage increases when you reach certain levels in this class: to 1d6 at 6th level and to 1d8 at 14th level.</strong></p>","chat":"","unidentified":""},"source":"","activation":{"type":"special","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"charges","target":"VQ0z7KiIaTrztIOI","amount":1},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":1,"school":"abj","components":{"value":"","vocal":false,"somatic":false,"material":false,"ritual":false,"concentration":true},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"innate","prepared":true},"scaling":{"mode":"none","formula":""}},"effects":[{"_id":"r2eUwnMZ09JTn0vN","changes":[],"disabled":false,"duration":{"startTime":null,"seconds":600},"icon":"modules/plutonium/media/icon/spell/phb-hunters-mark.jpg","label":"Favored Foe","transfer":false,"flags":{"dae":{"stackable":false,"macroRepeat":"none","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null}],"folder":null,"sort":0,"permission":{"default":0,"05k4ub2VgC3VLxAg":3},"flags":{"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"modules/jb2a_patreon/Library/1st_Level/Hunters_Mark/HuntersMark_02_Regular_Purple_Pulse_200x200.webm","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"autoanimations":{"killAnim":false,"animLevel":false,"override":false,"animType":"t4","animName":"","bards":{"bardAnim":"a1","bardTarget":true,"bardTargetAnim":"a1","bardTargetColor":"a1","bardSelf":true,"marker":true,"markerColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","hmAnim":"a1","rangedOptions":{"rangeDmgType":""},"color":"n1","spellOptions":{"spellLoops":1},"uaStrikeType":"physical","dtvar":"dt1","divineSmite":{"dsEnable":false,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"a1"},"explosion":false,"exAnimLevel":false,"explodeVariant":"ev1","impactVar":"a1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":0.25},"item":{"enableAudio":false,"file":"","delay":100,"volume":0.25}},"selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"teleDist":30,"templates":{"tempType":"a1","tempAnim":"","tempColor":"","tempLoop":1,"customAnim":false,"customPath":""}},"itemacro":{"macro":{"data":{"_id":null,"name":"Favored Foe","type":"script","author":"05k4ub2VgC3VLxAg","img":"icons/svg/dice-target.svg","scope":"global","command":"// Sample Hunters mark onUse macro\nif (args[0].hitTargets.length === 0) return;\nif (args[0].tag === \"OnUse\") {\n    // Sample Hunters mark\n    let targetUuid = args[0].hitTargets[0].uuid;\n    let actor = await MidiQOL.MQfromActorUuid(args[0].actorUuid); // actor who cast the spell\n\n    if (!actor || !targetUuid) {\n      console.error(\"Favored Foe: no token/target selected\");\n      return;\n    }\n    // create an active effect, \n    //  one change showing the hunter's mark icon on the caster\n    //  the second setting the flag for the macro to be called when damaging an opponent\n \n    const effectData = {\n      changes: [\n        {key: \"flags.midi-qol.huntersMark\", mode: 5, value: targetUuid, priority: 20}, // who is marked\n        // {key: \"flags.dnd5e.DamageBonusMacro\", mode: 0, value: `ItemMacro.${args[0].item.name}`, priority: 20} // macro to apply the damage\n        {key: \"flags.dnd5e.DamageBonusMacro\", mode: 0, value: `ItemMacro.${args[0].item.name}`, priority: 20} // macro to apply the damage\n      ],\n\n      origin: args[0].itemUuid, //flag the effect as associated to the spell being cast\n      disabled: false,\n      duration: args[0].item.effects[0].duration,\n      icon: args[0].item.img,\n      label: args[0].item.name\n    }\n    effectData.duration.startTime = game.time.worldTime;\n    await actor.createEmbeddedDocuments(\"ActiveEffect\", [effectData]);\n} else if (args[0].tag === \"DamageBonus\") {\n    // only weapon attacks\n    if (![\"mwak\",\"rwak\",\"msak\",\"rsak\"].includes(args[0].item.data.actionType)) return {};\n    let targetUuid = args[0].hitTargets[0].uuid;\n    // only on the marked target\n    if (targetUuid !== getProperty(args[0].actor.flags, \"midi-qol.huntersMark\")) return {};\n    let damageType = args[0].item.data.damage.parts[0][1];\n    const diceMult = args[0].isCritical ? 2: 1;\n    return {damageRoll: `${diceMult}d4[${damageType}]`, flavor: \"Favored Foe Damage\"}\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"midi-qol":{"onUseMacroName":"ItemMacro"},"core":{"sourceId":"Item.Wrs8AYcI7g6WEatd"}},"_id":"t9Eo1ok2LjAy3UYw"}
